<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<meta charset="utf-8">
<meta name="generator" content="ReSpec 34.5.0">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<style>span.example-title{text-transform:none}
:is(aside,div).example,div.illegal-example{padding:.5em;margin:1em 0;position:relative;clear:both}
div.illegal-example{color:red}
div.illegal-example p{color:#000}
aside.example div.example{border-left-width:.1em;border-color:#999;background:#fff}</style>
<style>.issue-label{text-transform:initial}
.warning>p:first-child{margin-top:0}
.warning{padding:.5em;border-left-width:.5em;border-left-style:solid}
span.warning{padding:.1em .5em .15em}
.issue.closed span.issue-number{text-decoration:line-through}
.issue.closed span.issue-number::after{content:" (Closed)";font-size:smaller}
.warning{border-color:#f11;border-color:var(--warning-border,#f11);border-width:.2em;border-style:solid;background:#fbe9e9;background:var(--warning-bg,#fbe9e9);color:#000;color:var(--text,#000)}
.warning-title:before{content:"⚠";font-size:1.3em;float:left;padding-right:.3em;margin-top:-.3em}
li.task-list-item{list-style:none}
input.task-list-item-checkbox{margin:0 .35em .25em -1.6em;vertical-align:middle}
.issue a.respec-gh-label{padding:5px;margin:0 2px 0 2px;font-size:10px;text-transform:none;text-decoration:none;font-weight:700;border-radius:4px;position:relative;bottom:2px;border:none;display:inline-block}</style>
<style>pre.idl{padding:1em;position:relative}
pre.idl>code{color:#000;color:var(--text,#000)}
@media print{
pre.idl{white-space:pre-wrap}
}
.idlHeader{display:block;width:150px;background:#8ccbf2;background:var(--def-border,#8ccbf2);color:#fff;color:var(--defrow-border,#fff);font-family:sans-serif;font-weight:700;margin:-1em 0 1em -1em;height:28px;line-height:28px}
.idlHeader a.self-link{margin-left:.3cm;text-decoration:none;border-bottom:none;color:inherit}
.idlID{font-weight:700;color:#005a9c}
.idlType{color:#005a9c}
.idlName{color:#ff4500}
.idlName a{color:#ff4500;border-bottom:1px dotted #ff4500;text-decoration:none}
a.idlEnumItem{color:#000;border-bottom:1px dotted #ccc;text-decoration:none}
.idlSuperclass{font-style:italic;color:#005a9c}
.idlDefaultValue,.idlParamName{font-style:italic}
.extAttr{color:#666}
.idlSectionComment{color:gray}
.idlIncludes a{font-weight:700}
.respec-button-copy-paste:focus{text-decoration:none;border-color:#51a7e8;outline:0;box-shadow:0 0 5px rgba(81,167,232,.5)}
.respec-button-copy-paste:is(:focus:hover,.selected:focus){border-color:#51a7e8}
.respec-button-copy-paste:is(:hover,:active,.zeroclipboard-is-hover,.zeroclipboard-is-active){text-decoration:none;background-color:#ddd;background-image:linear-gradient(#eee,#ddd);border-color:#ccc}
.respec-button-copy-paste:is(:active,.selected,.zeroclipboard-is-active){background-color:#dcdcdc;background-image:none;border-color:#b5b5b5;box-shadow:inset 0 2px 4px rgba(0,0,0,.15)}
.respec-button-copy-paste.selected:hover{background-color:#cfcfcf}
.respec-button-copy-paste:is(:disabled,:disabled:hover,.disabled,.disabled:hover){color:rgba(102,102,102,.5);cursor:default;background-color:rgba(229,229,229,.5);background-image:none;border-color:rgba(197,197,197,.5);box-shadow:none}
@media print{
.respec-button-copy-paste{visibility:hidden}
}</style>
<style>dfn{cursor:pointer}
.dfn-panel{position:absolute;z-index:35;min-width:300px;max-width:500px;padding:.5em .75em;margin-top:.6em;font-family:"Helvetica Neue",sans-serif;font-size:small;background:#fff;background:var(--indextable-hover-bg,#fff);color:#000;color:var(--text,#000);box-shadow:0 1em 3em -.4em rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);box-shadow:0 1em 3em -.4em var(--tocsidebar-shadow,rgba(0,0,0,.3)),0 0 1px 1px var(--tocsidebar-shadow,rgba(0,0,0,.05));border-radius:2px}
.dfn-panel:not(.docked)>.caret{position:absolute;top:-9px}
.dfn-panel:not(.docked)>.caret::after,.dfn-panel:not(.docked)>.caret::before{content:"";position:absolute;border:10px solid transparent;border-top:0;border-bottom:10px solid #fff;border-bottom-color:var(--indextable-hover-bg,#fff);top:0}
.dfn-panel:not(.docked)>.caret::before{border-bottom:9px solid #a2a9b1;border-bottom-color:var(--indextable-hover-bg,#a2a9b1)}
.dfn-panel *{margin:0}
.dfn-panel b{display:block;color:#000;color:var(--text,#000);margin-top:.25em}
.dfn-panel ul a[href]{color:#333;color:var(--text,#333)}
.dfn-panel>div{display:flex}
.dfn-panel a.self-link{font-weight:700;margin-right:auto}
.dfn-panel .marker{padding:.1em;margin-left:.5em;border-radius:.2em;text-align:center;white-space:nowrap;font-size:90%;color:#040b1c}
.dfn-panel .marker.dfn-exported{background:#d1edfd;box-shadow:0 0 0 .125em #1ca5f940}
.dfn-panel .marker.idl-block{background:#8ccbf2;box-shadow:0 0 0 .125em #0670b161}
.dfn-panel a:not(:hover){text-decoration:none!important;border-bottom:none!important}
.dfn-panel a[href]:hover{border-bottom-width:1px}
.dfn-panel ul{padding:0}
.dfn-panel li{margin-left:1em}
.dfn-panel.docked{position:fixed;left:.5em;top:unset;bottom:2em;margin:0 auto;max-width:calc(100vw - .75em * 2 - .5em - .2em * 2);max-height:30vh;overflow:auto}</style>

<title>Compute Pressure Level 1</title>



<style>@counter-style pressure-states-emoji {
    system: cyclic;
    symbols: "\026AA" "\01F7E2" "\01F7E1" "\01F534";
    suffix: " ";
  }
  .pressure-states {
    list-style-type: pressure-states-emoji;
  }
  @counter-style pressure-source-emoji {
    system: cyclic;
    symbols: "\1F321" "\1F4A1";
    suffix: " ";
  }
  .pressure-source {
    list-style-type: pressure-source-emoji;
  }
  ul li::marker {
    font-family: "Segoe UI Emoji", "Noto Color Emoji";
  }</style>

<style id="respec-mainstyle">@keyframes pop{
0%{transform:scale(1,1)}
25%{transform:scale(1.25,1.25);opacity:.75}
100%{transform:scale(1,1)}
}
:is(h1,h2,h3,h4,h5,h6,a) abbr{border:none}
dfn{font-weight:700}
a.internalDFN{color:inherit;border-bottom:1px solid #99c;text-decoration:none}
a.externalDFN{color:inherit;border-bottom:1px dotted #ccc;text-decoration:none}
a.bibref{text-decoration:none}
.respec-offending-element:target{animation:pop .25s ease-in-out 0s 1}
.respec-offending-element,a[href].respec-offending-element{text-decoration:red wavy underline}
@supports not (text-decoration:red wavy underline){
.respec-offending-element:not(pre){display:inline-block}
.respec-offending-element{background:url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs) bottom repeat-x}
}
#references :target{background:#eaf3ff;animation:pop .4s ease-in-out 0s 1}
cite .bibref{font-style:normal}
a[href].orcid{padding-left:4px;padding-right:4px}
a[href].orcid>svg{margin-bottom:-2px}
.toc a,.tof a{text-decoration:none}
ol.tof,ul.tof{list-style:none outside none}
.caption{margin-top:.5em;font-style:italic}
table.simple{border-spacing:0;border-collapse:collapse;border-bottom:3px solid #005a9c}
.simple th{background:#005a9c;color:#fff;padding:3px 5px;text-align:left}
.simple th a{color:#fff;padding:3px 5px;text-align:left}
.simple th[scope=row]{background:inherit;color:inherit;border-top:1px solid #ddd}
.simple td{padding:3px 10px;border-top:1px solid #ddd}
.simple tr:nth-child(even){background:#f0f6ff}
.section dd>p:first-child{margin-top:0}
.section dd>p:last-child{margin-bottom:0}
.section dd{margin-bottom:1em}
.section dl.attrs dd,.section dl.eldef dd{margin-bottom:0}
#issue-summary>ul{column-count:2}
#issue-summary li{list-style:none;display:inline-block}
details.respec-tests-details{margin-left:1em;display:inline-block;vertical-align:top}
details.respec-tests-details>*{padding-right:2em}
details.respec-tests-details[open]{z-index:999999;position:absolute;border:thin solid #cad3e2;border-radius:.3em;background-color:#fff;padding-bottom:.5em}
details.respec-tests-details[open]>summary{border-bottom:thin solid #cad3e2;padding-left:1em;margin-bottom:1em;line-height:2em}
details.respec-tests-details>ul{width:100%;margin-top:-.3em}
details.respec-tests-details>li{padding-left:1em}
.self-link:hover{opacity:1;text-decoration:none;background-color:transparent}
aside.example .marker>a.self-link{color:inherit}
.header-wrapper{display:flex;align-items:baseline}
:is(h2,h3,h4,h5,h6):not(#toc>h2,#abstract>h2,#sotd>h2,.head>h2){position:relative;left:-.5em}
:is(h2,h3,h4,h5,h6):not(#toch2)+a.self-link{color:inherit;order:-1;position:relative;left:-1.1em;font-size:1rem;opacity:.5}
:is(h2,h3,h4,h5,h6)+a.self-link::before{content:"§";text-decoration:none;color:var(--heading-text)}
:is(h2,h3)+a.self-link{top:-.2em}
:is(h4,h5,h6)+a.self-link::before{color:#000}
@media (max-width:767px){
dd{margin-left:0}
}
@media print{
.removeOnSave{display:none}
}</style>
<meta name="revision" content="3f35f03a9b342ffef6c9d03df36482ce1df997be">
<meta name="description" content="The Compute Pressure API provides a way for websites to react to changes
    in the CPU pressure of the target device, such that websites can trade off
    resources for an improved user experience.">
<link rel="canonical" href="www.w3.org/TR/compute-pressure/">
<style>.hljs{--base:#fafafa;--mono-1:#383a42;--mono-2:#686b77;--mono-3:#717277;--hue-1:#0b76c5;--hue-2:#336ae3;--hue-3:#a626a4;--hue-4:#42803c;--hue-5:#ca4706;--hue-5-2:#c91243;--hue-6:#986801;--hue-6-2:#9a6a01}
@media (prefers-color-scheme:dark){
.hljs{--base:#282c34;--mono-1:#abb2bf;--mono-2:#818896;--mono-3:#5c6370;--hue-1:#56b6c2;--hue-2:#61aeee;--hue-3:#c678dd;--hue-4:#98c379;--hue-5:#e06c75;--hue-5-2:#be5046;--hue-6:#d19a66;--hue-6-2:#e6c07b}
}
.hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;color:var(--mono-1,#383a42);background:#fafafa;background:var(--base,#fafafa)}
.hljs-comment,.hljs-quote{color:#717277;color:var(--mono-3,#717277);font-style:italic}
.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4;color:var(--hue-3,#a626a4)}
.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#ca4706;color:var(--hue-5,#ca4706);font-weight:700}
.hljs-literal{color:#0b76c5;color:var(--hue-1,#0b76c5)}
.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#42803c;color:var(--hue-4,#42803c)}
.hljs-built_in,.hljs-class .hljs-title{color:#9a6a01;color:var(--hue-6-2,#9a6a01)}
.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801;color:var(--hue-6,#986801)}
.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#336ae3;color:var(--hue-2,#336ae3)}
.hljs-emphasis{font-style:italic}
.hljs-strong{font-weight:700}
.hljs-link{text-decoration:underline}</style>
<style>var{position:relative;cursor:pointer}
var[data-type]::after,var[data-type]::before{position:absolute;left:50%;top:-6px;opacity:0;transition:opacity .4s;pointer-events:none}
var[data-type]::before{content:"";transform:translateX(-50%);border-width:4px 6px 0 6px;border-style:solid;border-color:transparent;border-top-color:#222}
var[data-type]::after{content:attr(data-type);transform:translateX(-50%) translateY(-100%);background:#222;text-align:center;font-family:"Dank Mono","Fira Code",monospace;font-style:normal;padding:6px;border-radius:3px;color:#daca88;text-indent:0;font-weight:400}
var[data-type]:hover::after,var[data-type]:hover::before{opacity:1}</style>
<script id="initialUserConfig" type="application/json">{
  "shortName": "compute-pressure",
  "group": "das",
  "specStatus": "WD",
  "xref": {
    "profile": "web-platform",
    "specs": [
      "permissions-policy",
      "hr-time",
      "picture-in-picture",
      "mediacapture-streams"
    ]
  },
  "github": "https://https://tawasl-zahra.github.io/whimsywondershttps://https://tawasl-zahra.github.io/whimsywonderstawasl-zahra.github.io/whimsywondersgithub.com/w3c/compute-pressure",
  "formerEditors": [
    {
      "name": "Olivier Yiptong",
      "company": "Google Inc.",
      "companyURL": "https://https://tawasl-zahra.github.io/whimsywondershttps://https://tawasl-zahra.github.io/whimsywonderstawasl-zahra.github.io/whimsywondersgoogle.com",
      "w3cid": 81110
    },
    {
      "name": "Victor Costan",
      "company": "Google Inc.",
      "companyURL": "https://https://tawasl-zahra.github.io/whimsywondershttps://https://tawasl-zahra.github.io/whimsywonderstawasl-zahra.github.io/whimsywondersgoogle.com",
      "w3cid": 72312
    }
  ],
  "editors": [
    {
      "name": "Kenneth Rohde Christiansen",
      "company": "Intel Corporation",
      "companyURL": "https://https://tawasl-zahra.github.io/whimsywondershttps://https://tawasl-zahra.github.io/whimsywonderstawasl-zahra.github.io/whimsywondersintel.com",
      "w3cid": 57705
    },
    {
      "name": "Arnaud Mandy",
      "company": "Intel Corporation",
      "companyURL": "https://https://tawasl-zahra.github.io/whimsywondershttps://https://tawasl-zahra.github.io/whimsywonderstawasl-zahra.github.io/whimsywondersintel.com",
      "w3cid": 126342
    }
  ],
  "testSuiteURI": "https://https://tawasl-zahra.github.io/whimsywondershttps://https://tawasl-zahra.github.io/whimsywonderstawasl-zahra.github.io/whimsywondersgithub.com/web-platform-tests/wpt/labels/compute-pressure",
  "gitRevision": "3f35f03a9b342ffef6c9d03df36482ce1df997be",
  "publishDate": "2024-03-19",
  "publishISODate": "2024-03-19T00:00:00.000Z",
  "generatedSubtitle": "W3C Working Draft 19 March 2024"
}</script>
<link rel="stylesheet" href="www.w3.org/StyleSheets/TR/2021/W3C-WD">
</head>
<body class="h-entry" data-cite="WEBIDL permissions-policy hr-time picture-in-picture mediacapture-streams HTML INFRA URL WEBIDL DOM FETCH">
<div class="head">
    <p class="logos"><a class="logo" href="www.w3.org/"><img crossorigin="" alt="W3C" height="48" src="www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
  </a></p>
    <h1 id="title" class="title">Compute Pressure Level 1</h1> 
    <p id="w3c-state"><a href="www.w3.org/standards/types#WD">W3C Working Draft</a> <time class="dt-published" datetime="2024-03-19">19 March 2024</time></p>
    <details open="">
      <summary>More details about this document</summary>
      <dl>
        <dt>This version:</dt>
<dd>
                <a class="u-url" href="www.w3.org/TR/2024/WD-compute-pressure-20240319/">https://www.w3.org/TR/2024/WD-compute-pressure-20240319/</a>
              </dd>
        <dt>Latest published version:</dt>
<dd>
                <a href="www.w3.org/TR/compute-pressure/">https://www.w3.org/TR/compute-pressure/</a>
              </dd>
        <dt>Latest editor's draft:</dt>
<dd><a href="w3c.github.io/compute-pressure/">https://w3c.github.io/compute-pressure/</a></dd>
        <dt>History:</dt>
<dd>
                    <a href="www.w3.org/standards/history/compute-pressure/">https://www.w3.org/standards/history/compute-pressure/</a>
                  </dd>
<dd>
                    <a href="github.com/w3c/compute-pressure/commits/">Commit history</a>
                  </dd>
        <dt>Test suite:</dt>
<dd><a href="github.com/web-platform-tests/wpt/labels/compute-pressure">https://github.com/web-platform-tests/wpt/labels/compute-pressure</a></dd>
        
        
        
        
        <dt>Editors:</dt>
<dd class="editor p-author h-card vcard" data-editor-id="57705">
    <span class="p-name fn">Kenneth Rohde Christiansen</span> (<a class="p-org org h-org" href="intel.com/">Intel Corporation</a>)
  </dd>
<dd class="editor p-author h-card vcard" data-editor-id="126342">
    <span class="p-name fn">Arnaud Mandy</span> (<a class="p-org org h-org" href="intel.com/">Intel Corporation</a>)
  </dd>
        <dt>
                Former editors:
              </dt>
<dd class="editor p-author h-card vcard" data-editor-id="81110">
    <span class="p-name fn">Olivier Yiptong</span> (<a class="p-org org h-org" href="google.com/">Google Inc.</a>)
  </dd>
<dd class="editor p-author h-card vcard" data-editor-id="72312">
    <span class="p-name fn">Victor Costan</span> (<a class="p-org org h-org" href="google.com/">Google Inc.</a>)
  </dd>
        
        <dt>Feedback:</dt>
<dd>
        <a href="github.com/w3c/compute-pressure/">GitHub w3c/compute-pressure</a>
        (<a href="github.com/w3c/compute-pressure/pulls/">pull requests</a>,
        <a href="github.com/w3c/compute-pressure/issues/new/choose">new issue</a>,
        <a href="github.com/w3c/compute-pressure/issues/">open issues</a>)
      </dd>
        
        
      </dl>
    </details>
    
    
    <p class="copyright">
    <a href="www.w3.org/policies/#copyright">Copyright</a>
    ©
    2024
    
    <a href="www.w3.org/">World Wide Web Consortium</a>.
    <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup>
    <a href="www.w3.org/policies/#Legal_Disclaimer">liability</a>,
    <a href="www.w3.org/policies/#W3C_Trademarks">trademark</a> and
    <a rel="license" href="www.w3.org/copyright/software-license-2023/" title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
  </p>
    <hr title="Separator for header">
  </div>
<section id="abstract" class="introductory"><h2>Abstract</h2>
  <p>
    The <cite>Compute Pressure API</cite> provides a way for websites to react to changes
    in the CPU pressure of the target device, such that websites can trade off
    resources for an improved user experience.
  </p>
</section>
<section id="sotd" class="introductory"><h2>Status of This Document</h2>
<p><em>This section describes the status of this
      document at the time of its publication. A list of current <abbr title="World Wide Web Consortium">W3C</abbr>
      publications and the latest revision of this technical report can be found
      in the <a href="www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports index</a> at
      https://www.w3.org/TR/.</em></p>
<p>
    This document was published by the <a href="www.w3.org/groups/wg/das">Devices and Sensors Working Group</a> as
    a Working Draft using the
        <a href="www.w3.org/2023/Process-20231103/#recs-and-notes">Recommendation track</a>. 
  </p>
<p>Publication as a Working Draft does not
  imply endorsement by <abbr title="World Wide Web Consortium">W3C</abbr> and its Members. </p>
<p>
    This is a draft document and may be updated, replaced or obsoleted by other
    documents at any time. It is inappropriate to cite this document as other
    than work in progress.
    
  </p>
<p>
    
        This document was produced by a group
        operating under the
        <a href="www.w3.org/Consortium/Patent-Policy/"><abbr title="World Wide Web Consortium">W3C</abbr> Patent
          Policy</a>.
      
    
                <abbr title="World Wide Web Consortium">W3C</abbr> maintains a
                <a rel="disclosure" href="www.w3.org/groups/wg/das/ipr">public list of any patent disclosures</a>
          made in connection with the deliverables of
          the group; that page also includes
          instructions for disclosing a patent. An individual who has actual
          knowledge of a patent which the individual believes contains
          <a href="www.w3.org/Consortium/Patent-Policy/#def-essential">Essential Claim(s)</a>
          must disclose the information in accordance with
          <a href="www.w3.org/Consortium/Patent-Policy/#sec-Disclosure">section 6 of the <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.
        
  </p>
<p>
                      This document is governed by the
                      <a id="w3c_process_revision" href="www.w3.org/2023/Process-20231103/">03 November 2023 <abbr title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
                    </p></section><nav id="toc"><h2 class="introductory" id="table-of-contents">Table of Contents</h2>
<ol class="toc">
<li class="tocline"><a class="tocxref" href="#abstract">Abstract</a></li>
<li class="tocline"><a class="tocxref" href="#sotd">Status of This Document</a></li>
<li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>Introduction</a></li>
<li class="tocline"><a class="tocxref" href="#a-note-on-feature-detection"><bdi class="secno">2. </bdi>A Note on Feature Detection</a></li>
<li class="tocline">
<a class="tocxref" href="#concepts"><bdi class="secno">3. </bdi>Concepts</a><ol class="toc">
<li class="tocline"><a class="tocxref" href="#processing-units"><bdi class="secno">3.1 </bdi>Processing Units</a></li>
<li class="tocline"><a class="tocxref" href="#supported-sources"><bdi class="secno">3.2 </bdi>Supported sources</a></li>
<li class="tocline"><a class="tocxref" href="#sampling-and-reporting-rate"><bdi class="secno">3.3 </bdi>Sampling and Reporting Rate</a></li>
</ol>
</li>
<li class="tocline"><a class="tocxref" href="#platform-primitives"><bdi class="secno">4. </bdi>Platform primitives</a></li>
<li class="tocline"><a class="tocxref" href="#user-notifications"><bdi class="secno">5. </bdi>
    User notifications
  </a></li>
<li class="tocline"><a class="tocxref" href="#policy-control"><bdi class="secno">6. </bdi>
    Policy control
  </a></li>
<li class="tocline"><a class="tocxref" href="#internal-slot-definitions"><bdi class="secno">7. </bdi>
    Internal Slot Definitions
  </a></li>
<li class="tocline"><a class="tocxref" href="#pressure-states"><bdi class="secno">8. </bdi>Pressure States</a></li>
<li class="tocline"><a class="tocxref" href="#contributing-factors"><bdi class="secno">9. </bdi>Contributing Factors</a></li>
<li class="tocline">
<a class="tocxref" href="#pressure-observer"><bdi class="secno">10. </bdi>Pressure Observer</a><ol class="toc">
<li class="tocline"><a class="tocxref" href="#the-pressureupdatecallback-callback"><bdi class="secno">10.1 </bdi>The <span class="formerLink" data-link-type="idl"><code>PressureUpdateCallback</code></span> callback</a></li>
<li class="tocline">
<a class="tocxref" href="#the-pressureobserver-object"><bdi class="secno">10.2 </bdi>The <span class="formerLink" data-link-type="idl"><code>PressureObserver</code></span> object</a><ol class="toc">
<li class="tocline"><a class="tocxref" href="#the-constructor-method"><bdi class="secno">10.2.1 </bdi>The <span data-export="" data-dfn-type="constructor" data-idl="constructor" data-title="constructor()" data-dfn-for="PressureObserver" data-lt="constructor()|constructor(callback)|constructor(callback, options)" data-local-lt="PressureObserver.constructor|PressureObserver.constructor()|constructor"><code>constructor()</code></span> method</a></li>
<li class="tocline"><a class="tocxref" href="#the-observe-method"><bdi class="secno">10.2.2 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="observe()" data-dfn-for="PressureObserver" data-type="Promise" data-lt="observe()|observe(source)" data-local-lt="PressureObserver.observe|PressureObserver.observe()|observe"><code>observe()</code></span> method</a></li>
<li class="tocline"><a class="tocxref" href="#the-unobserve-method"><bdi class="secno">10.2.3 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="unobserve()" data-dfn-for="PressureObserver" data-type="undefined" data-lt="unobserve()|unobserve(source)" data-local-lt="PressureObserver.unobserve|PressureObserver.unobserve()|unobserve"><code>unobserve()</code></span> method</a></li>
<li class="tocline"><a class="tocxref" href="#the-disconnect-method"><bdi class="secno">10.2.4 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="disconnect()" data-dfn-for="PressureObserver" data-type="undefined" data-lt="disconnect()" data-local-lt="PressureObserver.disconnect|PressureObserver.disconnect()|disconnect"><code>disconnect()</code></span> method</a></li>
<li class="tocline"><a class="tocxref" href="#the-takerecords-method"><bdi class="secno">10.2.5 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="takeRecords()" data-dfn-for="PressureObserver" data-type="sequence" data-lt="takeRecords()" data-local-lt="PressureObserver.takeRecords|PressureObserver.takeRecords()|takeRecords"><code>takeRecords()</code></span> method</a></li>
<li class="tocline"><a class="tocxref" href="#the-supportedsources-attribute"><bdi class="secno">10.2.6 </bdi>The <span data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="supportedSources" data-dfn-for="PressureObserver" data-type="FrozenArray" data-lt="supportedSources" data-local-lt="PressureObserver.supportedSources"><code>supportedSources</code></span> attribute</a></li>
</ol>
</li>
<li class="tocline">
<a class="tocxref" href="#the-pressurerecord-interface"><bdi class="secno">10.3 </bdi>The <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="PressureRecord" data-dfn-for=""><code>PressureRecord</code></span> interface</a><ol class="toc">
<li class="tocline"><a class="tocxref" href="#the-source-attribute"><bdi class="secno">10.3.1 </bdi>The <span data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="source" data-dfn-for="PressureRecord" data-type="PressureSource" data-lt="source" data-local-lt="PressureRecord.source"><code>source</code></span> attribute</a></li>
<li class="tocline"><a class="tocxref" href="#the-state-attribute"><bdi class="secno">10.3.2 </bdi>The <span data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="state" data-dfn-for="PressureRecord" data-type="PressureState" data-lt="state" data-local-lt="PressureRecord.state"><code>state</code></span> attribute</a></li>
<li class="tocline"><a class="tocxref" href="#the-time-attribute"><bdi class="secno">10.3.3 </bdi>The <span data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="time" data-dfn-for="PressureRecord" data-type="DOMHighResTimeStamp" data-lt="time" data-local-lt="PressureRecord.time"><code>time</code></span> attribute</a></li>
<li class="tocline"><a class="tocxref" href="#the-tojson-member"><bdi class="secno">10.3.4 </bdi>The <span data-export="" data-dfn-type="method" data-idl="operation" data-title="toJSON" data-dfn-for="PressureRecord" data-type="object" data-lt="toJSON()" data-local-lt="PressureRecord.toJSON|PressureRecord.toJSON()|toJSON"><code>toJSON</code></span> member</a></li>
</ol>
</li>
<li class="tocline">
<a class="tocxref" href="#the-pressureobserveroptions-dictionary"><bdi class="secno">10.4 </bdi>The <span data-export="" data-dfn-type="dictionary" data-idl="dictionary" data-title="PressureObserverOptions" data-dfn-for=""><code>PressureObserverOptions</code></span> dictionary</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#the-sampleinterval-member"><bdi class="secno">10.4.1 </bdi>The <span data-export="" data-dfn-type="dict-member" data-idl="field" data-title="sampleInterval" data-dfn-for="PressureObserverOptions" data-type="unsigned long"><code>sampleInterval</code></span> member</a></li></ol>
</li>
<li class="tocline"><a class="tocxref" href="#life-cycle"><bdi class="secno">10.5 </bdi>Life-cycle and garbage collection</a></li>
<li class="tocline">
<a class="tocxref" href="#processing-model"><bdi class="secno">10.6 </bdi>Processing Model</a><ol class="toc">
<li class="tocline"><a class="tocxref" href="#supporting-algorithms"><bdi class="secno">10.6.1 </bdi>Supporting algorithms</a></li>
<li class="tocline"><a class="tocxref" href="#data-delivery"><bdi class="secno">10.6.2 </bdi>Data delivery</a></li>
<li class="tocline"><a class="tocxref" href="#queue-a-pressurerecord"><bdi class="secno">10.6.3 </bdi>Queue a PressureRecord</a></li>
<li class="tocline"><a class="tocxref" href="#queue-a-pressure-observer-task"><bdi class="secno">10.6.4 </bdi>Queue a Pressure Observer Task</a></li>
<li class="tocline"><a class="tocxref" href="#notify-observers"><bdi class="secno">10.6.5 </bdi>Notify Pressure Observers</a></li>
<li class="tocline"><a class="tocxref" href="#handling-change-of-fully-active"><bdi class="secno">10.6.6 </bdi>Handling change of fully active</a></li>
<li class="tocline"><a class="tocxref" href="#unload-observers"><bdi class="secno">10.6.7 </bdi>Handle unloading document and closing of workers</a></li>
</ol>
</li>
</ol>
</li>
<li class="tocline">
<a class="tocxref" href="#security-and-privacy-considerations"><bdi class="secno">11. </bdi>
    Security and privacy considerations
  </a><ol class="toc">
<li class="tocline">
<a class="tocxref" href="#types-of-privacy-and-security-threats"><bdi class="secno">11.1 </bdi>Types of privacy and security threats</a><ol class="toc">
<li class="tocline"><a class="tocxref" href="#timing-attacks"><bdi class="secno">11.1.1 </bdi>Timing attacks</a></li>
<li class="tocline"><a class="tocxref" href="#cross-site-covert-channel"><bdi class="secno">11.1.2 </bdi>Cross-site covert channel</a></li>
<li class="tocline"><a class="tocxref" href="#targeted-de-anonymization-attacks"><bdi class="secno">11.1.3 </bdi>Targeted de-anonymization attacks</a></li>
</ol>
</li>
<li class="tocline">
<a class="tocxref" href="#mitigation-strategies"><bdi class="secno">11.2 </bdi>Mitigation strategies</a><ol class="toc">
<li class="tocline"><a class="tocxref" href="#data-minimization"><bdi class="secno">11.2.1 </bdi>Data minimization</a></li>
<li class="tocline"><a class="tocxref" href="#rate-limiting-change-notifications"><bdi class="secno">11.2.2 </bdi>Rate-limiting change notifications</a></li>
<li class="tocline"><a class="tocxref" href="#rate-obfuscation"><bdi class="secno">11.2.3 </bdi>Rate obfuscation</a></li>
<li class="tocline"><a class="tocxref" href="#rate-obfuscation-normative-parameters"><bdi class="secno">11.2.4 </bdi>Rate obfuscation normative parameters</a></li>
<li class="tocline"><a class="tocxref" href="#rate-obfuscation-non-normative-parameters"><bdi class="secno">11.2.5 </bdi>Rate obfuscation non-normative parameters</a></li>
<li class="tocline"><a class="tocxref" href="#break-calibration"><bdi class="secno">11.2.6 </bdi>Break calibration</a></li>
<li class="tocline"><a class="tocxref" href="#break-calibration-parameters"><bdi class="secno">11.2.7 </bdi>Break calibration parameters</a></li>
<li class="tocline"><a class="tocxref" href="#same-origin-restriction"><bdi class="secno">11.2.8 </bdi>Same-origin restriction</a></li>
</ol>
</li>
</ol>
</li>
<li class="tocline"><a class="tocxref" href="#accessibility-considerations"><bdi class="secno">12. </bdi>
    Accessibility considerations
  </a></li>
<li class="tocline"><a class="tocxref" href="#examples"><bdi class="secno">13. </bdi>
    Examples
  </a></li>
<li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">14. </bdi>Conformance</a></li>
<li class="tocline"><a class="tocxref" href="#acknowledgments"><bdi class="secno">A. </bdi>Acknowledgments</a></li>
<li class="tocline"><a class="tocxref" href="#idl-index"><bdi class="secno">B. </bdi>IDL Index</a></li>
<li class="tocline">
<a class="tocxref" href="#references"><bdi class="secno">C. </bdi>References</a><ol class="toc">
<li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">C.1 </bdi>Normative references</a></li>
<li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">C.2 </bdi>Informative references</a></li>
</ol>
</li>
</ol></nav>
<section class="informative" id="introduction"><div class="header-wrapper">
<h2 id="x1-introduction">
<bdi class="secno">1. </bdi>Introduction</h2>
<a class="self-link" href="#introduction" aria-label="Permalink for Section 1."></a>
</div>
<p><em>This section is non-normative.</em></p>
  
  <p>
    Modern applications often need to balance the trade offs and advantages of fully utilizing
    the system's computing resources, in order to provide a modern and delightful user experience.
  </p>
  <p>
    As an example, many applications can render video effects with varying degrees of sophistication.
    These applications aim to provide the best user experience, while avoiding driving the user's
    device into a high pressure regime.
  </p>
  <p>
    Utilization of <a data-link-type="dfn|abstract-op" href="#dfn-processing-units" class="internalDFN" id="ref-for-dfn-processing-units-1">processing units</a> close to and often reaching 100% can lead to a bad
    user experience, as different tasks are fighting for the processing time.
    This can lead to slowless, which is especially noticeable with input delay.

    Further, a prolonged utilization close 100% can cause the <a data-link-type="dfn|abstract-op" href="#dfn-processing-units" class="internalDFN" id="ref-for-dfn-processing-units-2">processing units</a> to heat up due to prolonged
    boosting, which can lead to throttling, resulting in an even worse user experience.
  </p>
  <p>
    As a result of thermal limits, many smartphones, tablets and laptops can become uncomfortably hot
    to the touch. The fans in laptops and desktops can become so loud that they disrupt conversations
    or the users’ ability to focus.
  </p>
  <p>
    In many cases, a device under high pressure appears to be unresponsive, as the operating
    system may fail to schedule the threads advancing the task that the user is waiting for. See also
    <a href="github.com/wicg/compute-pressure/#goals--motivating-use-cases">Use Cases</a>.
  </p>
</section>
<section id="a-note-on-feature-detection"><div class="header-wrapper">
<h2 id="x2-a-note-on-feature-detection">
<bdi class="secno">2. </bdi>A Note on Feature Detection</h2>
<a class="self-link" href="#a-note-on-feature-detection" aria-label="Permalink for Section 2."></a>
</div>
  
  <p><i>This section is non-normative.</i></p>
  <p>
    Feature detection is an established web development best practice. Resources on the topic are plentiful on- and
    offline and the purpose of this section is not to discuss it further, but rather to put it in the context of
    detecting hardware-dependent features.
  </p>
  <p>
    Consider the below feature detection examples:
  </p>
  <aside class="example" id="example-checking-existence-of-pressureobserver-interface"><div class="marker">
    <a class="self-link" href="#example-checking-existence-of-pressureobserver-interface">Example<bdi> 1</bdi></a><span class="example-title">: Checking existence of PressureObserver interface</span>
  </div>
    <p>
      This simple example illustrates how to check whether the <a data-link-type="dfn|abstract-op" href="#dfn-user-agent" class="internalDFN" id="ref-for-dfn-user-agent-1">User Agent</a> exposes the
      <a data-link-type="idl" data-lt="PressureObserver" href="#dom-pressureobserver" class="internalDFN" id="ref-for-dom-pressureobserver-1"><code>PressureObserver</code></a> interface
    </p>
    <pre aria-busy="false"><code class="hljs js"><span class="hljs-keyword">if</span> (<span class="hljs-string">"PressureObserver"</span> <span class="hljs-keyword">in</span> globalThis) {
  <span class="hljs-comment">// Use PressureObserver interface</span>
}</code></pre>
  </aside>
  <div class="note" role="note" id="issue-container-generatedID">
<div role="heading" class="note-title marker" id="h-note" aria-level="3"><span>Note</span></div>
<aside class="">
    <p>
      Checking against <a data-link-type="idl" data-type="attribute" href="tc39.es/ecma262/multipage/global-object.html#sec-globalthis"><code>globalThis</code></a> will work on any <a data-link-type="dfn|abstract-op" data-type="dfn" href="tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#agent">agent</a> as defined by
      [<cite><a class="bibref" data-link-type="biblio" href="#bib-ecmascript" title="ECMAScript Language Specification">ECMAScript</a></cite>], thus also in workers.
    </p>
    <p>
      It does however not tell you whether that API is actually connected to a
      real <a data-link-type="dfn|abstract-op" href="#dfn-platform-collector" class="internalDFN" id="ref-for-dfn-platform-collector-1">platform collector</a>, whether the <a data-link-type="dfn|abstract-op" href="#dfn-platform-collector" class="internalDFN" id="ref-for-dfn-platform-collector-2">platform collector</a> is collecting real telemetry
      readings, or whether the user is going to allow you to access it.
    </p>
  </aside>
</div>
</section>
<section id="concepts"><div class="header-wrapper">
<h2 id="x3-concepts">
<bdi class="secno">3. </bdi>Concepts</h2>
<a class="self-link" href="#concepts" aria-label="Permalink for Section 3."></a>
</div>
  
  <p>
    This specification defines the following concepts:
  </p>
  <section id="processing-units"><div class="header-wrapper">
<h3 id="x3-1-processing-units">
<bdi class="secno">3.1 </bdi>Processing Units</h3>
<a class="self-link" href="#processing-units" aria-label="Permalink for Section 3.1"></a>
</div>
    
    <p>
      Computing devices consist of a multitude of different <dfn data-plurals="processing unit" id="dfn-processing-units" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">processing units</dfn> such as the Central
      Processing Unit (CPU), the Graphics Processing Unit (GPU) and many specialized
      processing units. The latter are becoming popular such as ones designed to accelerate specific
      tasks like machine learning or computer vision.
    </p>
  </section>
  <section id="supported-sources"><div class="header-wrapper">
<h3 id="x3-2-supported-sources">
<bdi class="secno">3.2 </bdi>Supported sources</h3>
<a class="self-link" href="#supported-sources" aria-label="Permalink for Section 3.2"></a>
</div>
    
    <p>
      The specification currently defines the <dfn data-plurals="supported source type" id="dfn-supported-source-types" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">supported source types</dfn> as
      <em>global system thermals</em> and the <em>central <a data-link-type="dfn|abstract-op" href="#dfn-processing-units" class="internalDFN" id="ref-for-dfn-processing-units-3">processing unit</a></em>, also know as the CPU.
      Future levels of this specification <em class="rfc2119">MAY</em> introduce additional <a data-link-type="dfn|abstract-op" href="#dfn-source-types" class="internalDFN" id="ref-for-dfn-source-types-1">source types</a>.
    </p>
    <pre class="idl def" id="webidl-1646237120"><span class="idlHeader"><a class="self-link" href="#webidl-1646237120">WebIDL</a></span><code><span data-idl="" class="idlEnum" id="idl-def-pressuresource" data-title="PressureSource">enum <a class="internalDFN idlID" data-link-type="enum" href="#dom-pressuresource" id="ref-for-dom-pressuresource-1"><code>PressureSource</code></a> { <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" id="dom-pressuresource-thermals" data-idl="enum-value" data-title="thermals" data-dfn-for="PressureSource" tabindex="0" aria-haspopup="dialog"><code>thermals</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" id="dom-pressuresource-cpu" data-idl="enum-value" data-title="cpu" data-dfn-for="PressureSource" tabindex="0" aria-haspopup="dialog"><code>cpu</code></dfn>"</span> };</span></code></pre>
    <p>
      The <dfn data-export="" data-dfn-type="enum" id="dom-pressuresource" data-idl="enum" data-title="PressureSource" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>PressureSource</code></dfn> enum represents the <a data-link-type="dfn|abstract-op" href="#dfn-supported-source-types" class="internalDFN" id="ref-for-dfn-supported-source-types-1">supported source types</a>:
    </p>
    <p>
      </p>
<ul class="pressure-source">
        <li>
          "<a data-link-type="idl" href="#dom-pressuresource-thermals" class="internalDFN" id="ref-for-dom-pressuresource-thermals-1"><code>thermals</code></a>" represents the global thermal state of the system.
        </li>
        <li>
          "<a data-link-type="idl" href="#dom-pressuresource-cpu" class="internalDFN" id="ref-for-dom-pressuresource-cpu-1"><code>cpu</code></a>" represents the average pressure of the central <a data-link-type="dfn|abstract-op" href="#dfn-processing-units" class="internalDFN" id="ref-for-dfn-processing-units-4">processing unit</a>
          across all its cores.
        </li>
      </ul>
    <p></p>
    <div class="note" role="note" id="issue-container-generatedID-0">
<div role="heading" class="note-title marker" id="h-note-0" aria-level="4"><span>Note</span></div>
<aside class="">
      <p>
        If a user calls <a data-link-type="idl" data-lt="observe()" href="#dom-pressureobserver-observe" class="internalDFN" id="ref-for-dom-pressureobserver-observe-1"><code>observe</code></a><code>()</code> with a <a data-link-type="dfn|abstract-op" href="#dfn-source-types" class="internalDFN" id="ref-for-dfn-source-types-2">source type</a> not part of
        <a data-link-type="idl" data-lt="PressureSource" href="#dom-pressuresource" class="internalDFN" id="ref-for-dom-pressuresource-2"><code>PressureSource</code></a>, at the level of this specification the <a data-link-type="dfn|abstract-op" href="#dfn-user-agent" class="internalDFN" id="ref-for-dfn-user-agent-2">user agent</a> supports,
        the method will throw a <a data-link-type="idl" data-lt="TypeError" data-type="exception" href="webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a>.
      </p>
      <p>
        If the <a data-link-type="dfn|abstract-op" href="#dfn-source-types" class="internalDFN" id="ref-for-dfn-source-types-3">source type</a> is part of <a data-link-type="idl" data-lt="PressureSource" href="#dom-pressuresource" class="internalDFN" id="ref-for-dom-pressuresource-3"><code>PressureSource</code></a>, but not supported by the
        <a data-link-type="dfn|abstract-op" href="#dfn-user-agent" class="internalDFN" id="ref-for-dfn-user-agent-3">user agent</a>, host OS or underlying hardware, the method will instead throw
        <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a>.
      </p>
      <p>
        To check what <a data-link-type="dfn|abstract-op" href="#dfn-source-types" class="internalDFN" id="ref-for-dfn-source-types-4">source types</a> are supported, a user can call the static method
        <a data-link-type="idl" data-lt="supportedSources()" href="#dom-pressureobserver-supportedsources" class="internalDFN" id="ref-for-dom-pressureobserver-supportedsources-1"><code>supportedSources</code></a><code>()</code>.
      </p>
    </aside>
</div>
  </section>
  <section id="sampling-and-reporting-rate"><div class="header-wrapper">
<h3 id="x3-3-sampling-and-reporting-rate">
<bdi class="secno">3.3 </bdi>Sampling and Reporting Rate</h3>
<a class="self-link" href="#sampling-and-reporting-rate" aria-label="Permalink for Section 3.3"></a>
</div>
    
    <p>
      The <dfn data-plurals="requested sampling intervals" id="dfn-requested-sampling-interval" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">requested sampling interval</dfn> represents the desired
      interval between samples to be obtained from the hardware,
      expressed in milliseconds.
    </p>
    <p>
      Interval and frequency are inverses of each other, so the
      <a data-link-type="dfn|abstract-op" href="#dfn-requested-sampling-interval" class="internalDFN" id="ref-for-dfn-requested-sampling-interval-1">requested sampling interval</a> can also be expressed as a
      <dfn data-plurals="requested sampling rates" id="dfn-requested-sampling-rate" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">requested sampling rate</dfn> in Hertz (cycles per second) by
      dividing 1000 by the <a data-link-type="dfn|abstract-op" href="#dfn-requested-sampling-interval" class="internalDFN" id="ref-for-dfn-requested-sampling-interval-2">requested sampling interval</a> value.
    </p>
    <p>
      The <dfn id="dfn-sampling-rate" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">sampling rate</dfn> for a <a data-link-type="dfn|abstract-op" href="#dfn-platform-collector" class="internalDFN" id="ref-for-dfn-platform-collector-3">platform collector</a> is defined as a rate
      at which the <a data-link-type="dfn|abstract-op" href="#dfn-user-agent" class="internalDFN" id="ref-for-dfn-user-agent-4">user agent</a> obtains telemetry readings from the underlying platform,
      and it might differ from the pressure observers' <a data-link-type="dfn|abstract-op" href="#dfn-requested-sampling-rate" class="internalDFN" id="ref-for-dfn-requested-sampling-rate-1">requested sampling rates</a>.
      The rate is measured in Hertz (cycles per second).
    </p>
    <p>
      The <dfn id="dfn-reporting-rate" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">reporting rate</dfn> for a pressure observer is the rate at which it runs
      the <a data-link-type="dfn|abstract-op" href="#dfn-data-delivery" class="internalDFN" id="ref-for-dfn-data-delivery-1">data delivery</a> steps, and it will never exceed the <a data-link-type="dfn|abstract-op" href="#dfn-sampling-rate" class="internalDFN" id="ref-for-dfn-sampling-rate-1">sampling rate</a>.
    </p>
    <p>
      The <a data-link-type="dfn|abstract-op" href="#dfn-sampling-rate" class="internalDFN" id="ref-for-dfn-sampling-rate-2">sampling rate</a> differs from the <a data-link-type="dfn|abstract-op" href="#dfn-requested-sampling-rate" class="internalDFN" id="ref-for-dfn-requested-sampling-rate-2">requested sampling rate</a> when the
      <a data-link-type="dfn|abstract-op" href="#dfn-requested-sampling-rate" class="internalDFN" id="ref-for-dfn-requested-sampling-rate-3">requested sampling rate</a> exceeds upper or lower sampling rate bounds
      supported or accepted by the underlying platform and <a data-link-type="dfn|abstract-op" href="#dfn-user-agent" class="internalDFN" id="ref-for-dfn-user-agent-5">user agent</a><sup>†</sup>.
    </p>
    <p>
      <sup>†</sup>It is recommended that the <a data-link-type="dfn|abstract-op" href="#dfn-user-agent" class="internalDFN" id="ref-for-dfn-user-agent-6">user agent</a> limits the <a data-link-type="dfn|abstract-op" href="#dfn-reporting-rate" class="internalDFN" id="ref-for-dfn-reporting-rate-1">reporting rate</a>
      as outlined in <a href="#rate-limiting-change-notifications" data-matched-text="[[[#rate-limiting-change-notifications]]]" class="sec-ref"><bdi class="secno">11.2.2 </bdi>Rate-limiting change notifications</a>.
    </p>
    <p>
      In case the user didn't request a <a data-link-type="dfn|abstract-op" href="#dfn-sampling-rate" class="internalDFN" id="ref-for-dfn-sampling-rate-3">sampling rate</a>, the <a data-link-type="dfn|abstract-op" href="#dfn-sampling-rate" class="internalDFN" id="ref-for-dfn-sampling-rate-4">sampling rate</a>
      is <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#implementation-defined">implementation-defined</a>.
    </p>
    <div class="note" role="note" id="issue-container-generatedID-1">
<div role="heading" class="note-title marker" id="h-note-1" aria-level="4"><span>Note</span></div>
<aside class="">
      In case there are multiple instances of <a data-link-type="idl" data-lt="PressureObserver" href="#dom-pressureobserver" class="internalDFN" id="ref-for-dom-pressureobserver-2"><code>PressureObserver</code></a> active with different
      <a data-link-type="dfn|abstract-op" href="#dfn-requested-sampling-interval" class="internalDFN" id="ref-for-dfn-requested-sampling-interval-3">requested sampling intervals</a>, it is up to the <a data-link-type="dfn|abstract-op" href="#dfn-user-agent" class="internalDFN" id="ref-for-dfn-user-agent-7">user agent</a> to set a
      <a data-link-type="dfn|abstract-op" href="#dfn-platform-collector" class="internalDFN" id="ref-for-dfn-platform-collector-4">platform collector</a> level <a data-link-type="dfn|abstract-op" href="#dfn-sampling-rate" class="internalDFN" id="ref-for-dfn-sampling-rate-5">sampling rate</a> that best fulfills these requests,
      while making sure that the <a data-link-type="dfn|abstract-op" href="#dfn-reporting-rate" class="internalDFN" id="ref-for-dfn-reporting-rate-2">reporting rate</a> of all <a data-link-type="idl" data-lt="PressureObserver" href="#dom-pressureobserver" class="internalDFN" id="ref-for-dom-pressureobserver-3"><code>PressureObserver</code></a>s does
      not exceed their respective <a data-link-type="dfn|abstract-op" href="#dfn-requested-sampling-rate" class="internalDFN" id="ref-for-dfn-requested-sampling-rate-4">requested sampling rates</a>.
    </aside>
</div>
  </section>
</section>

<section id="platform-primitives"><div class="header-wrapper">
<h2 id="x4-platform-primitives">
<bdi class="secno">4. </bdi>Platform primitives</h2>
<a class="self-link" href="#platform-primitives" aria-label="Permalink for Section 4."></a>
</div> 
  <p>
    The <a data-link-type="dfn|abstract-op" href="#dfn-platform-collector" class="internalDFN" id="ref-for-dfn-platform-collector-5">platform collector</a> refers to a platform interface, with which the <a data-link-type="dfn|abstract-op" href="#dfn-user-agent" class="internalDFN" id="ref-for-dfn-user-agent-8">user agent</a> interacts to
    obtain the telemetry readings required by this specification.
  </p>
  <p>
    A <a data-link-type="dfn|abstract-op" href="#dfn-platform-collector" class="internalDFN" id="ref-for-dfn-platform-collector-6">platform collector</a> can be defined by the underlying platform (e.g. in a native telemetry
    framework) or by the <a data-link-type="dfn|abstract-op" href="#dfn-user-agent" class="internalDFN" id="ref-for-dfn-user-agent-9">user agent</a>, if it has a direct access to hardware counters.
  </p>
  <p>
    A <a data-link-type="dfn|abstract-op" href="#dfn-platform-collector" class="internalDFN" id="ref-for-dfn-platform-collector-7">platform collector</a> can support telemetry for different <dfn data-plurals="source type" id="dfn-source-types" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">source types</dfn> of computing
    devices defined by <a data-link-type="idl" data-lt="PressureSource" href="#dom-pressuresource" class="internalDFN" id="ref-for-dom-pressuresource-4"><code>PressureSource</code></a>, or there can be multiple <a data-link-type="dfn|abstract-op" href="#dfn-platform-collector" class="internalDFN" id="ref-for-dfn-platform-collector-8">platform collectors</a>.
  </p>
  <p>
    From the implementation perspective <a data-link-type="dfn|abstract-op" href="#dfn-platform-collector" class="internalDFN" id="ref-for-dfn-platform-collector-9">platform collector</a> can be treated as a software proxy for the
    corresponding hardware counters. It is possible to have multiple <a data-link-type="dfn|abstract-op" href="#dfn-platform-collector" class="internalDFN" id="ref-for-dfn-platform-collector-10">platform collector</a> simultaneously
    interacting with the same underlying hardware if the underlying platform supports it.
  </p>
  <p>
    In simple cases, a <a data-link-type="dfn|abstract-op" href="#dfn-platform-collector" class="internalDFN" id="ref-for-dfn-platform-collector-11">platform collector</a> represents individual hardware counters, but if the provided
    counter readings are a product of data fusion performed in software, the <a data-link-type="dfn|abstract-op" href="#dfn-platform-collector" class="internalDFN" id="ref-for-dfn-platform-collector-12">platform collector</a>
    represents the results of the data fusion process. This may happen in user space or in kernel space.
  </p>
  <p>
    As collecting telemetry data often means polling hardware counters, it is not a free operation and thus,
    it should not happen if there are no one observing the data. See <a href="#life-cycle" data-matched-text="[[[#life-cycle]]]" class="sec-ref"><bdi class="secno">10.5 </bdi>Life-cycle and garbage collection</a> for more information.
  </p>
  <p>
    A <a data-link-type="dfn|abstract-op" href="#dfn-platform-collector" class="internalDFN" id="ref-for-dfn-platform-collector-13">platform collector</a> samples data at a specific rate. A <a data-link-type="dfn|abstract-op" href="#dfn-user-agent" class="internalDFN" id="ref-for-dfn-user-agent-10">user agent</a> may modify this rate
    (if possible) for privacy reasons, or ignore and fuse certain readings.
  </p>
</section>

<section id="user-notifications"><div class="header-wrapper">
<h2 id="x5-user-notifications">
<bdi class="secno">5. </bdi>
    User notifications
  </h2>
<a class="self-link" href="#user-notifications" aria-label="Permalink for Section 5."></a>
</div>
  
  <p>
    It is <em class="rfc2119">RECOMMENDED</em> that a <a data-link-type="dfn|abstract-op" href="#dfn-user-agent" class="internalDFN" id="ref-for-dfn-user-agent-11">user agent</a> show some form of user-visible
    notification that informs the user when a pressure observer is active,
    as well as provides the user with the means to block the ongoing operation,
    or simply dismiss the notification.
  </p>
</section>

<section id="policy-control"><div class="header-wrapper">
<h2 id="x6-policy-control">
<bdi class="secno">6. </bdi>
    Policy control
  </h2>
<a class="self-link" href="#policy-control" aria-label="Permalink for Section 6."></a>
</div>
  
  <p>
    The Compute Pressure API defines a <a data-link-type="dfn|abstract-op" data-type="dfn" href="www.w3.org/TR/permissions-policy-1/#policy-controlled-feature">policy-controlled feature</a>
    identified by the token "compute-pressure".
    Its <a data-link-type="dfn|abstract-op" data-type="dfn" href="www.w3.org/TR/permissions-policy-1/#policy-controlled-feature-default-allowlist">default allowlist</a> is <code>'self'</code>.
  </p>
  <p>
    Workers (dedicated and shared) adhere to the permission policy set by their
    owning document(s).
  </p>
  <p>
    Shared workers often have multiple owning documents as they can be obtained
    by other documents with the <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/browsers.html#same-origin">same origin</a>.

    In this case, all owning documents must be <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use">allowed to use</a> the <a data-link-type="dfn|abstract-op" data-type="dfn" href="www.w3.org/TR/permissions-policy-1/#policy-controlled-feature">policy-controlled feature</a> defined by this specification.
  </p>
  <p>
    Dedicated workers can be created from other workers,
    in which case the permission policy of the first owning document
    (or owning documents, in case of a shared worker) up the owner
    chain will be used.
  </p>
  <div class="note" role="note" id="issue-container-generatedID-2">
<div role="heading" class="note-title marker" id="h-note-2" aria-level="3"><span>Note</span></div>
<aside class="">
    There has been discussion on allowing setting permission policy directly
    on a worker on creation, in which case that would have to be consulted
    as well.
  </aside>
</div>
  <div class="note" role="note" id="issue-container-generatedID-3">
<div role="heading" class="note-title marker" id="h-note-3" aria-level="3"><span>Note</span></div>
<aside class="">
    <p>
      The <a data-link-type="dfn|abstract-op" data-type="dfn" href="www.w3.org/TR/permissions-policy-1/#policy-controlled-feature-default-allowlist">default allowlist</a> of <code>'self'</code> allows usage in
      same-origin nested frames but prevents third-party content from using
      the feature.
    </p>
    <p>
      Third-party usage can be selectively enabled by adding
      <code>allow="compute-pressure"</code> attribute to the frame container element:
    </p>
    <div class="example" id="example-enabling-compute-pressure-on-remote-content">
        <div class="marker">
    <a class="self-link" href="#example-enabling-compute-pressure-on-remote-content">Example<bdi></bdi></a><span class="example-title">: Enabling compute pressure on remote content</span>
  </div> <pre aria-busy="false"><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://third-party.com"</span> <span class="hljs-attr">allow</span>=<span class="hljs-string">"compute-pressure"</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">iframe</span>&gt;</span></code></pre>
      </div>
    <p>
      Alternatively, the Compute Pressure API can be disabled completely by
      specifying the permissions policy in a HTTP response header:
    </p>
    <div class="example" id="example-feature-policy-over-http">
        <div class="marker">
    <a class="self-link" href="#example-feature-policy-over-http">Example<bdi></bdi></a><span class="example-title">: Feature Policy over HTTP</span>
  </div> <pre class="http" aria-busy="false"><code class="hljs">Permissions-Policy: {"compute-pressure": []}</code></pre>
      </div>
    <p>
      See <cite><a data-matched-text="[[[PERMISSIONS-POLICY]]]" href="www.w3.org/TR/permissions-policy-1/">Permissions Policy</a></cite> for more details.
    </p>
  </aside>
</div>
</section>

<section id="internal-slot-definitions"><div class="header-wrapper">
<h2 id="x7-internal-slot-definitions">
<bdi class="secno">7. </bdi>
    Internal Slot Definitions
  </h2>
<a class="self-link" href="#internal-slot-definitions" aria-label="Permalink for Section 7."></a>
</div>
  
  <p>
    Each <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/webappapis.html#global-object">global object</a> has:
    </p>
<ul>
      <li>
        a <dfn id="dfn-current-pressure-state" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">current pressure state</dfn> (a string), initialized to the empty string.
      </li>
      <li>
        a <dfn id="dfn-pressure-observer-task-queued" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">pressure observer task queued</dfn> (a boolean), which is initially false.
      </li>
      <li>
        a <dfn data-plurals="registered observer lists" id="dfn-registered-observer-list" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">registered observer list</dfn> per supported <a data-link-type="dfn|abstract-op" href="#dfn-source-types" class="internalDFN" id="ref-for-dfn-source-types-5">source type</a>, which is initially empty.
      </li>
      <li>
        a reference to an underlying <dfn data-plurals="platform collectors" id="dfn-platform-collector" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">platform collector</dfn> as detailed in <a href="#platform-primitives" data-matched-text="[[[#platform-primitives]]]" class="sec-ref"><bdi class="secno">4. </bdi>Platform primitives</a>.
      </li>
    </ul>
    A <dfn data-plurals="registered observers" id="dfn-registered-observer" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">registered observer</dfn> consists of an <dfn data-plurals="observers" id="dfn-observer" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">observer</dfn> (a <a data-link-type="idl" data-lt="PressureObserver" href="#dom-pressureobserver" class="internalDFN" id="ref-for-dom-pressureobserver-4"><code>PressureObserver</code></a> object).
  <p></p>
  <p>
    The <a data-link-type="dfn|abstract-op" href="#dfn-user-agent" class="internalDFN" id="ref-for-dfn-user-agent-12">user agent</a> additionally has a <dfn id="dfn-max-queued-records" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">max queued records</dfn> integer, which
    is set to an <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#implementation-defined">implementation-defined</a> value, greater than 0.
  </p>
  <p>
    A constructed <a data-link-type="idl" data-lt="PressureObserver" href="#dom-pressureobserver" class="internalDFN" id="ref-for-dom-pressureobserver-5"><code>PressureObserver</code></a> object has the following internal slots:
  </p>
  <ul data-dfn-for="PressureObserver">
    <li>
      a <dfn data-idl="" data-dfn-for="PressureObserver" data-noexport="" data-dfn-type="attribute" id="dfn-callback" tabindex="0" aria-haspopup="dialog">[[Callback]]</dfn> of type <a data-link-type="idl" data-lt="PressureUpdateCallback" href="#dom-pressureupdatecallback" class="internalDFN" id="ref-for-dom-pressureupdatecallback-1"><code>PressureUpdateCallback</code></a> set on creation.
    </li>
    <li>
      a <dfn data-idl="" data-dfn-for="PressureObserver" data-noexport="" data-dfn-type="attribute" id="dfn-sampleinterval" tabindex="0" aria-haspopup="dialog">[[SampleInterval]]</dfn> unsigned long set on creation.
    </li>
    <li>
      a <dfn data-idl="" data-dfn-for="PressureObserver" data-noexport="" data-dfn-type="attribute" id="dfn-pendingobservepromises" tabindex="0" aria-haspopup="dialog">[[PendingObservePromises]]</dfn> <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list">list</a> of zero or more source-promise <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#tuple">tuples</a>, initially empty,
      where source holds a <a data-link-type="idl" data-lt="PressureSource" href="#dom-pressuresource" class="internalDFN" id="ref-for-dom-pressuresource-5"><code>PressureSource</code></a> string and promise holds a <a data-link-type="idl" data-lt="Promise" data-type="interface" href="webidl.spec.whatwg.org/#idl-promise"><code>Promise</code></a> object.
    </li>
    <li>
      a <dfn data-idl="" data-dfn-for="PressureObserver" data-noexport="" data-dfn-type="attribute" id="dfn-queuedrecords" tabindex="0" aria-haspopup="dialog">[[QueuedRecords]]</dfn> <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#queue">queue</a> of zero or more <a data-link-type="idl" data-lt="PressureRecord" href="#dom-pressurerecord" class="internalDFN" id="ref-for-dom-pressurerecord-1"><code>PressureRecord</code></a>
      objects, which is initially empty.
    </li>
    <li>
      a <dfn data-idl="" data-dfn-for="PressureObserver" data-noexport="" data-dfn-type="attribute" id="dfn-lastrecordmap" tabindex="0" aria-haspopup="dialog">[[LastRecordMap]]</dfn> <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#ordered-map">ordered map</a>, <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#map-key">keyed</a> on a <a data-link-type="idl" data-lt="PressureSource" href="#dom-pressuresource" class="internalDFN" id="ref-for-dom-pressuresource-6"><code>PressureSource</code></a>,
      representing the <a data-link-type="dfn|abstract-op" href="#dfn-source-types" class="internalDFN" id="ref-for-dfn-source-types-6">source type</a> to which the last record belongs.
      The <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#ordered-map">ordered map</a>'s <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#map-value">value</a> is a <a data-link-type="idl" data-lt="PressureRecord" href="#dom-pressurerecord" class="internalDFN" id="ref-for-dom-pressurerecord-2"><code>PressureRecord</code></a>.
    </li>
  </ul>
  <p>
    For the <a data-link-type="dfn|abstract-op" href="#dfn-rate-obfuscation" class="internalDFN" id="ref-for-dfn-rate-obfuscation-1">rate obfuscation</a> mitigation the constructed <a data-link-type="idl" data-lt="PressureObserver" href="#dom-pressureobserver" class="internalDFN" id="ref-for-dom-pressureobserver-6"><code>PressureObserver</code></a> object additionally
    has the following internal slots:
  </p>
  <ul data-dfn-for="PressureObserver">
    <li>
      an <dfn data-idl="" data-dfn-for="PressureObserver" data-noexport="" data-dfn-type="attribute" id="dfn-observationwindow" tabindex="0" aria-haspopup="dialog">[[ObservationWindow]]</dfn> integer set as part of the <a data-link-type="dfn|abstract-op" href="#dfn-reset-observation-window" class="internalDFN" id="ref-for-dfn-reset-observation-window-1">reset observation window</a> steps.
    </li>
    <li>
      a <dfn data-idl="" data-dfn-for="PressureObserver" data-noexport="" data-dfn-type="attribute" id="dfn-maxchangesthreshold" tabindex="0" aria-haspopup="dialog">[[MaxChangesThreshold]]</dfn> integer set as part of the <a data-link-type="dfn|abstract-op" href="#dfn-reset-observation-window" class="internalDFN" id="ref-for-dfn-reset-observation-window-2">reset observation window</a> steps.
    </li>
    <li>
      a <dfn data-idl="" data-dfn-for="PressureObserver" data-noexport="" data-dfn-type="attribute" id="dfn-penaltyduration" tabindex="0" aria-haspopup="dialog">[[PenaltyDuration]]</dfn> integer set as part of the <a data-link-type="dfn|abstract-op" href="#dfn-reset-observation-window" class="internalDFN" id="ref-for-dfn-reset-observation-window-3">reset observation window</a> steps.
    </li>
    <li>
      a <dfn data-idl="" data-dfn-for="PressureObserver" data-noexport="" data-dfn-type="attribute" id="dfn-changescountmap" tabindex="0" aria-haspopup="dialog">[[ChangesCountMap]]</dfn> <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#ordered-map">ordered map</a>, <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#map-key">keyed</a> on a <a data-link-type="idl" data-lt="PressureSource" href="#dom-pressuresource" class="internalDFN" id="ref-for-dom-pressuresource-7"><code>PressureSource</code></a>,
      representing the <a data-link-type="dfn|abstract-op" href="#dfn-source-types" class="internalDFN" id="ref-for-dfn-source-types-7">source type</a> that triggered transition to the <a data-link-type="dfn|abstract-op" href="#dfn-current-pressure-state" class="internalDFN" id="ref-for-dfn-current-pressure-state-1">current pressure state</a>.
      The <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#ordered-map">ordered map</a>'s <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#map-value">value</a> is an integer representing the number of state changes in the
      current observation window timeframe.
    </li>
    <li>
      a <dfn data-idl="" data-dfn-for="PressureObserver" data-noexport="" data-dfn-type="attribute" id="dfn-afterpenaltyrecordmap" tabindex="0" aria-haspopup="dialog">[[AfterPenaltyRecordMap]]</dfn> <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#ordered-map">ordered map</a>, <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#map-key">keyed</a> on a <a data-link-type="idl" data-lt="PressureSource" href="#dom-pressuresource" class="internalDFN" id="ref-for-dom-pressuresource-8"><code>PressureSource</code></a>,
      representing the <a data-link-type="dfn|abstract-op" href="#dfn-source-types" class="internalDFN" id="ref-for-dfn-source-types-8">source type</a> of the last <a data-link-type="idl" data-lt="PressureRecord" href="#dom-pressurerecord" class="internalDFN" id="ref-for-dom-pressurerecord-3"><code>PressureRecord</code></a>.
      The <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#ordered-map">ordered map</a>'s <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#map-value">value</a> is a <a data-link-type="idl" data-lt="PressureRecord" href="#dom-pressurerecord" class="internalDFN" id="ref-for-dom-pressurerecord-4"><code>PressureRecord</code></a>.
    </li>
  </ul>
</section>

<section id="pressure-states"><div class="header-wrapper">
<h2 id="x8-pressure-states">
<bdi class="secno">8. </bdi>Pressure States</h2>
<a class="self-link" href="#pressure-states" aria-label="Permalink for Section 8."></a>
</div> 
  <p>
    <dfn data-plurals="pressure state" id="dfn-pressure-states" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Pressure states</dfn> represents the minimal set of useful states that allows websites
    to react to changes in compute and system pressure with minimal degration in quality or service,
    or user experience.
  </p>
  <pre class="idl def" id="webidl-287287555"><span class="idlHeader"><a class="self-link" href="#webidl-287287555">WebIDL</a></span><code><span data-idl="" class="idlEnum" id="idl-def-pressurestate" data-title="PressureState">enum <a class="internalDFN idlID" data-link-type="enum" href="#dom-pressurestate" id="ref-for-dom-pressurestate-1"><code>PressureState</code></a> { <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" id="dom-pressurestate-nominal" data-idl="enum-value" data-title="nominal" data-dfn-for="PressureState" tabindex="0" aria-haspopup="dialog"><code>nominal</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" id="dom-pressurestate-fair" data-idl="enum-value" data-title="fair" data-dfn-for="PressureState" tabindex="0" aria-haspopup="dialog"><code>fair</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" id="dom-pressurestate-serious" data-idl="enum-value" data-title="serious" data-dfn-for="PressureState" tabindex="0" aria-haspopup="dialog"><code>serious</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" id="dom-pressurestate-critical" data-idl="enum-value" data-title="critical" data-dfn-for="PressureState" tabindex="0" aria-haspopup="dialog"><code>critical</code></dfn>"</span> };</span></code></pre>
  <p>
    The <dfn data-export="" data-dfn-type="enum" id="dom-pressurestate" data-idl="enum" data-title="PressureState" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>PressureState</code></dfn> enum represents the <a data-link-type="dfn|abstract-op" href="#dfn-pressure-states" class="internalDFN" id="ref-for-dfn-pressure-states-1">pressure state</a> with the following states:
  </p>
  <p>
    </p>
<ul class="pressure-states">
      <li>
        "<a data-link-type="idl" href="#dom-pressurestate-nominal" class="internalDFN" id="ref-for-dom-pressurestate-nominal-1"><code>nominal</code></a>": The conditions of the target device are at an acceptable level with no noticeable
        adverse effects on the user.
      </li>
      <li>
        "<a data-link-type="idl" href="#dom-pressurestate-fair" class="internalDFN" id="ref-for-dom-pressurestate-fair-1"><code>fair</code></a>": Target device pressure, temperature and/or energy usage are slightly elevated, potentially
        resulting in reduced battery-life, as well as fans (or systems with fans) becoming active and audible.
        Apart from that the target device is running flawlessly and can take on additional work.
      </li>
      <li>
        "<a data-link-type="idl" href="#dom-pressurestate-serious" class="internalDFN" id="ref-for-dom-pressurestate-serious-1"><code>serious</code></a>": Target device pressure, temperature and/or energy usage is consistently highly elevated.
        The system may be throttling as a countermeasure to reduce thermals.
      </li>
      <li>
        "<a data-link-type="idl" href="#dom-pressurestate-critical" class="internalDFN" id="ref-for-dom-pressurestate-critical-1"><code>critical</code></a>": The temperature of the target device or system is significantly elevated and it requires
        cooling down to avoid any potential issues.
      </li>
    </ul>
  <p></p>
</section>

<section id="contributing-factors"><div class="header-wrapper">
<h2 id="x9-contributing-factors">
<bdi class="secno">9. </bdi>Contributing Factors</h2>
<a class="self-link" href="#contributing-factors" aria-label="Permalink for Section 9."></a>
</div> 
  <p>
    <dfn id="dfn-contributing-factors" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">Contributing factors</dfn> represent the underlying hardware metrics contributing to the <a data-link-type="dfn|abstract-op" href="#dfn-current-pressure-state" class="internalDFN" id="ref-for-dfn-current-pressure-state-2">current pressure state</a>
    and can be <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#implementation-defined">implementation-defined</a>.
  </p>
  <p>
    The <dfn id="dfn-adjusted-pressure-state" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">adjusted pressure state</dfn> is a <a data-link-type="dfn|abstract-op" href="#dfn-pressure-states" class="internalDFN" id="ref-for-dfn-pressure-states-2">pressure state</a> determined by an <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#implementation-defined">implementation-defined</a>
    algorithm that takes as input <a data-link-type="dfn|abstract-op" href="#dfn-source-types" class="internalDFN" id="ref-for-dfn-source-types-9">source type</a> and any other <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#implementation-defined">implementation-defined</a> data from
    <a data-link-type="dfn|abstract-op" href="#dfn-contributing-factors" class="internalDFN" id="ref-for-dfn-contributing-factors-1">contributing factors</a>. This algorithm <em class="rfc2119">MUST</em> not be deterministic to ensure <a data-link-type="dfn|abstract-op" href="#dfn-break-calibration" class="internalDFN" id="ref-for-dfn-break-calibration-1">break calibration</a> mitigation effectiveness.
  </p>
  <p>
    The <dfn id="dfn-change-in-contributing-factors-is-substantial" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">change in contributing factors is substantial</dfn> steps are as follows:
    </p>
<ol>
      <li>
        If <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#implementation-defined">implementation-defined</a> low-level hardware metrics that contribute to the
        <a data-link-type="dfn|abstract-op" href="#dfn-current-pressure-state" class="internalDFN" id="ref-for-dfn-current-pressure-state-3">current pressure state</a> drop below or exceed an, per metric,
        <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#implementation-defined">implementation-defined</a> threshold
        for the <a data-link-type="dfn|abstract-op" href="#dfn-current-pressure-state" class="internalDFN" id="ref-for-dfn-current-pressure-state-4">current pressure state</a>, return true.
      </li>
      <li>
        Return false.
      </li>
    </ol>
    <div class="note" role="note" id="issue-container-generatedID-4">
<div role="heading" class="note-title marker" id="h-note-4" aria-level="3"><span>Note</span></div>
<aside class="">
      <p>
        The <a data-link-type="dfn|abstract-op" href="#dfn-change-in-contributing-factors-is-substantial" class="internalDFN" id="ref-for-dfn-change-in-contributing-factors-is-substantial-1">change in contributing factors is substantial</a> algorithm allows <a data-link-type="dfn|abstract-op" href="#dfn-user-agent" class="internalDFN" id="ref-for-dfn-user-agent-13">user agents</a> to avoid flip-
        flopping between states in certain circumstances. For example, a state might otherwise change too rapidly
        in response to a certain system metric that fluctuates around a boundary condition that triggers a state
        change.
     </p>
      <p>
        This specification does not define the precise algorithm
        to allow implementations optimize this algorithm to match the underlying hardware platform's behavior.
        One possible implementation of this algorithm is to use a
        <a href="en.wikipedia.org/wiki/Preisach_model_of_hysteresis#Nonideal_relay">nonideal relay</a>
        as a model and identify appropriate lower threshold α and upper threshold β for each
        <a data-link-type="dfn|abstract-op" href="#dfn-pressure-states" class="internalDFN" id="ref-for-dfn-pressure-states-3">pressure state</a> taking special characteristics of each contributing factors into consideration.
      </p>
    </aside>
</div>
  <p></p>
</section>

<section id="pressure-observer"><div class="header-wrapper">
<h2 id="x10-pressure-observer">
<bdi class="secno">10. </bdi>Pressure Observer</h2>
<a class="self-link" href="#pressure-observer" aria-label="Permalink for Section 10."></a>
</div> 
The Compute Pressure API enables developers to understand the pressure
of system resources such as the CPU.

<section data-dfn-for="PressureObserverCallback" id="the-pressureupdatecallback-callback"><div class="header-wrapper">
<h3 id="x10-1-the-pressureupdatecallback-callback">
<bdi class="secno">10.1 </bdi>The <a href="#dom-pressureupdatecallback" class="internalDFN" data-link-type="idl" id="ref-for-dom-pressureupdatecallback-2"><code>PressureUpdateCallback</code></a> callback</h3>
<a class="self-link" href="#the-pressureupdatecallback-callback" aria-label="Permalink for Section 10.1"></a>
</div>
  
  <pre class="idl def" id="webidl-1258957896"><span class="idlHeader"><a class="self-link" href="#webidl-1258957896">WebIDL</a></span><code><span data-idl="" class="idlCallback" id="idl-def-pressureupdatecallback" data-title="PressureUpdateCallback">callback <dfn data-export="" data-dfn-type="callback" id="dom-pressureupdatecallback" data-idl="callback" data-title="PressureUpdateCallback" data-dfn-for="" class="idlID" tabindex="0" aria-haspopup="dialog"><code>PressureUpdateCallback</code></dfn> =<span class="idlType"> <a data-link-type="idl" data-type="interface" href="webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> (<span class="idlType">
  <a data-type="dfn" href="webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="#dom-pressurerecord" class="internalDFN" id="ref-for-dom-pressurerecord-5"><code>PressureRecord</code></a>&gt;</span> <span class="idlParamName">changes</span>,<span class="idlType">
  <a data-link-type="idl" href="#dom-pressureobserver" class="internalDFN" id="ref-for-dom-pressureobserver-7"><code>PressureObserver</code></a></span> <span class="idlParamName">observer</span>
);</span></code></pre>
  This callback will be invoked when the <a data-link-type="dfn|abstract-op" href="#dfn-pressure-states" class="internalDFN" id="ref-for-dfn-pressure-states-4">pressure state</a> changes.
</section>

<section data-dfn-for="PressureObserver" id="the-pressureobserver-object"><div class="header-wrapper">
<h3 id="x10-2-the-pressureobserver-object">
<bdi class="secno">10.2 </bdi>The <a href="#dom-pressureobserver" class="internalDFN" data-link-type="idl" id="ref-for-dom-pressureobserver-8"><code>PressureObserver</code></a> object</h3>
<a class="self-link" href="#the-pressureobserver-object" aria-label="Permalink for Section 10.2"></a>
</div> 
  <p>
    The <a data-link-type="idl" data-lt="PressureObserver" href="#dom-pressureobserver" class="internalDFN" id="ref-for-dom-pressureobserver-9"><code>PressureObserver</code></a> can be used to observe changes in the <a data-link-type="dfn|abstract-op" href="#dfn-pressure-states" class="internalDFN" id="ref-for-dfn-pressure-states-5">pressure states</a>.
  </p>
  <pre class="idl def" id="webidl-633922516"><span class="idlHeader"><a class="self-link" href="#webidl-633922516">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-pressureobserver" data-title="PressureObserver">[<span class="extAttr"><a data-type="extended-attribute" href="webidl.spec.whatwg.org/#Exposed">Exposed</a>=(DedicatedWorker,SharedWorker,Window)</span>, <span class="extAttr"><a data-type="extended-attribute" href="webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-pressureobserver" id="ref-for-dom-pressureobserver-10"><code>PressureObserver</code></a> {<span data-idl="" class="idlConstructor" id="idl-def-pressureobserver-constructor-callback-options" data-title="constructor" data-dfn-for="PressureObserver">
  <a class="internalDFN" data-link-type="constructor" href="#dom-pressureobserver-constructor" id="ref-for-dom-pressureobserver-constructor-1"><code>constructor</code></a>(<span class="idlType"><a data-link-type="idl" href="#dom-pressureupdatecallback" class="internalDFN" id="ref-for-dom-pressureupdatecallback-3"><code>PressureUpdateCallback</code></a></span> <span class="idlParamName">callback</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-pressureobserveroptions" class="internalDFN" id="ref-for-dom-pressureobserveroptions-1"><code>PressureObserverOptions</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" id="idl-def-pressureobserver-observe-source" data-title="observe" data-dfn-for="PressureObserver"><span class="idlType">

  <a data-type="interface" href="webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pressureobserver-observe" id="ref-for-dom-pressureobserver-observe-2"><code>observe</code></a>(<span class="idlType"><a data-link-type="idl" href="#dom-pressuresource" class="internalDFN" id="ref-for-dom-pressuresource-9"><code>PressureSource</code></a></span> <span class="idlParamName">source</span>);</span><span data-idl="" class="idlMethod" id="idl-def-pressureobserver-unobserve-source" data-title="unobserve" data-dfn-for="PressureObserver"><span class="idlType">
  <a data-link-type="idl" data-type="interface" href="webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pressureobserver-unobserve" id="ref-for-dom-pressureobserver-unobserve-1"><code>unobserve</code></a>(<span class="idlType"><a data-link-type="idl" href="#dom-pressuresource" class="internalDFN" id="ref-for-dom-pressuresource-10"><code>PressureSource</code></a></span> <span class="idlParamName">source</span>);</span><span data-idl="" class="idlMethod" id="idl-def-pressureobserver-disconnect" data-title="disconnect" data-dfn-for="PressureObserver"><span class="idlType">
  <a data-link-type="idl" data-type="interface" href="webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pressureobserver-disconnect" id="ref-for-dom-pressureobserver-disconnect-1"><code>disconnect</code></a>();</span><span data-idl="" class="idlMethod" id="idl-def-pressureobserver-takerecords" data-title="takeRecords" data-dfn-for="PressureObserver"><span class="idlType">
  <a data-type="dfn" href="webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="#dom-pressurerecord" class="internalDFN" id="ref-for-dom-pressurerecord-6"><code>PressureRecord</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pressureobserver-takerecords" id="ref-for-dom-pressureobserver-takerecords-1"><code>takeRecords</code></a>();</span><span data-idl="" class="idlAttribute" id="idl-def-pressureobserver-supportedsources" data-title="supportedSources" data-dfn-for="PressureObserver">

  [<span class="extAttr"><a data-type="extended-attribute" href="webidl.spec.whatwg.org/#SameObject">SameObject</a></span>] static readonly attribute<span class="idlType"> <a data-type="interface" href="webidl.spec.whatwg.org/#idl-frozen-array">FrozenArray</a>&lt;<a data-link-type="idl" href="#dom-pressuresource" class="internalDFN" id="ref-for-dom-pressuresource-11"><code>PressureSource</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pressureobserver-supportedsources" id="ref-for-dom-pressureobserver-supportedsources-2"><code>supportedSources</code></a>;</span>
};</span></code></pre>

  <p>The <dfn data-export="" data-dfn-type="interface" id="dom-pressureobserver" data-idl="interface" data-title="PressureObserver" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>PressureObserver</code></dfn> interface represents a <a data-link-type="idl" data-lt="PressureObserver" href="#dom-pressureobserver" class="internalDFN" id="ref-for-dom-pressureobserver-11"><code>PressureObserver</code></a>.</p>

  <section id="the-constructor-method"><div class="header-wrapper">
<h4 id="x10-2-1-the-constructor-method">
<bdi class="secno">10.2.1 </bdi>The <dfn data-export="" data-dfn-type="constructor" id="dom-pressureobserver-constructor" data-idl="constructor" data-title="constructor()" data-dfn-for="PressureObserver" data-lt="constructor()|constructor(callback)|constructor(callback, options)" data-local-lt="PressureObserver.constructor|PressureObserver.constructor()|constructor" tabindex="0" aria-haspopup="dialog"><code>constructor()</code></dfn> method</h4>
<a class="self-link" href="#the-constructor-method" aria-label="Permalink for Section 10.2.1"></a>
</div>
    
    <p>
      The <code>new</code> <a data-link-type="idl" data-lt="PressureObserver(callback, options)" href="#dom-pressureobserver" class="internalDFN" id="ref-for-dom-pressureobserver-12"><code>PressureObserver</code></a><code>(<var>callback</var>, <var>options</var>)</code> constructor steps are:
      </p>
<ol class="algorithm">
        <li>
          Set <var>this</var>.<a data-link-type="attribute" data-lt="[[Callback]]" href="#dfn-callback" class="internalDFN" id="ref-for-dfn-callback-1"><code>[[Callback]]</code></a> to <var data-type="PressureUpdateCallback">callback</var>.
        </li>
        <li>
          Set <var data-type="PressureObserver">this</var>.<a data-link-type="attribute" data-lt="[[SampleInterval]]" href="#dfn-sampleinterval" class="internalDFN" id="ref-for-dfn-sampleinterval-1"><code>[[SampleInterval]]</code></a> to <var>options</var>["sampleInterval"].
        </li>
      </ol>
    <p></p>
  </section>
  <section id="the-observe-method"><div class="header-wrapper">
<h4 id="x10-2-2-the-observe-method">
<bdi class="secno">10.2.2 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-pressureobserver-observe" data-idl="operation" data-title="observe()" data-dfn-for="PressureObserver" data-type="Promise" data-lt="observe()|observe(source)" data-local-lt="PressureObserver.observe|PressureObserver.observe()|observe" tabindex="0" aria-haspopup="dialog"><code>observe()</code></dfn> method</h4>
<a class="self-link" href="#the-observe-method" aria-label="Permalink for Section 10.2.2"></a>
</div>
    
    <p>
      The <a data-link-type="idl" data-lt="observe(source)" href="#dom-pressureobserver-observe" class="internalDFN" id="ref-for-dom-pressureobserver-observe-3"><code>observe</code></a><code>(<var>source</var>)</code> method steps are:
      </p>
<ol class="algorithm">
        <li>
          Let <var>relevantGlobal</var> be <a data-link-type="dfn|abstract-op" data-type="dfn" href="webidl.spec.whatwg.org/#this">this</a>'s <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">relevant global object</a>.
        </li>
        <li>
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list-iterate">For each</a> <var data-type="Document">document</var> in <var>relevantGlobal</var>'s <a data-link-type="dfn|abstract-op" href="#dfn-owning-document-set" class="internalDFN" id="ref-for-dfn-owning-document-set-1">owning document set</a>:
          <ol>
            <li>
              If <var data-type="Document">document</var> is not <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use">allowed to use</a> the <a data-link-type="dfn|abstract-op" data-type="dfn" href="www.w3.org/TR/permissions-policy-1/#policy-controlled-feature">policy-controlled feature</a> token "compute-pressure", return <a data-link-type="dfn|abstract-op" data-type="dfn" href="webidl.spec.whatwg.org/#a-promise-rejected-with">a promise rejected with</a> <a data-link-type="idl" data-lt="NotAllowedError" data-type="exception" href="webidl.spec.whatwg.org/#notallowederror"><code>NotAllowedError</code></a>.
            </li>
          </ol>
          <div class="issue" id="issue-container-number-1">
<div role="heading" class="issue-title marker" id="h-issue" aria-level="5"><span>Issue 1</span></div>
<aside class="">
            <a href="github.com/w3c/compute-pressure/issues/110">
            Permission policy does not support workers directly yet #110</a>, so they cannot be set per
            individual worker, so for now we consult the policy for all owning documents. For shared
            workers this means that all owning documents have to have the policy enabled, which should
            be easy to coordinate as shared workers require same origin.
          </aside>
</div>
        </li>
        
        <li>
          Let <var data-type="Promise">promise</var> be <a data-link-type="dfn|abstract-op" data-type="dfn" href="webidl.spec.whatwg.org/#a-new-promise">a new promise</a>.
        </li>
        <li>
          Let <var>pendingPromiseTuple</var> be (<var>source</var>, <var data-type="Promise">promise</var>).
        </li>
        <li>
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list-append">Append</a> <var>pendingPromiseTuple</var> to <a data-link-type="dfn|abstract-op" data-type="dfn" href="webidl.spec.whatwg.org/#this">this</a>.<a data-link-type="attribute" data-lt="[[PendingObservePromises]]" href="#dfn-pendingobservepromises" class="internalDFN" id="ref-for-dfn-pendingobservepromises-1"><code>[[PendingObservePromises]]</code></a>.
        </li>
        <li>
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="webidl.spec.whatwg.org/#dfn-perform-steps-once-promise-is-settled">React</a> to <var data-type="Promise">promise</var>:
          <ul>
            <li>
              If <var data-type="Promise">promise</var> was <a data-link-type="dfn|abstract-op" data-lt="resolved" data-type="dfn" href="webidl.spec.whatwg.org/#resolve">fulfilled</a> or <a data-link-type="dfn|abstract-op" data-type="dfn" href="webidl.spec.whatwg.org/#reject">rejected</a>, then:
              <ol>
                <li>
                  <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list-remove">Remove</a> <var>tuple</var> from <a data-link-type="dfn|abstract-op" data-type="dfn" href="webidl.spec.whatwg.org/#this">this</a>.<a data-link-type="attribute" data-lt="[[PendingObservePromises]]" href="#dfn-pendingobservepromises" class="internalDFN" id="ref-for-dfn-pendingobservepromises-2"><code>[[PendingObservePromises]]</code></a>.
                </li>
              </ol>
            </li>
          </ul>
        </li>
        <li>
          Run the following steps <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>:
          <ol>
            <li>
              If <var data-type="PressureSource">source</var> is not a <a data-link-type="dfn|abstract-op" href="#dfn-supported-source-types" class="internalDFN" id="ref-for-dfn-supported-source-types-2">supported source type</a>,
              <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">queue a global task</a> on the <a data-link-type="dfn|abstract-op" href="#dfn-pressureobserver-task-source" class="internalDFN" id="ref-for-dfn-pressureobserver-task-source-1">PressureObserver task source</a>
              given <var>relevantGlobal</var>
              to reject <var data-type="Promise">promise</var> <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a> and abort these steps.
            </li>
            <li>
              Activate <a data-link-type="dfn|abstract-op" href="#dfn-data-delivery" class="internalDFN" id="ref-for-dfn-data-delivery-2">data delivery</a> of <var data-type="PressureSource">source</var> data to <var>relevantGlobal</var>.
            </li>
            <li>
              <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">Queue a global task</a> on the <a data-link-type="dfn|abstract-op" href="#dfn-pressureobserver-task-source" class="internalDFN" id="ref-for-dfn-pressureobserver-task-source-2">PressureObserver task source</a> given
              <var>relevantGlobal</var> to run these steps:
              <ol>
                <li>
                  If <var data-type="Promise">promise</var> was rejected, run the following substeps:
                  <ol>
                    <li>
                      If <var>relevantGlobal</var>'s <a data-link-type="dfn|abstract-op" href="#dfn-registered-observer-list" class="internalDFN" id="ref-for-dfn-registered-observer-list-1">registered observer list</a> for <var data-type="PressureSource">source</var> is <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list-empty">empty</a>,
                      deactivate <a data-link-type="dfn|abstract-op" href="#dfn-data-delivery" class="internalDFN" id="ref-for-dfn-data-delivery-3">data delivery</a> of <var data-type="PressureSource">source</var> data to <var>relevantGlobal</var>.
                    </li>
                    <li>
                      Return.
                    </li>
                  </ol>
                </li>
                <li>
                  <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list-append">Append</a> a new <a data-link-type="dfn|abstract-op" href="#dfn-registered-observer" class="internalDFN" id="ref-for-dfn-registered-observer-1">registered observer</a> whose <a data-link-type="dfn|abstract-op" href="#dfn-observer" class="internalDFN" id="ref-for-dfn-observer-1">observer</a> is <a data-link-type="dfn|abstract-op" data-type="dfn" href="webidl.spec.whatwg.org/#this">this</a>
                  to <var>relevantGlobal</var>'s <a data-link-type="dfn|abstract-op" href="#dfn-registered-observer-list" class="internalDFN" id="ref-for-dfn-registered-observer-list-2">registered observer list</a> for <var data-type="PressureSource">source</var>.
                </li>
                <li>
                  Resolve <var data-type="Promise">promise</var>.
                </li>
              </ol>
            </li>
          </ol>
        </li>
        <li>
          Return <var data-type="Promise">promise</var>.
        </li>
      </ol>
    <p></p>
  </section>
  <section id="the-unobserve-method"><div class="header-wrapper">
<h4 id="x10-2-3-the-unobserve-method">
<bdi class="secno">10.2.3 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-pressureobserver-unobserve" data-idl="operation" data-title="unobserve()" data-dfn-for="PressureObserver" data-type="undefined" data-lt="unobserve()|unobserve(source)" data-local-lt="PressureObserver.unobserve|PressureObserver.unobserve()|unobserve" tabindex="0" aria-haspopup="dialog"><code>unobserve()</code></dfn> method</h4>
<a class="self-link" href="#the-unobserve-method" aria-label="Permalink for Section 10.2.3"></a>
</div>
    
    <p>
      The <a data-link-type="idl" data-lt="unobserve(source)" href="#dom-pressureobserver-unobserve" class="internalDFN" id="ref-for-dom-pressureobserver-unobserve-2"><code>unobserve</code></a><code>(<var>source</var>)</code> method steps are:
      </p>
<ol class="algorithm">
        <li>
          If <var data-type="PressureSource">source</var> is not a <a data-link-type="dfn|abstract-op" href="#dfn-supported-source-types" class="internalDFN" id="ref-for-dfn-supported-source-types-3">supported source type</a>, throw "<a data-link-type="idl" data-type="exception" href="webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a>".
        </li>
        <li>
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list-remove">Remove</a> from <var>this</var>.<a data-link-type="attribute" data-lt="[[QueuedRecords]]" href="#dfn-queuedrecords" class="internalDFN" id="ref-for-dfn-queuedrecords-1"><code>[[QueuedRecords]]</code></a> all
          <var>records</var> associated with <var data-type="PressureSource">source</var>.
        </li>
        <li>
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#map-remove">Remove</a> <var>this</var>.<a data-link-type="attribute" data-lt="[[LastRecordMap]]" href="#dfn-lastrecordmap" class="internalDFN" id="ref-for-dfn-lastrecordmap-1"><code>[[LastRecordMap]]</code></a>[<var data-type="PressureSource">source</var>].
        </li>
        <li>
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#map-remove">Remove</a> <var>this</var>.<a data-link-type="attribute" data-lt="[[AfterPenaltyRecordMap]]" href="#dfn-afterpenaltyrecordmap" class="internalDFN" id="ref-for-dfn-afterpenaltyrecordmap-1"><code>[[AfterPenaltyRecordMap]]</code></a>[<var data-type="PressureSource">source</var>].
        </li>
        <li>
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list-iterate">For each</a> (<var>promiseSource</var>, <var>pendingPromise</var>) of <a data-link-type="dfn|abstract-op" data-type="dfn" href="webidl.spec.whatwg.org/#this">this</a>.<a data-link-type="attribute" data-lt="[[PendingObservePromises]]" href="#dfn-pendingobservepromises" class="internalDFN" id="ref-for-dfn-pendingobservepromises-3"><code>[[PendingObservePromises]]</code></a>,
          if <var data-type="PressureSource">source</var> is equal to <var>promiseSource</var>, <a data-link-type="dfn|abstract-op" data-type="dfn" href="webidl.spec.whatwg.org/#reject">reject</a> <var>pendingPromise</var> with an <a data-link-type="idl" data-lt="AbortError" data-type="exception" href="webidl.spec.whatwg.org/#aborterror"><code>AbortError</code></a>.
        </li>
        <li>
          Let <var>relevantGlobal</var> be <a data-link-type="dfn|abstract-op" data-type="dfn" href="webidl.spec.whatwg.org/#this">this</a>'s <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">relevant global object</a>.
        </li>
        <li>
          Remove any <a data-link-type="dfn|abstract-op" href="#dfn-registered-observer" class="internalDFN" id="ref-for-dfn-registered-observer-2">registered observer</a> from <var>relevantGlobal</var>'s <a data-link-type="dfn|abstract-op" href="#dfn-registered-observer-list" class="internalDFN" id="ref-for-dfn-registered-observer-list-3">registered observer list</a> for
          <var data-type="PressureSource">source</var> for which <a data-link-type="dfn|abstract-op" data-type="dfn" href="webidl.spec.whatwg.org/#this">this</a> is the <a data-link-type="dfn|abstract-op" href="#dfn-registered-observer" class="internalDFN" id="ref-for-dfn-registered-observer-3">registered observer</a>.
        </li>
        <li>
          If the above <a data-link-type="dfn|abstract-op" href="#dfn-registered-observer-list" class="internalDFN" id="ref-for-dfn-registered-observer-list-4">registered observer list</a> is <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list-empty">empty</a>,
          deactivate <a data-link-type="dfn|abstract-op" href="#dfn-data-delivery" class="internalDFN" id="ref-for-dfn-data-delivery-4">data delivery</a> of <var data-type="PressureSource">source</var> data to <var>relevantGlobal</var>.
        </li>
      </ol>
    <p></p>
  </section>
  <section id="the-disconnect-method"><div class="header-wrapper">
<h4 id="x10-2-4-the-disconnect-method">
<bdi class="secno">10.2.4 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-pressureobserver-disconnect" data-idl="operation" data-title="disconnect()" data-dfn-for="PressureObserver" data-type="undefined" data-lt="disconnect()" data-local-lt="PressureObserver.disconnect|PressureObserver.disconnect()|disconnect" tabindex="0" aria-haspopup="dialog"><code>disconnect()</code></dfn> method</h4>
<a class="self-link" href="#the-disconnect-method" aria-label="Permalink for Section 10.2.4"></a>
</div>
    
    <p>
      The <a data-link-type="idl" data-lt="disconnect()" href="#dom-pressureobserver-disconnect" class="internalDFN" id="ref-for-dom-pressureobserver-disconnect-2"><code>disconnect</code></a><code>()</code> method steps are:
      </p>
<ol class="algorithm">
        <li>
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list-empty">Empty</a> <var>observer</var>.<a data-link-type="attribute" data-lt="[[QueuedRecords]]" href="#dfn-queuedrecords" class="internalDFN" id="ref-for-dfn-queuedrecords-2"><code>[[QueuedRecords]]</code></a>.
        </li>
        <li>
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#map-clear">Clear</a> <var>this</var>.<a data-link-type="attribute" data-lt="[[LastRecordMap]]" href="#dfn-lastrecordmap" class="internalDFN" id="ref-for-dfn-lastrecordmap-2"><code>[[LastRecordMap]]</code></a>.
        </li>
        <li>
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#map-clear">Clear</a> <var>this</var>.<a data-link-type="attribute" data-lt="[[AfterPenaltyRecordMap]]" href="#dfn-afterpenaltyrecordmap" class="internalDFN" id="ref-for-dfn-afterpenaltyrecordmap-2"><code>[[AfterPenaltyRecordMap]]</code></a>.
        </li>
        <li>
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list-iterate">For each</a> (<var>promiseSource</var>, <var>pendingPromise</var>) of <a data-link-type="dfn|abstract-op" data-type="dfn" href="webidl.spec.whatwg.org/#this">this</a>.<a data-link-type="attribute" data-lt="[[PendingObservePromises]]" href="#dfn-pendingobservepromises" class="internalDFN" id="ref-for-dfn-pendingobservepromises-4"><code>[[PendingObservePromises]]</code></a>,
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="webidl.spec.whatwg.org/#reject">reject</a> <var>pendingPromise</var> with an <a data-link-type="idl" data-lt="AbortError" data-type="exception" href="webidl.spec.whatwg.org/#aborterror"><code>AbortError</code></a>.
        </li>
        <li>
          Let <var>relevantGlobal</var> be <a data-link-type="dfn|abstract-op" data-type="dfn" href="webidl.spec.whatwg.org/#this">this</a>'s <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">relevant global object</a>.
        </li>
        <li>
          Remove any <a data-link-type="dfn|abstract-op" href="#dfn-registered-observer" class="internalDFN" id="ref-for-dfn-registered-observer-4">registered observer</a> from <var>relevantGlobal</var>'s' <a data-link-type="dfn|abstract-op" href="#dfn-registered-observer-list" class="internalDFN" id="ref-for-dfn-registered-observer-list-5">registered observer list</a> for
          all supported <a data-link-type="dfn|abstract-op" href="#dfn-source-types" class="internalDFN" id="ref-for-dfn-source-types-10">source types</a> for which <a data-link-type="dfn|abstract-op" data-type="dfn" href="webidl.spec.whatwg.org/#this">this</a> is the <a data-link-type="dfn|abstract-op" href="#dfn-observer" class="internalDFN" id="ref-for-dfn-observer-2">observer</a>.
        </li>
        <li>
          If the above <a data-link-type="dfn|abstract-op" href="#dfn-registered-observer-list" class="internalDFN" id="ref-for-dfn-registered-observer-list-6">registered observer list</a> is <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list-empty">empty</a>,
          deactivate <a data-link-type="dfn|abstract-op" href="#dfn-data-delivery" class="internalDFN" id="ref-for-dfn-data-delivery-5">data delivery</a> of <var>source</var> data to <var>relevantGlobal</var>.
        </li>
      </ol>
    <p></p>
  </section>
  <section id="the-takerecords-method"><div class="header-wrapper">
<h4 id="x10-2-5-the-takerecords-method">
<bdi class="secno">10.2.5 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-pressureobserver-takerecords" data-idl="operation" data-title="takeRecords()" data-dfn-for="PressureObserver" data-type="sequence" data-lt="takeRecords()" data-local-lt="PressureObserver.takeRecords|PressureObserver.takeRecords()|takeRecords" tabindex="0" aria-haspopup="dialog"><code>takeRecords()</code></dfn> method</h4>
<a class="self-link" href="#the-takerecords-method" aria-label="Permalink for Section 10.2.5"></a>
</div>
    
    <div class="note" role="note" id="issue-container-generatedID-5">
<div role="heading" class="note-title marker" id="h-note-5" aria-level="5"><span>Note</span></div>
<aside class="">
      <p>
        A common use case for this is to immediately fetch all pending state change records
        immediately prior to disconnecting the observer, so that any pending state changes
        can be processed when shutting down the observer.
      </p>
      <p>
        Another use case is the ability to receive any pending, already-generated states
        changes without waiting for the callbacks to be invoked. Callbacks are invoked from
        a task queue as part of the event loop cycle, so this allows for conferring the
        current state outside of the event loop cycle.
      </p>
    </aside>
</div>
    <p>
      The <a data-link-type="idl" data-lt="takeRecords()" href="#dom-pressureobserver-takerecords" class="internalDFN" id="ref-for-dom-pressureobserver-takerecords-2"><code>takeRecords</code></a><code>()</code> method steps are:
      </p>
<ol class="algorithm">
        <li>
          Let <var>records</var> be a <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list-clone">clone</a> of <var>observer</var>.<a data-link-type="attribute" data-lt="[[QueuedRecords]]" href="#dfn-queuedrecords" class="internalDFN" id="ref-for-dfn-queuedrecords-3"><code>[[QueuedRecords]]</code></a>.
        </li>
        <li>
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list-empty">Empty</a> <var>observer</var>.<a data-link-type="attribute" data-lt="[[QueuedRecords]]" href="#dfn-queuedrecords" class="internalDFN" id="ref-for-dfn-queuedrecords-4"><code>[[QueuedRecords]]</code></a>.
        </li>
        <li>
          Return <var>records</var>.
        </li>
      </ol>
    <p></p>
  </section>
  <section id="the-supportedsources-attribute"><div class="header-wrapper">
<h4 id="x10-2-6-the-supportedsources-attribute">
<bdi class="secno">10.2.6 </bdi>The <dfn data-export="" data-dfn-type="attribute" id="dom-pressureobserver-supportedsources" data-idl="attribute" data-title="supportedSources" data-dfn-for="PressureObserver" data-type="FrozenArray" data-lt="supportedSources" data-local-lt="PressureObserver.supportedSources" tabindex="0" aria-haspopup="dialog"><code>supportedSources</code></dfn> attribute</h4>
<a class="self-link" href="#the-supportedsources-attribute" aria-label="Permalink for Section 10.2.6"></a>
</div>
    
    <p>
      The <a data-link-type="idl" href="#dom-pressureobserver-supportedsources" class="internalDFN" id="ref-for-dom-pressureobserver-supportedsources-3"><code>supportedSources</code></a> attribute is informing on the <a data-link-type="dfn|abstract-op" href="#dfn-supported-source-types" class="internalDFN" id="ref-for-dfn-supported-source-types-4">supported source type</a> by the <a data-link-type="dfn|abstract-op" href="#dfn-platform-collector" class="internalDFN" id="ref-for-dfn-platform-collector-14">platform collector</a>.
    </p>
    <p>
      The <a data-link-type="idl" href="#dom-pressureobserver-supportedsources" class="internalDFN" id="ref-for-dom-pressureobserver-supportedsources-4"><code>supportedSources</code></a> getter steps are:
      </p>
<ol class="algorithm">
        <li>
          Let <var>sources</var> be a <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list">list</a> of <var data-type="PressureSource">source</var>.
        </li>
        <li>
          Return <var>observer</var>'s frozen array of supported <a data-link-type="dfn|abstract-op" href="#dfn-source-types" class="internalDFN" id="ref-for-dfn-source-types-11">source types</a>.
        </li>
      </ol>
    <p></p>
    <div class="note" role="note" id="issue-container-generatedID-6">
<div role="heading" class="note-title marker" id="h-note-6" aria-level="5"><span>Note</span></div>
<aside class="">
      <p>
        This attribute allows web developers to easily know which <a data-link-type="dfn|abstract-op" href="#dfn-source-types" class="internalDFN" id="ref-for-dfn-source-types-12">source types</a> are supported by the user agent.
      </p>
    </aside>
</div>
  </section>
</section>

<section data-dfn-for="PressureRecord" id="the-pressurerecord-interface"><div class="header-wrapper">
<h3 id="x10-3-the-pressurerecord-interface">
<bdi class="secno">10.3 </bdi>The <dfn data-export="" data-dfn-type="interface" id="dom-pressurerecord" data-idl="interface" data-title="PressureRecord" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>PressureRecord</code></dfn> interface</h3>
<a class="self-link" href="#the-pressurerecord-interface" aria-label="Permalink for Section 10.3"></a>
</div>
  
  <pre class="idl def" id="webidl-737850499"><span class="idlHeader"><a class="self-link" href="#webidl-737850499">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-pressurerecord" data-title="PressureRecord">[<span class="extAttr"><a data-type="extended-attribute" href="webidl.spec.whatwg.org/#Exposed">Exposed</a>=(DedicatedWorker,SharedWorker,Window)</span>, <span class="extAttr"><a data-type="extended-attribute" href="webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-pressurerecord" id="ref-for-dom-pressurerecord-7"><code>PressureRecord</code></a> {<span data-idl="" class="idlAttribute" id="idl-def-pressurerecord-source" data-title="source" data-dfn-for="PressureRecord">
  readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-pressuresource" class="internalDFN" id="ref-for-dom-pressuresource-12"><code>PressureSource</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pressurerecord-source" id="ref-for-dom-pressurerecord-source-1"><code>source</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-pressurerecord-state" data-title="state" data-dfn-for="PressureRecord">
  readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-pressurestate" class="internalDFN" id="ref-for-dom-pressurestate-2"><code>PressureState</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pressurerecord-state" id="ref-for-dom-pressurerecord-state-1"><code>state</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-pressurerecord-time" data-title="time" data-dfn-for="PressureRecord">
  readonly attribute<span class="idlType"> <a data-link-type="idl" data-type="typedef" href="www.w3.org/TR/hr-time-3/#dom-domhighrestimestamp">DOMHighResTimeStamp</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pressurerecord-time" id="ref-for-dom-pressurerecord-time-1"><code>time</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-pressurerecord-tojson" data-title="toJSON" data-dfn-for="PressureRecord">
  [<span class="extAttr"><a data-type="extended-attribute" href="webidl.spec.whatwg.org/#Default">Default</a></span>]<span class="idlType"> <a data-link-type="interface" data-type="interface" href="webidl.spec.whatwg.org/#idl-object">object</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pressurerecord-tojson" id="ref-for-dom-pressurerecord-tojson-1"><code>toJSON</code></a>();</span>
};</span></code></pre>
  <p>
    A constructed  <a data-link-type="idl" data-lt="PressureRecord" href="#dom-pressurerecord" class="internalDFN" id="ref-for-dom-pressurerecord-8"><code>PressureRecord</code></a> object has the following internal slots:
  </p>
  <ul data-dfn-for="PressureRecord">
    <li>
      a <dfn data-idl="" data-dfn-for="PressureRecord" data-noexport="" data-dfn-type="attribute" id="dfn-source" tabindex="0" aria-haspopup="dialog">[[Source]]</dfn> value of type <a data-link-type="idl" data-lt="PressureSource" href="#dom-pressuresource" class="internalDFN" id="ref-for-dom-pressuresource-13"><code>PressureSource</code></a>, which represents the current <a data-link-type="dfn|abstract-op" href="#dfn-source-types" class="internalDFN" id="ref-for-dfn-source-types-13">source type</a>.
    </li>
    <li>
      a <dfn data-idl="" data-dfn-for="PressureRecord" data-noexport="" data-dfn-type="attribute" id="dfn-state" tabindex="0" aria-haspopup="dialog">[[State]]</dfn> value of type <a data-link-type="idl" data-lt="PressureState" href="#dom-pressurestate" class="internalDFN" id="ref-for-dom-pressurestate-3"><code>PressureState</code></a>, which represents the <a data-link-type="dfn|abstract-op" href="#dfn-current-pressure-state" class="internalDFN" id="ref-for-dfn-current-pressure-state-5">current pressure state</a>.
    </li>
    <li>
      a <dfn data-idl="" data-dfn-for="PressureRecord" data-noexport="" data-dfn-type="attribute" id="dfn-time" tabindex="0" aria-haspopup="dialog">[[Time]]</dfn> value of type <a data-link-type="idl" data-lt="DOMHighResTimeStamp" data-type="typedef" href="www.w3.org/TR/hr-time-3/#dom-domhighrestimestamp"><code>DOMHighResTimeStamp</code></a>,
      which corresponds to the
      time the data was obtained from the system, relative to the <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-time-origin">time origin</a> of the global object associated with
      the <a data-link-type="idl" data-lt="PressureObserver" href="#dom-pressureobserver" class="internalDFN" id="ref-for-dom-pressureobserver-13"><code>PressureObserver</code></a> instance that generated the notification.
    </li>
  </ul>
  <section id="the-source-attribute"><div class="header-wrapper">
<h4 id="x10-3-1-the-source-attribute">
<bdi class="secno">10.3.1 </bdi>The <dfn data-export="" data-dfn-type="attribute" id="dom-pressurerecord-source" data-idl="attribute" data-title="source" data-dfn-for="PressureRecord" data-type="PressureSource" data-lt="source" data-local-lt="PressureRecord.source" tabindex="0" aria-haspopup="dialog"><code>source</code></dfn> attribute</h4>
<a class="self-link" href="#the-source-attribute" aria-label="Permalink for Section 10.3.1"></a>
</div>
    
    <p>
      The <a data-link-type="idl" href="#dom-pressurerecord-source" class="internalDFN" id="ref-for-dom-pressurerecord-source-2"><code>source</code></a> <a data-link-type="dfn|abstract-op" data-type="dfn" href="webidl.spec.whatwg.org/#getter-steps">getter steps</a> are to return its <a data-link-type="attribute" data-lt="[[Source]]" href="#dfn-source" class="internalDFN" id="ref-for-dfn-source-1"><code>[[Source]]</code></a> internal slot.
    </p>
  </section>
  <section id="the-state-attribute"><div class="header-wrapper">
<h4 id="x10-3-2-the-state-attribute">
<bdi class="secno">10.3.2 </bdi>The <dfn data-export="" data-dfn-type="attribute" id="dom-pressurerecord-state" data-idl="attribute" data-title="state" data-dfn-for="PressureRecord" data-type="PressureState" data-lt="state" data-local-lt="PressureRecord.state" tabindex="0" aria-haspopup="dialog"><code>state</code></dfn> attribute</h4>
<a class="self-link" href="#the-state-attribute" aria-label="Permalink for Section 10.3.2"></a>
</div>
    
    <p>
      The <a data-link-type="idl" href="#dom-pressurerecord-state" class="internalDFN" id="ref-for-dom-pressurerecord-state-2"><code>state</code></a> <a data-link-type="dfn|abstract-op" data-type="dfn" href="webidl.spec.whatwg.org/#getter-steps">getter steps</a> are to return its <a data-link-type="attribute" data-lt="[[State]]" href="#dfn-state" class="internalDFN" id="ref-for-dfn-state-1"><code>[[State]]</code></a> internal slot.
    </p>
  </section>
  <section id="the-time-attribute"><div class="header-wrapper">
<h4 id="x10-3-3-the-time-attribute">
<bdi class="secno">10.3.3 </bdi>The <dfn data-export="" data-dfn-type="attribute" id="dom-pressurerecord-time" data-idl="attribute" data-title="time" data-dfn-for="PressureRecord" data-type="DOMHighResTimeStamp" data-lt="time" data-local-lt="PressureRecord.time" tabindex="0" aria-haspopup="dialog"><code>time</code></dfn> attribute</h4>
<a class="self-link" href="#the-time-attribute" aria-label="Permalink for Section 10.3.3"></a>
</div>
    
    <p>
      The <a data-link-type="idl" href="#dom-pressurerecord-time" class="internalDFN" id="ref-for-dom-pressurerecord-time-2"><code>time</code></a> <a data-link-type="dfn|abstract-op" data-type="dfn" href="webidl.spec.whatwg.org/#getter-steps">getter steps</a> are to return its <a data-link-type="attribute" data-lt="[[Time]]" href="#dfn-time" class="internalDFN" id="ref-for-dfn-time-1"><code>[[Time]]</code></a> internal slot.
    </p>
  </section>
  <section id="the-tojson-member"><div class="header-wrapper">
<h4 id="x10-3-4-the-tojson-member">
<bdi class="secno">10.3.4 </bdi>The <dfn data-export="" data-dfn-type="method" id="dom-pressurerecord-tojson" data-idl="operation" data-title="toJSON" data-dfn-for="PressureRecord" data-type="object" data-lt="toJSON()" data-local-lt="PressureRecord.toJSON|PressureRecord.toJSON()|toJSON" tabindex="0" aria-haspopup="dialog"><code>toJSON</code></dfn> member</h4>
<a class="self-link" href="#the-tojson-member" aria-label="Permalink for Section 10.3.4"></a>
</div>
    
    <p>
      When <a data-link-type="idl" data-lt="PressureRecord" href="#dom-pressurerecord" class="internalDFN" id="ref-for-dom-pressurerecord-9"><code>PressureRecord</code></a>.<a data-link-type="idl" href="#dom-pressurerecord-tojson" class="internalDFN" id="ref-for-dom-pressurerecord-tojson-2"><code>toJSON</code></a> is called, run <cite><a data-matched-text="[[[WebIDL]]]" href="webidl.spec.whatwg.org/">Web IDL Standard</a></cite>'s <a data-link-type="dfn|abstract-op" data-type="dfn" href="webidl.spec.whatwg.org/#default-tojson-steps">default toJSON steps</a>.
    </p>
  </section>
</section>

<section data-dfn-for="PressureObserverOptions" id="the-pressureobserveroptions-dictionary"><div class="header-wrapper">
<h3 id="x10-4-the-pressureobserveroptions-dictionary">
<bdi class="secno">10.4 </bdi>The <dfn data-export="" data-dfn-type="dictionary" id="dom-pressureobserveroptions" data-idl="dictionary" data-title="PressureObserverOptions" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>PressureObserverOptions</code></dfn> dictionary</h3>
<a class="self-link" href="#the-pressureobserveroptions-dictionary" aria-label="Permalink for Section 10.4"></a>
</div>
  
  <pre class="idl def" id="webidl-210462491"><span class="idlHeader"><a class="self-link" href="#webidl-210462491">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-pressureobserveroptions" data-title="PressureObserverOptions">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-pressureobserveroptions" id="ref-for-dom-pressureobserveroptions-2"><code>PressureObserverOptions</code></a> {<span data-idl="" class="idlMember" id="idl-def-pressureobserveroptions-sampleinterval" data-title="sampleInterval" data-dfn-for="PressureObserverOptions">
  [<span class="extAttr"><a data-type="extended-attribute" href="webidl.spec.whatwg.org/#EnforceRange">EnforceRange</a></span>]<span class="idlType"> <a data-link-type="idl" data-type="interface" href="webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-pressureobserveroptions-sampleinterval" id="ref-for-dom-pressureobserveroptions-sampleinterval-1"><code>sampleInterval</code></a> = 0;</span>
};</span></code></pre>
  <section id="the-sampleinterval-member"><div class="header-wrapper">
<h4 id="x10-4-1-the-sampleinterval-member">
<bdi class="secno">10.4.1 </bdi>The <dfn data-export="" data-dfn-type="dict-member" id="dom-pressureobserveroptions-sampleinterval" data-idl="field" data-title="sampleInterval" data-dfn-for="PressureObserverOptions" data-type="unsigned long" tabindex="0" aria-haspopup="dialog"><code>sampleInterval</code></dfn> member</h4>
<a class="self-link" href="#the-sampleinterval-member" aria-label="Permalink for Section 10.4.1"></a>
</div>
    
    <p>
      The <a data-link-type="idl" href="#dom-pressureobserveroptions-sampleinterval" class="internalDFN" id="ref-for-dom-pressureobserveroptions-sampleinterval-2"><code>sampleInterval</code></a> member represents the <a data-link-type="dfn|abstract-op" href="#dfn-requested-sampling-interval" class="internalDFN" id="ref-for-dfn-requested-sampling-interval-4">requested sampling interval</a> expressed in milliseconds. 
    </p>
    <div class="note" role="note" id="issue-container-generatedID-7">
<div role="heading" class="note-title marker" id="h-note-7" aria-level="5"><span>Note</span></div>
<aside class="">
      <p>
        A <a data-link-type="dfn|abstract-op" href="#dfn-user-agent" class="internalDFN" id="ref-for-dfn-user-agent-14">user agent</a> might not be able to respect the requested sampling interval. For more information
        consult <a href="#sampling-and-reporting-rate" data-matched-text="[[[#sampling-and-reporting-rate]]]" class="sec-ref"><bdi class="secno">3.3 </bdi>Sampling and Reporting Rate</a>.
      </p>
    </aside>
</div>
  </section>
</section>

<section id="life-cycle"><div class="header-wrapper">
<h3 id="x10-5-life-cycle-and-garbage-collection">
<bdi class="secno">10.5 </bdi>Life-cycle and garbage collection</h3>
<a class="self-link" href="#life-cycle" aria-label="Permalink for Section 10.5"></a>
</div>
  
  <p>
    Each <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/webappapis.html#global-object">global object</a> has a
    strong reference to <a data-link-type="dfn|abstract-op" href="#dfn-registered-observer" class="internalDFN" id="ref-for-dfn-registered-observer-5">registered observers</a> in their <a data-link-type="dfn|abstract-op" href="#dfn-registered-observer-list" class="internalDFN" id="ref-for-dfn-registered-observer-list-7">registered observer list</a>
    (one per source).
  </p>
  <div class="note" role="note" id="issue-container-generatedID-8">
<div role="heading" class="note-title marker" id="h-note-8" aria-level="4"><span>Note</span></div>
<aside class="">
    <p>
      A <a data-link-type="idl" data-lt="PressureObserver" href="#dom-pressureobserver" class="internalDFN" id="ref-for-dom-pressureobserver-14"><code>PressureObserver</code></a> is observing a <var data-type="PressureSource">source</var> if it
      exists in the <a data-link-type="dfn|abstract-op" href="#dfn-registered-observer-list" class="internalDFN" id="ref-for-dfn-registered-observer-list-8">registered observer list</a>, modified by invocations of
      <a data-link-type="idl" data-lt="observe()" href="#dom-pressureobserver-observe" class="internalDFN" id="ref-for-dom-pressureobserver-observe-4"><code>observe</code></a><code>()</code>,
      <a data-link-type="idl" data-lt="unobserve()" href="#dom-pressureobserver-unobserve" class="internalDFN" id="ref-for-dom-pressureobserver-unobserve-3"><code>unobserve</code></a><code>()</code>
      and <a data-link-type="idl" data-lt="disconnect()" href="#dom-pressureobserver-disconnect" class="internalDFN" id="ref-for-dom-pressureobserver-disconnect-3"><code>disconnect</code></a><code>()</code>.
    </p>
    <p>
      This means that a <a data-link-type="idl" data-lt="PressureObserver" href="#dom-pressureobserver" class="internalDFN" id="ref-for-dom-pressureobserver-15"><code>PressureObserver</code></a> object <var data-type="PressureObserver">observer</var> will
      remain alive (thus not be garbage collection) until both of these conditions hold:
      </p>
<ul>
        <li>
          There are no scripting references to the <var data-type="PressureObserver">observer</var>.
        </li>
        <li>
          The <var data-type="PressureObserver">observer</var> is not observing any <var data-type="PressureSource">source</var>.
        </li>
      </ul>
    <p></p>
    <p>
      <a href="#cb-observer-example" data-matched-text="[[[#cb-observer-example]]]" class="box-ref">Example<bdi> 2</bdi></a> contains an example of how to use the
      <a data-link-type="idl" data-lt="disconnect()" href="#dom-pressureobserver-disconnect" class="internalDFN" id="ref-for-dom-pressureobserver-disconnect-4"><code>disconnect</code></a><code>()</code> (or any other <a data-link-type="idl" data-lt="PressureObserver" href="#dom-pressureobserver" class="internalDFN" id="ref-for-dom-pressureobserver-16"><code>PressureObserver</code></a>
      method) from the observer callback.
    </p>
  </aside>
</div>
</section>

<section id="processing-model"><div class="header-wrapper">
<h3 id="x10-6-processing-model">
<bdi class="secno">10.6 </bdi>Processing Model</h3>
<a class="self-link" href="#processing-model" aria-label="Permalink for Section 10.6"></a>
</div>
  
  <p>
    This section outlines the steps the user agent must take when implementing the specification.
  </p>
  <section id="supporting-algorithms"><div class="header-wrapper">
<h4 id="x10-6-1-supporting-algorithms">
<bdi class="secno">10.6.1 </bdi>Supporting algorithms</h4>
<a class="self-link" href="#supporting-algorithms" aria-label="Permalink for Section 10.6.1"></a>
</div>
    
    <p>
      The <dfn id="dfn-reset-observation-window" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">reset observation window</dfn> steps given the argument <var data-type="PressureObserver">observer</var>, are as follows:
      </p>
<ul>
        <li>
          set <var data-type="PressureObserver">observer</var>.<a data-link-type="attribute" data-lt="[[ObservationWindow]]" href="#dfn-observationwindow" class="internalDFN" id="ref-for-dfn-observationwindow-1"><code>[[ObservationWindow]]</code></a> to an <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#implementation-defined">implementation-defined</a> randomized integer value in
          milliseconds within an <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#implementation-defined">implementation-defined</a> range.
        </li>
        <li>
          set <var data-type="PressureObserver">observer</var>.<a data-link-type="attribute" data-lt="[[MaxChangesThreshold]]" href="#dfn-maxchangesthreshold" class="internalDFN" id="ref-for-dfn-maxchangesthreshold-1"><code>[[MaxChangesThreshold]]</code></a> to an <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#implementation-defined">implementation-defined</a> randomized integer
          value of maximum allowed changes within the <var>observationWindow</var> within an <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#implementation-defined">implementation-defined</a> range.
        </li>
        <li>
          set <var data-type="PressureObserver">observer</var>.<a data-link-type="attribute" data-lt="[[PenaltyDuration]]" href="#dfn-penaltyduration" class="internalDFN" id="ref-for-dfn-penaltyduration-1"><code>[[PenaltyDuration]]</code></a> to an <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#implementation-defined">implementation-defined</a> randomized integer value
          in milliseconds, within an <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#implementation-defined">implementation-defined</a> range.
        </li>
        <li>
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list-empty">Empty</a> the observer.<a data-link-type="attribute" data-lt="[[ChangesCountMap]]" href="#dfn-changescountmap" class="internalDFN" id="ref-for-dfn-changescountmap-1"><code>[[ChangesCountMap]]</code></a> map.
        </li>
      </ul>
      Run the <a data-link-type="dfn|abstract-op" href="#dfn-reset-observation-window" class="internalDFN" id="ref-for-dfn-reset-observation-window-4">reset observation window</a> steps and start a timer to re-run the steps when the observer.<a data-link-type="attribute" data-lt="[[ObservationWindow]]" href="#dfn-observationwindow" class="internalDFN" id="ref-for-dfn-observationwindow-2"><code>[[ObservationWindow]]</code></a>
      time has passed, using different randomized values.
    <p></p>
    <p>
      </p>
<div class="note" role="note" id="issue-container-generatedID-9">
<div role="heading" class="note-title marker" id="h-note-9" aria-level="5"><span>Note</span></div>
<aside class="">
        Readings are available for <a data-link-type="dfn|abstract-op" data-type="dfn" href="dom.spec.whatwg.org/#concept-document">documents</a> (incl. <a data-link-type="dfn|abstract-op" data-type="element" href="html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element">iframes</a> and popup windows) and workers,
        matching the following criteria:
        <ul>
          <li>
            They are <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/document-sequences.html#fully-active">fully active</a> <a data-link-type="dfn|abstract-op" data-type="dfn" href="dom.spec.whatwg.org/#concept-document">documents</a>, or
            they are <a href="html.spec.whatwg.org/multipage/workers.html#active-needed-worker">active needed workers</a>.
          </li>
          <li>
            Their <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> is <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/browsers.html#same-origin">same origin</a> with the <a data-link-type="dfn|abstract-op" data-lt="node document" data-type="dfn" href="dom.spec.whatwg.org/#concept-node-document">document</a> containing the
            <a href="html.spec.whatwg.org/multipage/interaction.html#focused">focused</a> <a data-link-type="dfn|abstract-op" data-type="dfn" href="dom.spec.whatwg.org/#concept-node">node</a>, or an
            <a href="w3c.github.io/picture-in-picture/#initiators-of-active-picture-in-picture-sessions">
            initiator of an active Picture-in-Picture session</a>, or the browsing <a data-link-type="dfn|abstract-op" data-type="dfn" href="www.w3.org/TR/mediacapture-streams/#context-is-capturing">context is capturing</a>,
            including microphone, camera and display.
          </li>
        </ul>
      </aside>
</div>
      <p>
        To determine the <dfn id="dfn-owning-document-set" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">owning document set</dfn> for a <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">relevant global object</a> <var>relevantGlobal</var>:
        </p>
<ol>
          <li>
            Let <var>owningDocumentSet</var> be an empty <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#ordered-set">set</a>.
          </li>
          <li>
            If <var>relevantGlobal</var> is <a data-link-type="idl" data-lt="Window" data-type="interface" href="html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a>, then <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#set-append">append</a> <var>relevantGlobal</var>'s <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window">associated document</a> to <var>owningDocumentSet</var>.
          </li>
          <li>
            Otherwise, <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list-iterate">for each</a> <var>owner</var> in <a data-link-type="idl" data-lt="WorkerGlobalScope" data-type="interface" href="html.spec.whatwg.org/multipage/workers.html#workerglobalscope"><code>WorkerGlobalScope</code></a> <var>relevantGlobal</var>'s <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/workers.html#concept-WorkerGlobalScope-owner-set">owner set</a>:
            <ol>
              <li>
                If <var>owner</var> is a <a data-link-type="idl" data-lt="Document" data-type="interface" href="dom.spec.whatwg.org/#document"><code>Document</code></a>, then <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#set-append">append</a> <var>owner</var> to <var>owningDocumentSet</var>.
              </li>
              <li>
                If <var>owner</var> is a <a data-link-type="idl" data-lt="WorkerGlobalScope" data-type="interface" href="html.spec.whatwg.org/multipage/workers.html#workerglobalscope"><code>WorkerGlobalScope</code></a>, set <var>owningDocumentSet</var> to the <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#set-union">union</a> of
                <var>owningDocumentSet</var> and <var>owner</var>'s <a data-link-type="dfn|abstract-op" href="#dfn-owning-document-set" class="internalDFN" id="ref-for-dfn-owning-document-set-2">owning document set</a>.
              </li>
            </ol>
            </li>
<li>
              Return <var>owningDocumentSet</var>.
            </li>
          
        </ol>
      <p></p>
      <p>
        The <dfn id="dfn-document-has-implicit-focus" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">document has implicit focus</dfn> steps given the argument <var data-type="Document">document</var>, are as follows:
        </p>
<ol>
          <li>
            If <var data-type="Document">document</var> is not <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/document-sequences.html#fully-active">fully active</a>, return false.
          </li>
          <li>
            Let <var>relevantGlobal</var> be <var data-type="Document">document</var>'s <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">relevant global object</a>.
          </li>
          <li>
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list-iterate">For each</a> <var>origin</var> in
            <a href="w3c.github.io/picture-in-picture/#initiators-of-active-picture-in-picture-sessions">
              initiators of active Picture-in-Picture sessions</a>:
            <ol>
              <li>
                If <var>relevantGlobal</var>'s <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object">relevant settings object</a>'s <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> is <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/browsers.html#same-origin">same origin</a> with <var>origin</var>, return true.
              </li>
            </ol>
          </li>
          <li>
            If <var>relevantGlobal</var>'s <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">browsing context</a> is <a data-link-type="dfn|abstract-op" data-lt="context is capturing" data-type="dfn" href="www.w3.org/TR/mediacapture-streams/#context-is-capturing">capturing</a>, return true.
          </li>
          <li>
            Let <var>topLevelBC</var> be <var>relevantGlobal</var>'s <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">browsing context</a>'s <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/document-sequences.html#top-level-browsing-context">top-level browsing context</a>.
          </li>
          <li>
            If <var>topLevelBC</var> does not have <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/interaction.html#system-focus">system focus</a>, return false.
          </li>
          <li>
            Let <var>focusedDocument</var> be the <var>topLevelBC</var>'s
            <a href="html.spec.whatwg.org/multipage/interaction.html#currently-focused-area-of-a-top-level-browsing-context">
              currently focused area</a>'s <a data-link-type="dfn|abstract-op" data-type="dfn" href="dom.spec.whatwg.org/#concept-node-document">node document</a>.
          </li>
          <li>
            If <var>relevantGlobal</var>'s <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object">relevant settings object</a>'s <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a> is <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/browsers.html#same-origin">same origin</a> with
            <var>focusedDocument</var>'s <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/browsers.html#concept-origin">origin</a>, return true.
          </li>
          <li>
            Otherwise, return false.
          </li>
        </ol>
      <p></p>
      <p>
        The <dfn id="dfn-may-receive-data" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">may receive data</dfn> steps given the argument <var data-type="PressureObserver">observer</var> are as follows:
        </p>
<ol>
          <li>
            Let <var>relevantGlobal</var> be <var data-type="PressureObserver">observer</var>'s <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">relevant global object</a>.
          </li>
          <li>
            If <var>relevantGlobal</var> is a <a data-link-type="idl" data-lt="Window" data-type="interface" href="html.spec.whatwg.org/multipage/nav-history-apis.html#window"><code>Window</code></a> object:
            <ol>
              <li>
                Return the result of running <a data-link-type="dfn|abstract-op" href="#dfn-document-has-implicit-focus" class="internalDFN" id="ref-for-dfn-document-has-implicit-focus-1">document has implicit focus</a> with <var>relevantGlobal</var>'s <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window">associated Document</a>.
              </li>
            </ol>
          </li>
          <li>
            If <var>relevantGlobal</var> is a <a data-link-type="idl" data-lt="WorkerGlobalScope" data-type="interface" href="html.spec.whatwg.org/multipage/workers.html#workerglobalscope"><code>WorkerGlobalScope</code></a> object:
            <ol>
              <li>Let <var>owningDocuments</var> be <var>relevantGlobal</var>'s <a data-link-type="dfn|abstract-op" href="#dfn-owning-document-set" class="internalDFN" id="ref-for-dfn-owning-document-set-3">owning document set</a>.</li>
              <li>
                <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list-iterate">For each</a> <var data-type="Document">document</var> in <var>owningDocuments</var>:
                <ol>
                  <li>
                    If the result of running <a data-link-type="dfn|abstract-op" href="#dfn-document-has-implicit-focus" class="internalDFN" id="ref-for-dfn-document-has-implicit-focus-2">document has implicit focus</a> with <var data-type="Document">document</var> is true,
                    return true.
                  </li>
                  <li>
                    Otherwise, <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#iteration-continue">continue</a>.
                  </li>
                </ol>
              </li>
            </ol>
          </li>
          <li>
            Return false.
          </li>
        </ol>
        <div class="note" role="note" id="issue-container-generatedID-10">
<div role="heading" class="note-title marker" id="h-note-10" aria-level="5"><span>Note</span></div>
<aside class="">
          As there might be multiple observers, each with a different <a data-link-type="dfn|abstract-op" href="#dfn-requested-sampling-rate" class="internalDFN" id="ref-for-dfn-requested-sampling-rate-5">requested sampling rate</a>, the underlying
          <a data-link-type="dfn|abstract-op" href="#dfn-platform-collector" class="internalDFN" id="ref-for-dfn-platform-collector-15">platform collector</a> will need to use a <a data-link-type="dfn|abstract-op" href="#dfn-sampling-rate" class="internalDFN" id="ref-for-dfn-sampling-rate-6">sampling rate</a> that fulfills all these requirements. This also
          means that not every data sample from the <a data-link-type="dfn|abstract-op" href="#dfn-platform-collector" class="internalDFN" id="ref-for-dfn-platform-collector-16">platform collector</a> needs to be delivered to each active
          observer.
        </aside>
</div>
      <p></p>
      The <dfn id="dfn-passes-rate-test" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">passes rate test</dfn> steps given the argument <var data-type="PressureObserver">observer</var>,
      <var data-type="PressureSource">source</var> and <var data-type="DOMHighResTimeStamp">timestamp</var>, are as follows:
      <ol>
        <li>
          If <var data-type="PressureObserver">observer</var>.<a data-link-type="attribute" data-lt="[[LastRecordMap]]" href="#dfn-lastrecordmap" class="internalDFN" id="ref-for-dfn-lastrecordmap-3"><code>[[LastRecordMap]]</code></a>[<var data-type="PressureSource">source</var>] does not <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#map-exists">exist</a>, return true.
        </li>
        <li>
          Let <var data-type="PressureRecord">record</var> be <var data-type="PressureObserver">observer</var>.<a data-link-type="attribute" data-lt="[[LastRecordMap]]" href="#dfn-lastrecordmap" class="internalDFN" id="ref-for-dfn-lastrecordmap-4"><code>[[LastRecordMap]]</code></a>[<var data-type="PressureSource">source</var>].
        </li>
        <li>
          Let <var>sampleInterval</var> be <var data-type="PressureObserver">observer</var>.<a data-link-type="attribute" data-lt="[[SampleInterval]]" href="#dfn-sampleinterval" class="internalDFN" id="ref-for-dfn-sampleinterval-2"><code>[[SampleInterval]]</code></a>.
        </li>
        <li>
          Let <var data-type="DOMHighResTimeStamp">timeDeltaMilliseconds</var> = <var data-type="DOMHighResTimeStamp">timestamp</var> - <var data-type="PressureRecord">record</var>.<a data-link-type="attribute" data-lt="[[Time]]" href="#dfn-time" class="internalDFN" id="ref-for-dfn-time-2"><code>[[Time]]</code></a>.
        </li>
        <li>
          If <var data-type="DOMHighResTimeStamp">timeDeltaMilliseconds</var> ≥ <var>sampleInterval</var>, return true, otherwise return false.
        </li>
      </ol>
      The <dfn id="dfn-has-change-in-data" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">has change in data</dfn> steps given the argument <var data-type="PressureObserver">observer</var>, <var data-type="PressureSource">source</var>,
      <var data-type="PressureState">state</var>, are as follows:
      <ol>
        <li>
          If <var data-type="PressureObserver">observer</var>.<a data-link-type="attribute" data-lt="[[LastRecordMap]]" href="#dfn-lastrecordmap" class="internalDFN" id="ref-for-dfn-lastrecordmap-5"><code>[[LastRecordMap]]</code></a>[<var data-type="PressureSource">source</var>] does not <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#map-exists">exist</a>, return true.
        </li>
        <li>
          Let <var data-type="PressureRecord">record</var> be <var data-type="PressureObserver">observer</var>.<a data-link-type="attribute" data-lt="[[LastRecordMap]]" href="#dfn-lastrecordmap" class="internalDFN" id="ref-for-dfn-lastrecordmap-6"><code>[[LastRecordMap]]</code></a>[<var data-type="PressureSource">source</var>].
        </li>
        <li>
          If <var data-type="PressureRecord">record</var>.<a data-link-type="attribute" data-lt="[[State]]" href="#dfn-state" class="internalDFN" id="ref-for-dfn-state-2"><code>[[State]]</code></a> is not equal to <var data-type="PressureState">state</var> and <a data-link-type="dfn|abstract-op" href="#dfn-change-in-contributing-factors-is-substantial" class="internalDFN" id="ref-for-dfn-change-in-contributing-factors-is-substantial-2">change in contributing factors is substantial</a>
          returns true, return true.
        </li>
        <li>
          Return false.
        </li>
      </ol>
      The <dfn id="dfn-passes-rate-obfuscation-test" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">passes rate obfuscation test</dfn> steps given the argument <var data-type="PressureObserver">observer</var>,
      <var data-type="PressureSource">source</var>, are as follows:
      <ol>
        <li>
          Increment observer.<a data-link-type="attribute" data-lt="[[ChangesCountMap]]" href="#dfn-changescountmap" class="internalDFN" id="ref-for-dfn-changescountmap-2"><code>[[ChangesCountMap]]</code></a>[<var data-type="PressureSource">source</var>].
        </li>
        <li>
          Return observer.<a data-link-type="attribute" data-lt="[[ChangesCountMap]]" href="#dfn-changescountmap" class="internalDFN" id="ref-for-dfn-changescountmap-3"><code>[[ChangesCountMap]]</code></a>[<var data-type="PressureSource">source</var>]
          ≤ observer.<a data-link-type="attribute" data-lt="[[MaxChangesThreshold]]" href="#dfn-maxchangesthreshold" class="internalDFN" id="ref-for-dfn-maxchangesthreshold-2"><code>[[MaxChangesThreshold]]</code></a>.
        </li>
      </ol>
    <p></p>
  </section>
  <section id="data-delivery"><div class="header-wrapper">
<h4 id="x10-6-2-data-delivery">
<bdi class="secno">10.6.2 </bdi>Data delivery</h4>
<a class="self-link" href="#data-delivery" aria-label="Permalink for Section 10.6.2"></a>
</div>
    
    <p>
      <a data-link-type="dfn|abstract-op" href="#dfn-data-delivery" class="internalDFN" id="ref-for-dfn-data-delivery-6">Data delivery</a> from a <a data-link-type="dfn|abstract-op" href="#dfn-platform-collector" class="internalDFN" id="ref-for-dfn-platform-collector-17">platform collector</a> can be activate and deactivated in an
      <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#implementation-defined">implementation-defined</a> manner per <a data-link-type="dfn|abstract-op" href="#dfn-source-types" class="internalDFN" id="ref-for-dfn-source-types-14">source type</a> and <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/webappapis.html#global-object">global object</a>.
    </p>
    <div class="note" role="note" id="issue-container-generatedID-11">
<div role="heading" class="note-title marker" id="h-note-11" aria-level="5"><span>Note</span></div>
<aside class="">
      It is recommended that the <a data-link-type="dfn|abstract-op" href="#dfn-platform-collector" class="internalDFN" id="ref-for-dfn-platform-collector-18">platform collector</a> suspends low-level data polling
      when there is no active <a data-link-type="dfn|abstract-op" href="#dfn-data-delivery" class="internalDFN" id="ref-for-dfn-data-delivery-7">data delivery</a> to any <a data-link-type="idl" data-lt="PressureObserver" href="#dom-pressureobserver" class="internalDFN" id="ref-for-dom-pressureobserver-17"><code>PressureObserver</code></a> <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">relevant global object</a>.
    </aside>
</div>
    <p>
      The <dfn id="dfn-data-delivery" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">data delivery</dfn> steps that are run when
      an <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#implementation-defined">implementation-defined</a> <var>data</var> sample of <a data-link-type="dfn|abstract-op" href="#dfn-source-types" class="internalDFN" id="ref-for-dfn-source-types-15">source type</a> <var data-type="PressureSource">source</var> is
      obtained from <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/webappapis.html#global-object">global object</a> <var>relevantGlobal</var>'s <a data-link-type="dfn|abstract-op" href="#dfn-platform-collector" class="internalDFN" id="ref-for-dfn-platform-collector-19">platform collector</a>,
      are as follows:
      </p>
<ol>
        <li>
          Let <var data-type="PressureSource">source</var> be the <a data-link-type="dfn|abstract-op" href="#dfn-source-types" class="internalDFN" id="ref-for-dfn-source-types-16">source type</a> of the <var>data</var> sample.
        </li>
        <li>
          Let <var data-type="PressureState">state</var> be an <a data-link-type="dfn|abstract-op" href="#dfn-adjusted-pressure-state" class="internalDFN" id="ref-for-dfn-adjusted-pressure-state-1">adjusted pressure state</a> given <var>data</var> and <var data-type="PressureSource">source</var>.
        </li>
        <li>
          Let <var data-type="DOMHighResTimeStamp">timestamp</var> be a timestamp representing the time the <var>data</var> was
          obtained from the <var>relevantGlobal</var>'s <a data-link-type="dfn|abstract-op" href="#dfn-platform-collector" class="internalDFN" id="ref-for-dfn-platform-collector-20">platform collector</a>.
        <div class="note" role="note" id="issue-container-generatedID-12">
<div role="heading" class="note-title marker" id="h-note-12" aria-level="5"><span>Note</span></div>
<aside class="">
          The <var>data</var> sample and mapping between <var>data</var> sample, and <a data-link-type="dfn|abstract-op" href="#dfn-pressure-states" class="internalDFN" id="ref-for-dfn-pressure-states-6">pressure states</a>,
          is <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#implementation-defined">implementation-defined</a> and may use many different metrics. For instance,
          for CPU, it might consider processor frequency and utilization, as well
          as thermal conditions.
        </aside>
</div>
        </li>
        <li>
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list-iterate">For each</a> <var data-type="PressureObserver">observer</var> in <var>relevantGlobal</var>'s
          <a data-link-type="dfn|abstract-op" href="#dfn-registered-observer-list" class="internalDFN" id="ref-for-dfn-registered-observer-list-9">registered observer list</a> for <var data-type="PressureSource">source</var>:
          <ol>
            <li>
              If running <a data-link-type="dfn|abstract-op" href="#dfn-may-receive-data" class="internalDFN" id="ref-for-dfn-may-receive-data-1">may receive data</a> with <var data-type="PressureObserver">observer</var>
              returns false, <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#iteration-continue">continue</a>.
            </li>
            <li>
              If running <a data-link-type="dfn|abstract-op" href="#dfn-passes-rate-test" class="internalDFN" id="ref-for-dfn-passes-rate-test-1">passes rate test</a> with <var data-type="PressureObserver">observer</var>, <var data-type="PressureSource">source</var> and <var data-type="DOMHighResTimeStamp">timestamp</var>
              returns false, <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#iteration-continue">continue</a>.
            </li>
            <li>
              If running <a data-link-type="dfn|abstract-op" href="#dfn-has-change-in-data" class="internalDFN" id="ref-for-dfn-has-change-in-data-1">has change in data</a> with <var data-type="PressureObserver">observer</var>, <var data-type="PressureSource">source</var> and <var data-type="PressureState">state</var>
              returns false, <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#iteration-continue">continue</a>.
            </li>
            <li>
              Let <var data-type="PressureRecord">record</var> be a new <a data-link-type="idl" data-lt="PressureRecord" href="#dom-pressurerecord" class="internalDFN" id="ref-for-dom-pressurerecord-10"><code>PressureRecord</code></a> object with its
              <a data-link-type="attribute" data-lt="[[Source]]" href="#dfn-source" class="internalDFN" id="ref-for-dfn-source-2"><code>[[Source]]</code></a> set to <var data-type="PressureSource">source</var>,
              <a data-link-type="attribute" data-lt="[[State]]" href="#dfn-state" class="internalDFN" id="ref-for-dfn-state-3"><code>[[State]]</code></a> set to <var data-type="PressureState">state</var>
              and <a data-link-type="attribute" data-lt="[[Time]]" href="#dfn-time" class="internalDFN" id="ref-for-dfn-time-3"><code>[[Time]]</code></a> set to <var data-type="DOMHighResTimeStamp">timestamp</var>.
            </li>
            <li>
              If <var data-type="PressureObserver">observer</var>.<a data-link-type="attribute" data-lt="[[AfterPenaltyRecordMap]]" href="#dfn-afterpenaltyrecordmap" class="internalDFN" id="ref-for-dfn-afterpenaltyrecordmap-3"><code>[[AfterPenaltyRecordMap]]</code></a>[source] <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#map-exists">exists</a>:
              <ol>
                <li>
                  Set <var data-type="PressureObserver">observer</var>.<a data-link-type="attribute" data-lt="[[AfterPenaltyRecordMap]]" href="#dfn-afterpenaltyrecordmap" class="internalDFN" id="ref-for-dfn-afterpenaltyrecordmap-4"><code>[[AfterPenaltyRecordMap]]</code></a>[<var data-type="PressureSource">source</var>] to <var data-type="PressureRecord">record</var>.
                </li>
                <li>
                  <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#iteration-continue">Continue</a>.
                </li>
              </ol>
            </li>
            <li>
              If running <a data-link-type="dfn|abstract-op" href="#dfn-passes-rate-obfuscation-test" class="internalDFN" id="ref-for-dfn-passes-rate-obfuscation-test-1">passes rate obfuscation test</a> with <var data-type="PressureObserver">observer</var> and <var data-type="PressureSource">source</var> returns false:
              <ol>
                <li>
                  Set <var data-type="PressureObserver">observer</var>.<a data-link-type="attribute" data-lt="[[AfterPenaltyRecordMap]]" href="#dfn-afterpenaltyrecordmap" class="internalDFN" id="ref-for-dfn-afterpenaltyrecordmap-5"><code>[[AfterPenaltyRecordMap]]</code></a>[<var data-type="PressureSource">source</var>] to <var data-type="PressureRecord">record</var>.
                </li>
                <li>
                  Set <var data-type="PressureObserver">observer</var>.<a data-link-type="attribute" data-lt="[[ChangesCountMap]]" href="#dfn-changescountmap" class="internalDFN" id="ref-for-dfn-changescountmap-4"><code>[[ChangesCountMap]]</code></a>[<var data-type="PressureSource">source</var>] to 0.
                </li>
                <li>
                  Create timer of <var data-type="PressureObserver">observer</var>.<a data-link-type="attribute" data-lt="[[PenaltyDuration]]" href="#dfn-penaltyduration" class="internalDFN" id="ref-for-dfn-penaltyduration-2"><code>[[PenaltyDuration]]</code></a> duration with the following callback:
                  <ol>
                    <li>
                      If <var data-type="PressureObserver">observer</var>.<a data-link-type="attribute" data-lt="[[AfterPenaltyRecordMap]]" href="#dfn-afterpenaltyrecordmap" class="internalDFN" id="ref-for-dfn-afterpenaltyrecordmap-6"><code>[[AfterPenaltyRecordMap]]</code></a>[source] <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#map-exists">exists</a>:
                      <ol>
                        <li>
                          Let <var data-type="PressureRecord">record</var> be <var data-type="PressureObserver">observer</var>.<a data-link-type="attribute" data-lt="[[AfterPenaltyRecordMap]]" href="#dfn-afterpenaltyrecordmap" class="internalDFN" id="ref-for-dfn-afterpenaltyrecordmap-7"><code>[[AfterPenaltyRecordMap]]</code></a>[<var data-type="PressureSource">source</var>].
                        </li>
                        <li>
                          <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#map-remove">Remove</a> <var data-type="PressureObserver">observer</var>.<a data-link-type="attribute" data-lt="[[AfterPenaltyRecordMap]]" href="#dfn-afterpenaltyrecordmap" class="internalDFN" id="ref-for-dfn-afterpenaltyrecordmap-8"><code>[[AfterPenaltyRecordMap]]</code></a>[<var data-type="PressureSource">source</var>].
                        </li>
                        <li>
                          Run <a data-link-type="dfn|abstract-op" href="#dfn-queue-a-record" class="internalDFN" id="ref-for-dfn-queue-a-record-1">queue a record</a> with <var data-type="PressureObserver">observer</var>, <var data-type="PressureSource">source</var>, <var data-type="PressureRecord">record</var>.
                        </li>
                      </ol>
                    </li>
                  </ol>
                </li>
                <li>
                  <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#iteration-continue">Continue</a>.
                </li>
              </ol>
            </li>
            <li>
              Run <a data-link-type="dfn|abstract-op" href="#dfn-queue-a-record" class="internalDFN" id="ref-for-dfn-queue-a-record-2">queue a record</a> with <var data-type="PressureObserver">observer</var>, <var data-type="PressureSource">source</var>, <var data-type="PressureRecord">record</var>.
            </li>
          </ol>
        </li>
      </ol>
    <p></p>
  </section>
  <section id="queue-a-pressurerecord"><div class="header-wrapper">
<h4 id="x10-6-3-queue-a-pressurerecord">
<bdi class="secno">10.6.3 </bdi>Queue a PressureRecord</h4>
<a class="self-link" href="#queue-a-pressurerecord" aria-label="Permalink for Section 10.6.3"></a>
</div>
    
    <p>
      To <dfn id="dfn-queue-a-record" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">queue a record</dfn> given the arguments <var data-type="PressureObserver">observer</var>,
      <var data-type="PressureSource">source</var>, <var data-type="PressureRecord">record</var>,
      run these steps:
    </p>
    <ol class="algorithm">
      <li>
        If <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list-size">size</a> of <var data-type="PressureObserver">observer</var>.<a data-link-type="attribute" data-lt="[[QueuedRecords]]" href="#dfn-queuedrecords" class="internalDFN" id="ref-for-dfn-queuedrecords-5"><code>[[QueuedRecords]]</code></a> is greater than
        <a data-link-type="dfn|abstract-op" href="#dfn-max-queued-records" class="internalDFN" id="ref-for-dfn-max-queued-records-1">max queued records</a>, then <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list-remove">remove</a> the first <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list-item">item</a>.
      </li>
<li>
        <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list-append">Append</a> <var data-type="PressureRecord">record</var> to <var data-type="PressureObserver">observer</var>.<a data-link-type="attribute" data-lt="[[QueuedRecords]]" href="#dfn-queuedrecords" class="internalDFN" id="ref-for-dfn-queuedrecords-6"><code>[[QueuedRecords]]</code></a>.
      </li>
      <li>
        Set <var data-type="PressureObserver">observer</var>.<a data-link-type="attribute" data-lt="[[LastRecordMap]]" href="#dfn-lastrecordmap" class="internalDFN" id="ref-for-dfn-lastrecordmap-7"><code>[[LastRecordMap]]</code></a>[<var data-type="PressureSource">source</var>] to <var data-type="PressureRecord">record</var>.
      </li>
      <li>
        <a data-link-type="dfn|abstract-op" href="#dfn-queue-a-pressure-observer-task" class="internalDFN" id="ref-for-dfn-queue-a-pressure-observer-task-1">Queue a pressure observer task</a> with <var data-type="PressureObserver">observer</var>'s <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">relevant global object</a>.
      </li>
    </ol>
  </section>
  <section id="queue-a-pressure-observer-task"><div class="header-wrapper">
<h4 id="x10-6-4-queue-a-pressure-observer-task">
<bdi class="secno">10.6.4 </bdi>Queue a Pressure Observer Task</h4>
<a class="self-link" href="#queue-a-pressure-observer-task" aria-label="Permalink for Section 10.6.4"></a>
</div>
    
    <p>
      The <dfn id="dfn-pressureobserver-task-source" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">PressureObserver task source</dfn> is a <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/webappapis.html#task-source">task source</a> used for scheduling tasks to <a href="#notify-observers" data-matched-text="[[[#notify-observers]]]" class="sec-ref"><bdi class="secno">10.6.5 </bdi>Notify Pressure Observers</a>.
    </p>
    <p>
      To <dfn id="dfn-queue-a-pressure-observer-task" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">queue a pressure observer task</dfn> given <var>relevantGlobal</var> as input, run these steps:
    </p>
    <ol class="algorithm">
      <li>
        If the <var>relevantGlobal</var>'s <a data-link-type="dfn|abstract-op" href="#dfn-pressure-observer-task-queued" class="internalDFN" id="ref-for-dfn-pressure-observer-task-queued-1">pressure observer task queued</a> is true, then return.
      </li>
      <li>
        Set the <var>relevantGlobal</var>'s <a data-link-type="dfn|abstract-op" href="#dfn-pressure-observer-task-queued" class="internalDFN" id="ref-for-dfn-pressure-observer-task-queued-2">pressure observer task queued</a> to true.
      </li>
      <li>
        <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task">Queue a global task</a> on <a data-link-type="dfn|abstract-op" href="#dfn-pressureobserver-task-source" class="internalDFN" id="ref-for-dfn-pressureobserver-task-source-3">PressureObserver task source</a> with <var>relevantGlobal</var> to <a data-link-type="dfn|abstract-op" href="#dfn-notify-pressure-observers" class="internalDFN" id="ref-for-dfn-notify-pressure-observers-1">notify pressure observers</a>.
      </li>
    </ol>
  </section>
  <section id="notify-observers"><div class="header-wrapper">
<h4 id="x10-6-5-notify-pressure-observers">
<bdi class="secno">10.6.5 </bdi>Notify Pressure Observers</h4>
<a class="self-link" href="#notify-observers" aria-label="Permalink for Section 10.6.5"></a>
</div>
    
    <p>
      To <dfn id="dfn-notify-pressure-observers" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">notify pressure observers</dfn> given <var>relevantGlobal</var> as input, run these steps:
    </p>
    <ol class="algorithm">
      <li>
        Set <var>relevantGlobal</var>'s <a data-link-type="dfn|abstract-op" href="#dfn-pressure-observer-task-queued" class="internalDFN" id="ref-for-dfn-pressure-observer-task-queued-3">pressure observer task queued</a> to false.
      </li>
      <li>
        Let <var>notifySet</var> be a new <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#ordered-set">set</a> of all <a data-link-type="dfn|abstract-op" href="#dfn-observer" class="internalDFN" id="ref-for-dfn-observer-3">observers</a> in
        <var>relevantGlobal</var>’s <a data-link-type="dfn|abstract-op" href="#dfn-registered-observer-list" class="internalDFN" id="ref-for-dfn-registered-observer-list-10">registered observer lists</a>.
      </li>
      <li>
        <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list-iterate">For each</a> <var data-type="PressureObserver">observer</var> of <var>notifySet</var>:
        <ol>
          <li>
            Let <var>records</var> be a <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list-clone">clone</a> of <var data-type="PressureObserver">observer</var>.<a data-link-type="attribute" data-lt="[[QueuedRecords]]" href="#dfn-queuedrecords" class="internalDFN" id="ref-for-dfn-queuedrecords-7"><code>[[QueuedRecords]]</code></a>.
          </li>
          <li>
            <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list-empty">Empty</a> <var data-type="PressureObserver">observer</var>.<a data-link-type="attribute" data-lt="[[QueuedRecords]]" href="#dfn-queuedrecords" class="internalDFN" id="ref-for-dfn-queuedrecords-8"><code>[[QueuedRecords]]</code></a>.
          </li>
          <li>
            If <var>records</var> is not <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list-empty">empty</a>, then invoke <var data-type="PressureObserver">observer</var>.<a data-link-type="attribute" data-lt="[[Callback]]" href="#dfn-callback" class="internalDFN" id="ref-for-dfn-callback-2"><code>[[Callback]]</code></a>
            with <var>records</var> and <var data-type="PressureObserver">observer</var>. If this throws an exception, catch it, and <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/webappapis.html#report-the-exception">report the exception</a>.
          </li>
        </ol>
      </li>
    </ol>
  </section>
  <section id="handling-change-of-fully-active"><div class="header-wrapper">
<h4 id="x10-6-6-handling-change-of-fully-active">
<bdi class="secno">10.6.6 </bdi>Handling change of fully active</h4>
<a class="self-link" href="#handling-change-of-fully-active" aria-label="Permalink for Section 10.6.6"></a>
</div>
    
    <p>
      When a <a data-link-type="idl" data-lt="Document" data-type="interface" href="dom.spec.whatwg.org/#document"><code>Document</code></a> <var>document</var> is no longer <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/document-sequences.html#fully-active">fully active</a>,
      deactivate <a data-link-type="dfn|abstract-op" href="#dfn-data-delivery" class="internalDFN" id="ref-for-dfn-data-delivery-8">data delivery</a> of data of all <a data-link-type="dfn|abstract-op" href="#dfn-supported-source-types" class="internalDFN" id="ref-for-dfn-supported-source-types-5">supported source types</a> to <var>document</var>'s <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">relevant global object</a>.
    </p>
    <p>
      When a worker with associated <a data-link-type="idl" data-lt="WorkerGlobalScope" data-type="interface" href="html.spec.whatwg.org/multipage/workers.html#workerglobalscope"><code>WorkerGlobalScope</code></a> <var>relevantGlobal</var> is no longer
      an <a href="html.spec.whatwg.org/multipage/workers.html#active-needed-worker">
      active needed workers</a>,
      deactivate <a data-link-type="dfn|abstract-op" href="#dfn-data-delivery" class="internalDFN" id="ref-for-dfn-data-delivery-9">data delivery</a> of data of all <a data-link-type="dfn|abstract-op" href="#dfn-supported-source-types" class="internalDFN" id="ref-for-dfn-supported-source-types-6">supported source types</a> to <var>relevantGlobal</var>.
    </p>
    <p>
      When a <a data-link-type="idl" data-lt="Document" data-type="interface" href="dom.spec.whatwg.org/#document"><code>Document</code></a> <var>document</var> becomes <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/document-sequences.html#fully-active">fully active</a>,
      for each non-<a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list-empty">empty</a> <a data-link-type="dfn|abstract-op" href="#dfn-registered-observer-list" class="internalDFN" id="ref-for-dfn-registered-observer-list-11">registered observer list</a> associated the <a data-link-type="dfn|abstract-op" href="#dfn-source-types" class="internalDFN" id="ref-for-dfn-source-types-17">source type</a> <var>source</var>,
      activate <a data-link-type="dfn|abstract-op" href="#dfn-data-delivery" class="internalDFN" id="ref-for-dfn-data-delivery-10">data delivery</a> of <var>source</var> data to <var>document</var>'s <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">relevant global object</a>.
    </p>
    <p>
      When a worker with associated <a data-link-type="idl" data-lt="WorkerGlobalScope" data-type="interface" href="html.spec.whatwg.org/multipage/workers.html#workerglobalscope"><code>WorkerGlobalScope</code></a> <var>relevantGlobal</var> becomes
      an <a href="html.spec.whatwg.org/multipage/workers.html#active-needed-worker">
      active needed workers</a>,
      for each non-<a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#list-empty">empty</a> <a data-link-type="dfn|abstract-op" href="#dfn-registered-observer-list" class="internalDFN" id="ref-for-dfn-registered-observer-list-12">registered observer list</a> associated the <a data-link-type="dfn|abstract-op" href="#dfn-source-types" class="internalDFN" id="ref-for-dfn-source-types-18">source type</a> <var>source</var>,
      activate <a data-link-type="dfn|abstract-op" href="#dfn-data-delivery" class="internalDFN" id="ref-for-dfn-data-delivery-11">data delivery</a> of <var>source</var> data to <var>document</var>'s <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">relevant global object</a>.
    </p>
    <div class="note" role="note" id="issue-container-generatedID-13">
<div role="heading" class="note-title marker" id="h-note-13" aria-level="5"><span>Note</span></div>
<aside class="">
      When a document is no longer <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/document-sequences.html#fully-active">fully active</a> (or associated workers no longer
      <a href="html.spec.whatwg.org/multipage/workers.html#active-needed-worker">
      active needed workers</a>), like when
      entering the back/forward cache, or "BFCache" for short, then no events are send to the pressure observers
      (see <a data-link-type="dfn|abstract-op" href="#dfn-may-receive-data" class="internalDFN" id="ref-for-dfn-may-receive-data-2">may receive data</a>)
      in accordance with <a href="www.w3.org/TR/design-principles/#listen-fully-active">
      Web Platform Design Principles: Listen for changes to fully active status</a>. This means that the
      system can safely deactivate <a data-link-type="dfn|abstract-op" href="#dfn-data-delivery" class="internalDFN" id="ref-for-dfn-data-delivery-12">data delivery</a> from the associated <a data-link-type="dfn|abstract-op" href="#dfn-platform-collector" class="internalDFN" id="ref-for-dfn-platform-collector-21">platform collector</a>,
      but also that it needs to be re-activated when the opposite happens.
    </aside>
</div>
  </section>

  <section id="unload-observers"><div class="header-wrapper">
<h4 id="x10-6-7-handle-unloading-document-and-closing-of-workers">
<bdi class="secno">10.6.7 </bdi>Handle unloading document and closing of workers</h4>
<a class="self-link" href="#unload-observers" aria-label="Permalink for Section 10.6.7"></a>
</div>
    
    <p>
      When a worker with associated <a data-link-type="idl" data-lt="WorkerGlobalScope" data-type="interface" href="html.spec.whatwg.org/multipage/workers.html#workerglobalscope"><code>WorkerGlobalScope</code></a> <var>relevantGlobal</var>,
      once <var>relevantGlobal</var>'s <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/workers.html#dom-workerglobalscope-closing">closing</a> flag is set to true,
      deactivate <a data-link-type="dfn|abstract-op" href="#dfn-data-delivery" class="internalDFN" id="ref-for-dfn-data-delivery-13">data delivery</a> for all <a data-link-type="dfn|abstract-op" href="#dfn-supported-source-types" class="internalDFN" id="ref-for-dfn-supported-source-types-7">supported source types</a> to <var>relevantGlobal</var>.
    </p>
    <p>
      As one of the <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/document-lifecycle.html#unloading-document-cleanup-steps">unloading document cleanup steps</a> given <a data-link-type="idl" data-lt="Document" data-type="interface" href="dom.spec.whatwg.org/#document"><code>Document</code></a> <var>document</var>,
      deactivate <a data-link-type="dfn|abstract-op" href="#dfn-data-delivery" class="internalDFN" id="ref-for-dfn-data-delivery-14">data delivery</a> for all <a data-link-type="dfn|abstract-op" href="#dfn-supported-source-types" class="internalDFN" id="ref-for-dfn-supported-source-types-8">supported source types</a> to <var>document</var>'s <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global">relevant global object</a>.
    </p>
  </section>
</section>
</section> 

<section id="security-and-privacy-considerations"><div class="header-wrapper">
<h2 id="x11-security-and-privacy-considerations">
<bdi class="secno">11. </bdi>
    Security and privacy considerations
  </h2>
<a class="self-link" href="#security-and-privacy-considerations" aria-label="Permalink for Section 11."></a>
</div>
  

  <section id="types-of-privacy-and-security-threats"><div class="header-wrapper">
<h3 id="x11-1-types-of-privacy-and-security-threats">
<bdi class="secno">11.1 </bdi>Types of privacy and security threats</h3>
<a class="self-link" href="#types-of-privacy-and-security-threats" aria-label="Permalink for Section 11.1"></a>
</div>
    
    <div class="note" role="note" id="issue-container-generatedID-14">
<div role="heading" class="note-title marker" id="h-note-14" aria-level="4"><span>Note</span></div>
<div class="">
      The Working Group will list any known attack vectors, both theoretical and real-world,
      in this section.
    </div>
</div>
    <section id="timing-attacks"><div class="header-wrapper">
<h4 id="x11-1-1-timing-attacks">
<bdi class="secno">11.1.1 </bdi>Timing attacks</h4>
<a class="self-link" href="#timing-attacks" aria-label="Permalink for Section 11.1.1"></a>
</div>
    <p>
      It may be possible to identify users across non-<a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/browsers.html#same-origin">same origin</a> sites if unique
      or very precise values can be accessed at the same time by sites not sharing
      origin.

      This attack is mitigated by <a href="#data-minimization" data-matched-text="[[[#data-minimization]]]" class="sec-ref"><bdi class="secno">11.2.1 </bdi>Data minimization</a>, <a href="#rate-limiting-change-notifications" data-matched-text="[[[#rate-limiting-change-notifications]]]" class="sec-ref"><bdi class="secno">11.2.2 </bdi>Rate-limiting change notifications</a>,
      and <a href="#same-origin-restriction" data-matched-text="[[[#same-origin-restriction]]]" class="sec-ref"><bdi class="secno">11.2.8 </bdi>Same-origin restriction</a>.
    </p>
    </section><section id="cross-site-covert-channel"><div class="header-wrapper">
<h4 id="x11-1-2-cross-site-covert-channel">
<bdi class="secno">11.1.2 </bdi>Cross-site covert channel</h4>
<a class="self-link" href="#cross-site-covert-channel" aria-label="Permalink for Section 11.1.2"></a>
</div>
    <p>
      In computer security a covert channel creates a capability to transfer information between processes
      that are not supposed to be allowed to communicate. In modern multi-process web engines in the generic
      case each window or tab resides in its own process (documents that have the <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/browsers.html#same-origin">same origin</a> or sites that
      have the <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/browsers.html#same-site">same site</a> typically share the same process). Using this API it may be possible to create a
      cross-site covert channel C where a site A on one tab first broadcasts to the channel C after having
      manipulated the state of the CPU. Next a site B (that is not same site with site A) on another tab reads
      the broadcasted data from the channel C by using this API to learn when the state of the CPU has changed.
      This process is repeated as long as the scripts run on both the sites A and B.
    </p>
    <p>
      This attack is mitigated by <a href="#rate-limiting-change-notifications" data-matched-text="[[[#rate-limiting-change-notifications]]]" class="sec-ref"><bdi class="secno">11.2.2 </bdi>Rate-limiting change notifications</a>, <a href="#rate-obfuscation" data-matched-text="[[[#rate-obfuscation]]]" class="sec-ref"><bdi class="secno">11.2.3 </bdi>Rate obfuscation</a> and
      <a href="#break-calibration" data-matched-text="[[[#break-calibration]]]" class="sec-ref"><bdi class="secno">11.2.6 </bdi>Break calibration</a>. Implementers are advised to consider all these mitigations for long-running scripts.
    </p>
    <div class="note" role="note" id="issue-container-generatedID-15">
<div role="heading" class="note-title marker" id="h-note-15" aria-level="4"><span>Note</span></div>
<div class="">
      The longer the scripts run the more information can be transmitted using the proposed cross-site covert channel.
      For example, if a user is on a video conferencing site and another long-running site that allows for more
      information to be transferred compared to a regular browsing scenario. On the other hand, a workload such as
      a video conferencing session will typically exert sustained pressure on the CPU that makes it harder to
      manipulate the pressure state in a predictive manner.
    </div>
</div>
    </section><section id="targeted-de-anonymization-attacks"><div class="header-wrapper">
<h4 id="x11-1-3-targeted-de-anonymization-attacks">
<bdi class="secno">11.1.3 </bdi>Targeted de-anonymization attacks</h4>
<a class="self-link" href="#targeted-de-anonymization-attacks" aria-label="Permalink for Section 11.1.3"></a>
</div>
    <p>
      Targeted de-anonymization attacks constitute a critical class of threats that jeopardize a user's anonymity.
      These attacks allow a malicious or partially compromised website (referred to as the “malicious site”) to
      ascertain whether a website visitor possesses a specific public identifier, such as an email address or a
      social media handle.
    </p>
    <p>
      While anonymity may be a luxury for some, for certain individuals, it is far more than that—it is a matter
      of survival. Consider for instance those who engage in political protests, work as journalists covering
      sensitive topics, etc.
    </p>
    <p>
      As an example, an attacker can privately share a resource with the target for instance using a public
      resource sharing service (“victim site”), and then measure side-effects (indicating successful access)
      on loading the resource via side-channels. If the logged in visitor can access the embedded resource
      successfully, that indicates that the current visit is indeed the intended target.
    </p>
    <p>
      Specifically, exposing reliable information about the total CPU pressure can let an attacking site
      understand if a target of a cross-origin navigation (e.g. an iframe or pop-up window from another site)
      performed a CPU-intensive operation.
    </p>
    <p>
      Techniques such as <a href="en.wikipedia.org/wiki/Pop-up_ad#Pop-under_ads">pop-under</a> and
      <a href="www.usenix.org/system/files/sec22-zaheri.pdf">tab-under</a> can be used to hide the loading
      from the user.
    </p>
    <p>
      One possible attack is that the malicious website opens e.g., a popup to a resource on a victim site
      to which the user is logged in (e.g. a video streaming site or online document editor) pointing to a
      resource shared with specific users.
    </p>
    <p>
      Assuming that loading the resource puts increased pressure on the CPU, this would create a side-channel
      reveals to the attacking site if the user is logged into an account with access to the resource,
      deanonymizing the user.
    </p>
    <p>
      Given that modern CPUs recover quickly from high pressure, one possible mitigation strategy could be to
      temporarily disable readings for a few seconds after loading popup and iframe content.
    </p>
  </section></section>

  <section id="mitigation-strategies"><div class="header-wrapper">
<h3 id="x11-2-mitigation-strategies">
<bdi class="secno">11.2 </bdi>Mitigation strategies</h3>
<a class="self-link" href="#mitigation-strategies" aria-label="Permalink for Section 11.2"></a>
</div>
    

    <div class="note" role="note" id="issue-container-generatedID-16">
<div role="heading" class="note-title marker" id="h-note-16" aria-level="4"><span>Note</span></div>
<div class="">
      This section gives a high-level view into mitigation strategies applicable to this specification.
      The normative definitions of these mitigations are integrated into the respective algorithms of this specification.
      Implementers are advised to consider the
      <a href="www.w3.org/2001/tag/doc/private-browsing-modes/#features-supporting-private-browsing">TAG guidance
      on private browsing modes</a> when implementing the mitigations defined in this specification.
    </div>
</div>

    <section id="data-minimization"><div class="header-wrapper">
<h4 id="x11-2-1-data-minimization">
<bdi class="secno">11.2.1 </bdi>Data minimization</h4>
<a class="self-link" href="#data-minimization" aria-label="Permalink for Section 11.2.1"></a>
</div>
    <p>
      This specification adheres to the generic
      <a href="www.w3.org/TR/privacy-principles/#data-minimization">data minimization</a> principles
      to limit exposure of data related to low-level details of the underlying platform to the minimum required to
      address its high-value use cases. This includes consideration for limiting exposure of
      <a href="w3ctag.github.io/design-principles/#device-ids">identifying information about devices</a>.
    </p>
    <p>
      The specific application of data minimization principles in the context of this specification
      are discussed in <a href="#rate-limiting-change-notifications" data-matched-text="[[[#rate-limiting-change-notifications]]]" class="sec-ref"><bdi class="secno">11.2.2 </bdi>Rate-limiting change notifications</a> and <a href="#same-origin-restriction" data-matched-text="[[[#same-origin-restriction]]]" class="sec-ref"><bdi class="secno">11.2.8 </bdi>Same-origin restriction</a>.
      </p></section><section id="rate-limiting-change-notifications"><div class="header-wrapper">
<h4 id="x11-2-2-rate-limiting-change-notifications">
<bdi class="secno">11.2.2 </bdi>Rate-limiting change notifications</h4>
<a class="self-link" href="#rate-limiting-change-notifications" aria-label="Permalink for Section 11.2.2"></a>
</div>
        
        <p>
          By rate-limiting the delivery of the pressure state information we remove the
          attacker's ability to observe the precise time when a value transitions between two states.
        </p>
        <p>
          More precisely, once the pressure observer is activated, it will be
          called once with initial values, and then is called when the values change.
          The subsequent calls will be rate-limited. When the callback is
          called, the most recent value is reported.
        </p>
        <p>
          The specification will recommend a rate limit of at most one call per second
          for the active window, and one call per 10 seconds for all other windows. We
          will also recommend that the call timings are jittered across origins.
        </p>
        <p>
          These measures benefit the user's privacy, by reducing the risk of
          identifying a device across multiple origins. The rate-limiting also benefits
          the user's security, by making it difficult to use this API for timing attacks.
          Last, rate-limiting change callbacks places an upper bound on the performance
          overhead of this API.
        </p>
        <p>
          Rate limiting can be implemented in the user agent, but it might also be
          possible to simply change the polling/sampling rate of the underlying hardware
          counters, if not accessed via a higher level framework.
        </p>
      </section>
      <section id="rate-obfuscation"><div class="header-wrapper">
<h4 id="x11-2-3-rate-obfuscation">
<bdi class="secno">11.2.3 </bdi>Rate obfuscation</h4>
<a class="self-link" href="#rate-obfuscation" aria-label="Permalink for Section 11.2.3"></a>
</div>
        
        <p>
          The specification requires implementing the <dfn id="dfn-rate-obfuscation" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">rate obfuscation</dfn> mitigation
          to keep track of the number of pressure changes over an <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#implementation-defined">implementation-defined</a>
          sliding observation window and
          set a flag if an <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#implementation-defined">implementation-defined</a> threshold for the number of pressure
          changes is exceeded. Similarly, it is also recommended for the implementation to
          observe any abnormal activity such as a high number of pressure state changes
          spanning across multiple states, and set this flag similarly.
        </p>
        <p>
          If this flag is set, the implementation is recommended to give the pressure observer
          a penalty during which it will not be able to inform scripts of changes in its
          pressure state as it normally would. The duration of this penalty is
          <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#implementation-defined">implementation-defined</a> and it is recommended to be randomized.
          When <a data-link-type="dfn|abstract-op" href="#dfn-notify-pressure-observers" class="internalDFN" id="ref-for-dfn-notify-pressure-observers-2">notify pressure observers</a> resumes operation after the penalty, it only
          reports the latest pressure state and disregards any interim state information
          received from the platform collector during this penalty.
        </p>
      </section>
      <section id="rate-obfuscation-normative-parameters"><div class="header-wrapper">
<h4 id="x11-2-4-rate-obfuscation-normative-parameters">
<bdi class="secno">11.2.4 </bdi>Rate obfuscation normative parameters</h4>
<a class="self-link" href="#rate-obfuscation-normative-parameters" aria-label="Permalink for Section 11.2.4"></a>
</div>
        
        <p>
          Based on implementation experience, implementers must use:
          </p>
<ul>
            <li>
              a range in between 50 and 100 changes for PressureObserver's <a data-link-type="attribute" data-lt="[[MaxChangesThreshold]]" href="#dfn-maxchangesthreshold" class="internalDFN" id="ref-for-dfn-maxchangesthreshold-3"><code>[[MaxChangesThreshold]]</code></a> internal slot.
            </li>
            <li>
              a range in between 5000 milliseconds and 10000 milliseconds for PressureObserver's <a data-link-type="attribute" data-lt="[[PenaltyDuration]]" href="#dfn-penaltyduration" class="internalDFN" id="ref-for-dfn-penaltyduration-3"><code>[[PenaltyDuration]]</code></a> internal slot.
            </li>
          </ul>
          <div class="note" role="note" id="issue-container-generatedID-17">
<div role="heading" class="note-title marker" id="h-note-17" aria-level="5"><span>Note</span></div>
<aside class="">
            These values are subject to change and are updated based on further implementation experience and research findings.
          </aside>
</div>
        <p>
      </p></section>
      <section id="rate-obfuscation-non-normative-parameters"><div class="header-wrapper">
<h4 id="x11-2-5-rate-obfuscation-non-normative-parameters">
<bdi class="secno">11.2.5 </bdi>Rate obfuscation non-normative parameters</h4>
<a class="self-link" href="#rate-obfuscation-non-normative-parameters" aria-label="Permalink for Section 11.2.5"></a>
</div>
      
        <p><i>This section is non-normative.</i></p>
        <p>
          Based on implementation experience, implementers are advised to use:
          </p>
<ul>
            <li>
              a range in between 300000 milliseconds (5 minutes) and 600000 milliseconds (10 minutes) for PressureObserver's
              <a data-link-type="attribute" data-lt="[[ObservationWindow]]" href="#dfn-observationwindow" class="internalDFN" id="ref-for-dfn-observationwindow-3"><code>[[ObservationWindow]]</code></a> internal slot.
            </li>
          </ul>
          <div class="note" role="note" id="issue-container-generatedID-18">
<div role="heading" class="note-title marker" id="h-note-18" aria-level="5"><span>Note</span></div>
<aside class="">
            These values are subject to change and are updated based on further implementation experience and research findings.
          </aside>
</div>
        <p></p>
      </section>
      <section id="break-calibration"><div class="header-wrapper">
<h4 id="x11-2-6-break-calibration">
<bdi class="secno">11.2.6 </bdi>Break calibration</h4>
<a class="self-link" href="#break-calibration" aria-label="Permalink for Section 11.2.6"></a>
</div>
        
        <p>
          In a calibration process an attacker tries to manipulate the CPU so that this
          API would report a transition into a certain pressure state with the highest
          probability in response to the pressure exerted by the fabricated workload.
          This <dfn id="dfn-break-calibration" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">break calibration</dfn> mitigation solution can slow down or prevent this calibration process
          from succeeding by slightly changing at runtime the <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#implementation-defined">implementation-defined</a>
          low-level hardware metrics that contribute to these pressure state transitions.
          Even if the initial calibration would succeed, its results will be invalidated
          at runtime when this mitigation is running continuously. Any attempts to recalibrate
          will similarly be mitigated against.
        </p>
        <div class="note" role="note" id="issue-container-generatedID-19">
<div role="heading" class="note-title marker" id="h-note-19" aria-level="5"><span>Note</span></div>
<aside class="">
          Modern browsers throttle background tabs using <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#implementation-defined">implementation-defined</a>
          heuristics in order to reduce resource usage. For example, after a period of
          no user interaction a background tab can be throttled that will influence
          the global pressure state of the system. This built-in feature of modern
          browsers further improves the effectiveness of the break calibration
          mitigation.
        </aside>
</div>
      </section>
      <section id="break-calibration-parameters"><div class="header-wrapper">
<h4 id="x11-2-7-break-calibration-parameters">
<bdi class="secno">11.2.7 </bdi>Break calibration parameters</h4>
<a class="self-link" href="#break-calibration-parameters" aria-label="Permalink for Section 11.2.7"></a>
</div>
        
        <p><i>This section is non-normative.</i></p>
        <p>
          Based on implementation experience, implementers are advised to apply the mitigation
          to a randomized time value within a range between 120000 milliseconds (2 minutes) and 240000 milliseconds (4 minutes).
        </p>
        <div class="note" role="note" id="issue-container-generatedID-20">
<div role="heading" class="note-title marker" id="h-note-20" aria-level="5"><span>Note</span></div>
<aside class="">
          These values are subject to change and are updated based on further implementation experience and research findings.
        </aside>
</div>
      </section>
      <section id="same-origin-restriction"><div class="header-wrapper">
<h4 id="x11-2-8-same-origin-restriction">
<bdi class="secno">11.2.8 </bdi>Same-origin restriction</h4>
<a class="self-link" href="#same-origin-restriction" aria-label="Permalink for Section 11.2.8"></a>
</div>
        
        <p>
          By <em>default</em> data delivery is restricted to documents served from the same-origin as an
          <a href="w3c.github.io/picture-in-picture/#initiators-of-active-picture-in-picture-sessions">
          initiator of an active picture-in-picture-session</a>,
          documents <a data-link-type="dfn|abstract-op" data-lt="context is capturing" data-type="dfn" href="www.w3.org/TR/mediacapture-streams/#context-is-capturing">capturing</a>
          or the document with <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/interaction.html#system-focus">system focus</a>, if any.
        </p>
        <p>
          The documents qualifying for data delivery, under the above rules, can delegate it to documents in <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/document-sequences.html#child-navigable">child navigables</a>.
        </p>
        <p>
          The feature can be extended to third-party contexts such as iframes only by a
          <a href="www.w3.org/TR/permissions-policy/#permissions-policy-declared-policy">declared policy</a>.
        </p>
        <p>
          Shared workers can be shared across documents, such as top level document and those associated iframes. If one
          of the documents in the <a data-link-type="dfn|abstract-op" data-type="dfn" href="html.spec.whatwg.org/multipage/workers.html#concept-WorkerGlobalScope-owner-set">owner set</a> passes the above data delivery requirements, the shared worker will
          qualify for data delivery. This means that the embedded iframe is able to pass along the data to the embedding document.
        </p>
      </section>
    <p></p>
  </section>
</section>

<section id="accessibility-considerations"><div class="header-wrapper">
<h2 id="x12-accessibility-considerations">
<bdi class="secno">12. </bdi>
    Accessibility considerations
  </h2>
<a class="self-link" href="#accessibility-considerations" aria-label="Permalink for Section 12."></a>
</div>
  
  <p>
    The Compute Pressure API is focused on improving the user experience. There are two ways in which applications that build on the API can positively impact accessibility.
  </p>
  <ol>
    <li>
      Considering users' access needs when making decisions based on information gathered using the API.
    </li>
    <li>
      Designing and making user interfaces based on information gained from the API with accessibility in mind.
    </li>
  </ol>
  <p>
    As a consumer of the API, it's important to consider both of these opportunities. Here are some examples:
    </p>
<ul>
      <li>
        <strong>Decision:</strong> In a video conferencing scenario, there may be multiple video streams. The system may determines that it needs to drop certain streams in order to conserve resources. If one of the video streams comes from a sign language interpreter, then that stream must be prioritized over others, so that the user can still understand the conversation. In practice, this could be simply implemented by allowing the user to "pin" a certain stream, and ensuring that that pinned stream is never automatically dropped by the system.
      </li>
      <li>
        <strong>User Interface:</strong>
        <ul>
          <li>
            A simple load-level meter, in which the current usage level bucket is indicated on the screen. This information must be conveyed using more than just color, so that people who cannot perceive color can still perceive the information. A symbol could be used in conjunction with color. Text could also be used in conjunction with both shape and color.
          </li>
          <li>
            Some applications may present a notification to the user when some functionality is restricted due to compute pressure. These notifications may take the form of "toast" messages, in which case care must be taken to ensure that people using assistive technologies (including screen readers) can be made aware of the notification, and dismiss it, without unduly interrupting their workflow.
          </li>
        </ul>

      </li>
    </ul>
</section>


<section id="examples" class="informative"><div class="header-wrapper">
<h2 id="x13-examples">
<bdi class="secno">13. </bdi>
    Examples
  </h2>
<a class="self-link" href="#examples" aria-label="Permalink for Section 13."></a>
</div>
<p><em>This section is non-normative.</em></p>
  
  <div class="example" id="cb-observer-example">
        <div class="marker">
    <a class="self-link" href="#cb-observer-example">Example<bdi> 2</bdi></a><span class="example-title">: How to access observer from callback</span>
  </div> <pre aria-busy="false"><code class="hljs js"><span class="hljs-keyword">const</span> samples = [];

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pressureChange</span>(<span class="hljs-params">records, observer</span>) </span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> record <span class="hljs-keyword">of</span> records) {
    samples.push(record.state);

    <span class="hljs-comment">// We only want 20 samples.</span>
    <span class="hljs-keyword">if</span> (samples.length == <span class="hljs-number">20</span>) {
      observer.disconnect();
      <span class="hljs-keyword">return</span>;
    }
  }
}

<span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> PressureObserver(pressureChange);
observer.observe(<span class="hljs-string">"cpu"</span>);</code></pre>
      </div>
  <p>
    In the following example we want to lower the number of concurrent video streams when the
    pressure becomes critical. For the sake of simplicity we only consider this one state.
  </p>
  <p>
    As lowering the amount of streams might not result in exiting the critical state,
    or at least not immediately, we use a strategy where we lower one stream at the time
    every 30 seconds while still in the critical state.
  </p>
  <p>
    We accomplish this by making sure the callback is called at least once every 30 seconds,
    or when the state actually changes. When the state changes we reset the interval timer.
  </p>
  <div class="example" id="example-how-to-adjust-the-number-of-video-feeds-based-on-cpu-pressure">
        <div class="marker">
    <a class="self-link" href="#example-how-to-adjust-the-number-of-video-feeds-based-on-cpu-pressure">Example<bdi> 3</bdi></a><span class="example-title">: How to adjust the number of video feeds based on CPU pressure</span>
  </div> <pre aria-busy="false"><code class="hljs js"><span class="hljs-keyword">let</span> timerId = -<span class="hljs-number">1</span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pressureChange</span>(<span class="hljs-params">records</span>) </span>{
  <span class="hljs-comment">// Clear timer every time we are called, either by an actual state change,</span>
  <span class="hljs-comment">// or when called by setTimeout (see below).</span>
  <span class="hljs-keyword">if</span> (timerId &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-built_in">clearTimeout</span>(timerId);
  }

  <span class="hljs-comment">// When entering critical state, we want to recheck every 30sec if we are</span>
  <span class="hljs-comment">// still in critical state and if so, further reduce our concurrent streams.</span>
  <span class="hljs-comment">// For this reason we create a timer for 30 seconds that will call us back</span>
  <span class="hljs-comment">// with the last result in there were no change.</span>
  <span class="hljs-keyword">const</span> lastRecordArray = [records.at(records.length - <span class="hljs-number">1</span>)];
  timerId = <span class="hljs-built_in">setTimeout</span>(pressureChange.bind(<span class="hljs-built_in">this</span>, lastRecordArray), <span class="hljs-number">30_000</span>);

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> record <span class="hljs-keyword">of</span> records) {
    <span class="hljs-keyword">if</span> (record.state == <span class="hljs-string">"critical"</span>) {
      <span class="hljs-keyword">let</span> streamsCount = getStreamsCount();
      setStreamsCount(streamsCount--);
    }
  }
}

<span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> PressureObserver(pressureChange);
observer.observe(<span class="hljs-string">"cpu"</span>);</code></pre>
      </div>
  <p>
    In the following example, we want to demonstrate the usage of <a data-link-type="idl" data-lt="takeRecords()" href="#dom-pressureobserver-takerecords" class="internalDFN" id="ref-for-dom-pressureobserver-takerecords-3"><code>takeRecords</code></a><code>()</code>,
    by retrieving the remaining <var>records</var> accumulated since the the callback was last
    invoked.
  </p>
  <p>
    It is recommended to do so before <a data-link-type="idl" data-lt="disconnect()" href="#dom-pressureobserver-disconnect" class="internalDFN" id="ref-for-dom-pressureobserver-disconnect-5"><code>disconnect</code></a><code>()</code>,
    otherwise <a data-link-type="idl" data-lt="disconnect()" href="#dom-pressureobserver-disconnect" class="internalDFN" id="ref-for-dom-pressureobserver-disconnect-6"><code>disconnect</code></a><code>()</code> will clear them and they will be lost forever.
  </p>
  <p>
    For example, we might want to measure the pressure during a benchmarking workload, and thus
    want pressure telemetry for the exact duration of the workload. This means disconnecting all
    observers immediately when the task is completed, and manually requesting any pending pressure
    telemetry up to this point that might not have been delivered yet as part of the event loop cycle.
  </p>
  <div class="example" id="example-how-to-handle-all-state-changes-right-up-until-disconnect">
        <div class="marker">
    <a class="self-link" href="#example-how-to-handle-all-state-changes-right-up-until-disconnect">Example<bdi> 4</bdi></a><span class="example-title">: How to handle all state changes right up until disconnect</span>
  </div> <pre aria-busy="false"><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">logWorkloadStatistics</span>(<span class="hljs-params">records</span>) </span>{
  <span class="hljs-comment">// do something with records.</span>
}

<span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> PressureObserver(logWorkloadStatistics);
observer.observe(<span class="hljs-string">"cpu"</span>);

<span class="hljs-comment">// Read pending state change records, otherwise they will be cleared</span>
<span class="hljs-comment">// when we disconnect.</span>
<span class="hljs-keyword">const</span> records = observer.takeRecords();
logWorkloadStatistics(records);

observer.disconnect();</code></pre>
      </div>
  <p>
    In the following example, we show how to tell the observer to stop watching a specific
    <var data-type="PressureSource">source</var> by invoking <a data-link-type="idl" data-lt="unobserve()" href="#dom-pressureobserver-unobserve" class="internalDFN" id="ref-for-dom-pressureobserver-unobserve-4"><code>unobserve</code></a><code>()</code>
    with <var data-type="PressureSource">source</var>.
  </p>
  <div class="note" role="note" id="issue-container-generatedID-21">
<div role="heading" class="note-title marker" id="h-note-21" aria-level="3"><span>Note</span></div>
<aside class="">
    The example uses 'gpu', which could be a potential future addition to the specification. It aims to show
    that the API is extentable to support other types of pressure in the future
  </aside>
</div>
  <div class="example" id="example-how-to-tell-the-observer-to-stop-watching-for-state-changes-for-a-specific-source">
        <div class="marker">
    <a class="self-link" href="#example-how-to-tell-the-observer-to-stop-watching-for-state-changes-for-a-specific-source">Example<bdi> 5</bdi></a><span class="example-title">: How to tell the observer to stop watching for state changes for a specific source</span>
  </div> <pre aria-busy="false"><code class="hljs js"><span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> PressureObserver(<span class="hljs-function"><span class="hljs-params">records</span> =&gt;</span> { <span class="hljs-comment">/* do something with records. */</span> });

observer.observe(<span class="hljs-string">"cpu"</span>);
observer.observe(<span class="hljs-string">"gpu"</span>);

<span class="hljs-comment">// Callback now gets called whenever the pressure state changes for 'cpu' or 'gpu'.</span>

observer.unobserve(<span class="hljs-string">"gpu"</span>);

<span class="hljs-comment">// Callback now only gets called whenever the pressure state changes for 'cpu'.</span></code></pre>
      </div>
  <p>
    In the following example, we show how to tell the observer to stop watching for any
    state changes by calling <a data-link-type="idl" data-lt="disconnect()" href="#dom-pressureobserver-disconnect" class="internalDFN" id="ref-for-dom-pressureobserver-disconnect-7"><code>disconnect</code></a><code>()</code>. Calling
    <a data-link-type="idl" data-lt="disconnect()" href="#dom-pressureobserver-disconnect" class="internalDFN" id="ref-for-dom-pressureobserver-disconnect-8"><code>disconnect</code></a><code>()</code> will stop observing all sources observed
    by previous <a data-link-type="idl" data-lt="observe()" href="#dom-pressureobserver-observe" class="internalDFN" id="ref-for-dom-pressureobserver-observe-5"><code>observe</code></a><code>()</code> calls.
  </p>
  <p>
    Additionally it will clear all pending records collected since the last callback was invoked.
  </p>
  <div class="example" id="example-how-to-tell-the-observer-to-stop-watching-for-any-state-changes">
        <div class="marker">
    <a class="self-link" href="#example-how-to-tell-the-observer-to-stop-watching-for-any-state-changes">Example<bdi> 6</bdi></a><span class="example-title">: how to tell the observer to stop watching for any state changes</span>
  </div> <pre aria-busy="false"><code class="hljs js"><span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> PressureObserver(<span class="hljs-function"><span class="hljs-params">records</span> =&gt;</span> { <span class="hljs-comment">// do something with records. });</span>
observer.observe(<span class="hljs-string">"cpu"</span>);
observer.observe(<span class="hljs-string">"gpu"</span>);

<span class="hljs-comment">// some time later...</span>

observer.disconnect();

<span class="hljs-comment">// records will be an empty array, because of the previous disconnect().</span>
<span class="hljs-keyword">const</span> records = observer.takeRecords();</code></pre>
      </div>
</section>
<section id="conformance"><div class="header-wrapper">
<h2 id="x14-conformance">
<bdi class="secno">14. </bdi>Conformance</h2>
<a class="self-link" href="#conformance" aria-label="Permalink for Section 14."></a>
</div>
<p>As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this specification are non-normative. Everything else in this specification is normative.</p>
<p>
        The key words <em class="rfc2119">MAY</em>, <em class="rfc2119">MUST</em>, and <em class="rfc2119">RECOMMENDED</em> in this document
        are to be interpreted as described in
        <a href="datatracker.ietf.org/doc/html/bcp14">BCP 14</a>
        [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8174" title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
        when, and only when, they appear in all capitals, as shown here.
      </p>
  <p>
    This specification defines conformance criteria for a single product: a
    <dfn data-plurals="user agents" id="dfn-user-agent" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">user agent</dfn> that implements the interfaces that it contains.
  </p>
</section>
<section class="appendix informative" id="acknowledgments"><div class="header-wrapper">
<h2 id="a-acknowledgments">
<bdi class="secno">A. </bdi>Acknowledgments</h2>
<a class="self-link" href="#acknowledgments" aria-label="Permalink for Appendix A."></a>
</div>
<p><em>This section is non-normative.</em></p> 
  <p>
    Many thanks for valuable feedback and advice from
    Anssi Kostiainen,
    Asaf Yaffe,
    Chen Xing,
    Evan Shrubsole,
    François Beaufort,
    Jan Gora,
    Jesse Barnes,
    Joshua Bell,
    Kamila Hasanbega,
    Matt Menke,
    Moh Haghighat,
    Nicolás Peña Moreno,
    Opal Voravootivat,
    Paul Jensen,
    Peter Djeu,
    Raphael Kubo da Costa,
    Reilly Grant,
    Ulan Degenbaev,
    Victor Miura,
    Wei Wang,
    and
    Zhenyao Mo
  </p>
  <p>
    Thanks to the <abbr title="World Wide Web Consortium">W3C</abbr> Privacy Interest Group (PING) and especially Peter Snyder
    for the privacy review, feedback and the proposed cross-site covert channel
    attack and its mitigations. Similarly thanks to Ehsan Toreini for his work on
    the privacy of private browsing and related contributions to this specification.
  </p>
  <p>
    Special thanks to
    Amanda Zhao,
    Fidel Tian,
    Zhiliang Wang
    and others from the Zoom engineering team for the feedback and hands-on experiments
    that have helped improve this API in real-world scenarios.
  </p>
</section>

<section id="idl-index" class="appendix"><div class="header-wrapper">
<h2 id="b-idl-index">
<bdi class="secno">B. </bdi>IDL Index</h2>
<a class="self-link" href="#idl-index" aria-label="Permalink for Appendix B."></a>
</div>
  
<pre class="idl def" id="actual-idl-index"><span class="idlHeader"><a class="self-link" href="#actual-idl-index">WebIDL</a></span><code><span data-idl="" class="idlEnum" data-title="PressureSource">enum <a class="internalDFN idlID" data-link-type="enum" href="#dom-pressuresource" id="ref-for-dom-pressuresource-14"><code>PressureSource</code></a> { <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" data-idl="enum-value" data-title="thermals" data-dfn-for="PressureSource"><code>thermals</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" data-idl="enum-value" data-title="cpu" data-dfn-for="PressureSource"><code>cpu</code></dfn>"</span> };</span>

<span data-idl="" class="idlEnum" data-title="PressureState">enum <a class="internalDFN idlID" data-link-type="enum" href="#dom-pressurestate" id="ref-for-dom-pressurestate-4"><code>PressureState</code></a> { <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" data-idl="enum-value" data-title="nominal" data-dfn-for="PressureState"><code>nominal</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" data-idl="enum-value" data-title="fair" data-dfn-for="PressureState"><code>fair</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" data-idl="enum-value" data-title="serious" data-dfn-for="PressureState"><code>serious</code></dfn>"</span>, <span class="idlEnumItem">"<dfn data-export="" data-dfn-type="enum-value" data-idl="enum-value" data-title="critical" data-dfn-for="PressureState"><code>critical</code></dfn>"</span> };</span>

<span data-idl="" class="idlCallback" data-title="PressureUpdateCallback">callback <dfn data-export="" data-dfn-type="callback" data-idl="callback" data-title="PressureUpdateCallback" data-dfn-for="" class="idlID"><code>PressureUpdateCallback</code></dfn> =<span class="idlType"> <a data-link-type="idl" data-type="interface" href="webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> (<span class="idlType">
  <a data-type="dfn" href="webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="#dom-pressurerecord" class="internalDFN" id="ref-for-dom-pressurerecord-11"><code>PressureRecord</code></a>&gt;</span> <span class="idlParamName">changes</span>,<span class="idlType">
  <a data-link-type="idl" href="#dom-pressureobserver" class="internalDFN" id="ref-for-dom-pressureobserver-18"><code>PressureObserver</code></a></span> <span class="idlParamName">observer</span>
);</span>

<span data-idl="" class="idlInterface" data-title="PressureObserver">[<span class="extAttr"><a data-type="extended-attribute" href="webidl.spec.whatwg.org/#Exposed">Exposed</a>=(DedicatedWorker,SharedWorker,Window)</span>, <span class="extAttr"><a data-type="extended-attribute" href="webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-pressureobserver" id="ref-for-dom-pressureobserver-19"><code>PressureObserver</code></a> {<span data-idl="" class="idlConstructor" data-title="constructor" data-dfn-for="PressureObserver">
  <a class="internalDFN" data-link-type="constructor" href="#dom-pressureobserver-constructor" id="ref-for-dom-pressureobserver-constructor-2"><code>constructor</code></a>(<span class="idlType"><a data-link-type="idl" href="#dom-pressureupdatecallback" class="internalDFN" id="ref-for-dom-pressureupdatecallback-4"><code>PressureUpdateCallback</code></a></span> <span class="idlParamName">callback</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-pressureobserveroptions" class="internalDFN" id="ref-for-dom-pressureobserveroptions-3"><code>PressureObserverOptions</code></a></span> <span class="idlParamName">options</span> = {});</span><span data-idl="" class="idlMethod" data-title="observe" data-dfn-for="PressureObserver"><span class="idlType">

  <a data-type="interface" href="webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pressureobserver-observe" id="ref-for-dom-pressureobserver-observe-6"><code>observe</code></a>(<span class="idlType"><a data-link-type="idl" href="#dom-pressuresource" class="internalDFN" id="ref-for-dom-pressuresource-15"><code>PressureSource</code></a></span> <span class="idlParamName">source</span>);</span><span data-idl="" class="idlMethod" data-title="unobserve" data-dfn-for="PressureObserver"><span class="idlType">
  <a data-link-type="idl" data-type="interface" href="webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pressureobserver-unobserve" id="ref-for-dom-pressureobserver-unobserve-5"><code>unobserve</code></a>(<span class="idlType"><a data-link-type="idl" href="#dom-pressuresource" class="internalDFN" id="ref-for-dom-pressuresource-16"><code>PressureSource</code></a></span> <span class="idlParamName">source</span>);</span><span data-idl="" class="idlMethod" data-title="disconnect" data-dfn-for="PressureObserver"><span class="idlType">
  <a data-link-type="idl" data-type="interface" href="webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pressureobserver-disconnect" id="ref-for-dom-pressureobserver-disconnect-9"><code>disconnect</code></a>();</span><span data-idl="" class="idlMethod" data-title="takeRecords" data-dfn-for="PressureObserver"><span class="idlType">
  <a data-type="dfn" href="webidl.spec.whatwg.org/#idl-sequence">sequence</a>&lt;<a data-link-type="idl" href="#dom-pressurerecord" class="internalDFN" id="ref-for-dom-pressurerecord-12"><code>PressureRecord</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pressureobserver-takerecords" id="ref-for-dom-pressureobserver-takerecords-4"><code>takeRecords</code></a>();</span><span data-idl="" class="idlAttribute" data-title="supportedSources" data-dfn-for="PressureObserver">

  [<span class="extAttr"><a data-type="extended-attribute" href="webidl.spec.whatwg.org/#SameObject">SameObject</a></span>] static readonly attribute<span class="idlType"> <a data-type="interface" href="webidl.spec.whatwg.org/#idl-frozen-array">FrozenArray</a>&lt;<a data-link-type="idl" href="#dom-pressuresource" class="internalDFN" id="ref-for-dom-pressuresource-17"><code>PressureSource</code></a>&gt;</span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pressureobserver-supportedsources" id="ref-for-dom-pressureobserver-supportedsources-5"><code>supportedSources</code></a>;</span>
};</span>

<span data-idl="" class="idlInterface" data-title="PressureRecord">[<span class="extAttr"><a data-type="extended-attribute" href="webidl.spec.whatwg.org/#Exposed">Exposed</a>=(DedicatedWorker,SharedWorker,Window)</span>, <span class="extAttr"><a data-type="extended-attribute" href="webidl.spec.whatwg.org/#SecureContext">SecureContext</a></span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-pressurerecord" id="ref-for-dom-pressurerecord-13"><code>PressureRecord</code></a> {<span data-idl="" class="idlAttribute" data-title="source" data-dfn-for="PressureRecord">
  readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-pressuresource" class="internalDFN" id="ref-for-dom-pressuresource-18"><code>PressureSource</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pressurerecord-source" id="ref-for-dom-pressurerecord-source-3"><code>source</code></a>;</span><span data-idl="" class="idlAttribute" data-title="state" data-dfn-for="PressureRecord">
  readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-pressurestate" class="internalDFN" id="ref-for-dom-pressurestate-5"><code>PressureState</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pressurerecord-state" id="ref-for-dom-pressurerecord-state-3"><code>state</code></a>;</span><span data-idl="" class="idlAttribute" data-title="time" data-dfn-for="PressureRecord">
  readonly attribute<span class="idlType"> <a data-link-type="idl" data-type="typedef" href="www.w3.org/TR/hr-time-3/#dom-domhighrestimestamp">DOMHighResTimeStamp</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-pressurerecord-time" id="ref-for-dom-pressurerecord-time-3"><code>time</code></a>;</span><span data-idl="" class="idlMethod" data-title="toJSON" data-dfn-for="PressureRecord">
  [<span class="extAttr"><a data-type="extended-attribute" href="webidl.spec.whatwg.org/#Default">Default</a></span>]<span class="idlType"> <a data-link-type="interface" data-type="interface" href="webidl.spec.whatwg.org/#idl-object">object</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-pressurerecord-tojson" id="ref-for-dom-pressurerecord-tojson-3"><code>toJSON</code></a>();</span>
};</span>

<span data-idl="" class="idlDictionary" data-title="PressureObserverOptions">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-pressureobserveroptions" id="ref-for-dom-pressureobserveroptions-4"><code>PressureObserverOptions</code></a> {<span data-idl="" class="idlMember" data-title="sampleInterval" data-dfn-for="PressureObserverOptions">
  [<span class="extAttr"><a data-type="extended-attribute" href="webidl.spec.whatwg.org/#EnforceRange">EnforceRange</a></span>]<span class="idlType"> <a data-link-type="idl" data-type="interface" href="webidl.spec.whatwg.org/#idl-unsigned-long">unsigned long</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-pressureobserveroptions-sampleinterval" id="ref-for-dom-pressureobserveroptions-sampleinterval-3"><code>sampleInterval</code></a> = 0;</span>
};</span></code></pre></section>
<section id="references" class="appendix"><div class="header-wrapper">
<h2 id="c-references">
<bdi class="secno">C. </bdi>References</h2>
<a class="self-link" href="#references" aria-label="Permalink for Appendix C."></a>
</div>
<section id="normative-references"><div class="header-wrapper">
<h3 id="c-1-normative-references">
<bdi class="secno">C.1 </bdi>Normative references</h3>
<a class="self-link" href="#normative-references" aria-label="Permalink for Appendix C.1"></a>
</div>
    
    <dl class="bibliography">
<dt id="bib-dom">[dom]</dt>
<dd>
      <a href="dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Anne van Kesteren.  WHATWG. Living Standard. URL: <a href="dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
    </dd>
<dt id="bib-hr-time">[hr-time]</dt>
<dd>
      <a href="www.w3.org/TR/hr-time-3/"><cite>High Resolution Time</cite></a>. Yoav Weiss.  W3C. 19 July 2023. W3C Working Draft. URL: <a href="www.w3.org/TR/hr-time-3/">https://www.w3.org/TR/hr-time-3/</a>
    </dd>
<dt id="bib-html">[html]</dt>
<dd>
      <a href="html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Anne van Kesteren; Domenic Denicola; Ian Hickson; Philip Jägenstedt; Simon Pieters.  WHATWG. Living Standard. URL: <a href="html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
    </dd>
<dt id="bib-infra">[infra]</dt>
<dd>
      <a href="infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Anne van Kesteren; Domenic Denicola.  WHATWG. Living Standard. URL: <a href="infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
    </dd>
<dt id="bib-mediacapture-streams">[mediacapture-streams]</dt>
<dd>
      <a href="www.w3.org/TR/mediacapture-streams/"><cite>Media Capture and Streams</cite></a>. Cullen Jennings; Bernard Aboba; Jan-Ivar Bruaroey; Henrik Boström; youenn fablet.  W3C. 20 November 2023. W3C Candidate Recommendation. URL: <a href="www.w3.org/TR/mediacapture-streams/">https://www.w3.org/TR/mediacapture-streams/</a>
    </dd>
<dt id="bib-permissions-policy">[PERMISSIONS-POLICY]</dt>
<dd>
      <a href="www.w3.org/TR/permissions-policy-1/"><cite>Permissions Policy</cite></a>. Ian Clelland.  W3C. 18 December 2023. W3C Working Draft. URL: <a href="www.w3.org/TR/permissions-policy-1/">https://www.w3.org/TR/permissions-policy-1/</a>
    </dd>
<dt id="bib-rfc2119">[RFC2119]</dt>
<dd>
      <a href="www.rfc-editor.org/rfc/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. S. Bradner.  IETF. March 1997. Best Current Practice. URL: <a href="www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
    </dd>
<dt id="bib-rfc8174">[RFC8174]</dt>
<dd>
      <a href="www.rfc-editor.org/rfc/rfc8174"><cite>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</cite></a>. B. Leiba.  IETF. May 2017. Best Current Practice. URL: <a href="www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
    </dd>
<dt id="bib-webidl">[WEBIDL]</dt>
<dd>
      <a href="webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Edgar Chen; Timothy Gu.  WHATWG. Living Standard. URL: <a href="webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
    </dd>
</dl>
  </section><section id="informative-references"><div class="header-wrapper">
<h3 id="c-2-informative-references">
<bdi class="secno">C.2 </bdi>Informative references</h3>
<a class="self-link" href="#informative-references" aria-label="Permalink for Appendix C.2"></a>
</div>
    
    <dl class="bibliography">
<dt id="bib-ecmascript">[ECMAScript]</dt>
<dd>
      <a href="tc39.es/ecma262/multipage/"><cite>ECMAScript Language Specification</cite></a>.  Ecma International. URL: <a href="tc39.es/ecma262/multipage/">https://tc39.es/ecma262/multipage/</a>
    </dd>
</dl>
  </section></section><p role="navigation" id="back-to-top">
    <a href="#title"><abbr title="Back to Top">↑</abbr></a>
  </p>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-processing-units" aria-label="Links in this document to definition: processing units">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-processing-units" aria-label="Permalink for definition: processing units. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-processing-units-1" title="§ 1. Introduction">§ 1. Introduction</a> <a href="#ref-for-dfn-processing-units-2" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-processing-units-3" title="§ 3.2 Supported sources">§ 3.2 Supported sources</a> <a href="#ref-for-dfn-processing-units-4" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-supported-source-types" aria-label="Links in this document to definition: supported source types">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-supported-source-types" aria-label="Permalink for definition: supported source types. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-supported-source-types-1" title="§ 3.2 Supported sources">§ 3.2 Supported sources</a> 
    </li>
<li>
      <a href="#ref-for-dfn-supported-source-types-2" title="§ 10.2.2 The observe() method">§ 10.2.2 The observe() method</a> 
    </li>
<li>
      <a href="#ref-for-dfn-supported-source-types-3" title="§ 10.2.3 The unobserve() method">§ 10.2.3 The unobserve() method</a> 
    </li>
<li>
      <a href="#ref-for-dfn-supported-source-types-4" title="§ 10.2.6 The supportedSources attribute">§ 10.2.6 The supportedSources attribute</a> 
    </li>
<li>
      <a href="#ref-for-dfn-supported-source-types-5" title="§ 10.6.6 Handling change of fully active">§ 10.6.6 Handling change of fully active</a> <a href="#ref-for-dfn-supported-source-types-6" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-supported-source-types-7" title="§ 10.6.7 Handle unloading document and closing of workers">§ 10.6.7 Handle unloading document and closing of workers</a> <a href="#ref-for-dfn-supported-source-types-8" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pressuresource-thermals" aria-label="Links in this document to definition: thermals">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pressuresource-thermals" aria-label="Permalink for definition: thermals. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-pressuresource-thermals-1" title="§ 3.2 Supported sources">§ 3.2 Supported sources</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pressuresource-cpu" aria-label="Links in this document to definition: cpu">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pressuresource-cpu" aria-label="Permalink for definition: cpu. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-pressuresource-cpu-1" title="§ 3.2 Supported sources">§ 3.2 Supported sources</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pressuresource" aria-label="Links in this document to definition: PressureSource">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pressuresource" aria-label="Permalink for definition: PressureSource. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1646237120">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-pressuresource-1" title="§ 3.2 Supported sources">§ 3.2 Supported sources</a> <a href="#ref-for-dom-pressuresource-2" title="Reference 2">(2)</a> <a href="#ref-for-dom-pressuresource-3" title="Reference 3">(3)</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressuresource-4" title="§ 4. Platform primitives">§ 4. Platform primitives</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressuresource-5" title="§ 7. Internal Slot Definitions">§ 7. Internal Slot Definitions</a> <a href="#ref-for-dom-pressuresource-6" title="Reference 2">(2)</a> <a href="#ref-for-dom-pressuresource-7" title="Reference 3">(3)</a> <a href="#ref-for-dom-pressuresource-8" title="Reference 4">(4)</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressuresource-9" title="§ 10.2 The PressureObserver object">§ 10.2 The PressureObserver object</a> <a href="#ref-for-dom-pressuresource-10" title="Reference 2">(2)</a> <a href="#ref-for-dom-pressuresource-11" title="Reference 3">(3)</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressuresource-12" title="§ 10.3 The PressureRecord interface">§ 10.3 The PressureRecord interface</a> <a href="#ref-for-dom-pressuresource-13" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressuresource-14" title="§ B. IDL Index">§ B. IDL Index</a> <a href="#ref-for-dom-pressuresource-15" title="Reference 2">(2)</a> <a href="#ref-for-dom-pressuresource-16" title="Reference 3">(3)</a> <a href="#ref-for-dom-pressuresource-17" title="Reference 4">(4)</a> <a href="#ref-for-dom-pressuresource-18" title="Reference 5">(5)</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-requested-sampling-interval" aria-label="Links in this document to definition: requested sampling interval">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-requested-sampling-interval" aria-label="Permalink for definition: requested sampling interval. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-requested-sampling-interval-1" title="§ 3.3 Sampling and Reporting Rate">§ 3.3 Sampling and Reporting Rate</a> <a href="#ref-for-dfn-requested-sampling-interval-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-requested-sampling-interval-3" title="Reference 3">(3)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-requested-sampling-interval-4" title="§ 10.4.1 The sampleInterval member">§ 10.4.1 The sampleInterval member</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-requested-sampling-rate" aria-label="Links in this document to definition: requested sampling rate">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-requested-sampling-rate" aria-label="Permalink for definition: requested sampling rate. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-requested-sampling-rate-1" title="§ 3.3 Sampling and Reporting Rate">§ 3.3 Sampling and Reporting Rate</a> <a href="#ref-for-dfn-requested-sampling-rate-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-requested-sampling-rate-3" title="Reference 3">(3)</a> <a href="#ref-for-dfn-requested-sampling-rate-4" title="Reference 4">(4)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-requested-sampling-rate-5" title="§ 10.6.1 Supporting algorithms">§ 10.6.1 Supporting algorithms</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-sampling-rate" aria-label="Links in this document to definition: sampling rate">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-sampling-rate" aria-label="Permalink for definition: sampling rate. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-sampling-rate-1" title="§ 3.3 Sampling and Reporting Rate">§ 3.3 Sampling and Reporting Rate</a> <a href="#ref-for-dfn-sampling-rate-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-sampling-rate-3" title="Reference 3">(3)</a> <a href="#ref-for-dfn-sampling-rate-4" title="Reference 4">(4)</a> <a href="#ref-for-dfn-sampling-rate-5" title="Reference 5">(5)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-sampling-rate-6" title="§ 10.6.1 Supporting algorithms">§ 10.6.1 Supporting algorithms</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-reporting-rate" aria-label="Links in this document to definition: reporting rate">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-reporting-rate" aria-label="Permalink for definition: reporting rate. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-reporting-rate-1" title="§ 3.3 Sampling and Reporting Rate">§ 3.3 Sampling and Reporting Rate</a> <a href="#ref-for-dfn-reporting-rate-2" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-source-types" aria-label="Links in this document to definition: source types">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-source-types" aria-label="Permalink for definition: source types. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-source-types-1" title="§ 3.2 Supported sources">§ 3.2 Supported sources</a> <a href="#ref-for-dfn-source-types-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-source-types-3" title="Reference 3">(3)</a> <a href="#ref-for-dfn-source-types-4" title="Reference 4">(4)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-source-types-5" title="§ 7. Internal Slot Definitions">§ 7. Internal Slot Definitions</a> <a href="#ref-for-dfn-source-types-6" title="Reference 2">(2)</a> <a href="#ref-for-dfn-source-types-7" title="Reference 3">(3)</a> <a href="#ref-for-dfn-source-types-8" title="Reference 4">(4)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-source-types-9" title="§ 9. Contributing Factors">§ 9. Contributing Factors</a> 
    </li>
<li>
      <a href="#ref-for-dfn-source-types-10" title="§ 10.2.4 The disconnect() method">§ 10.2.4 The disconnect() method</a> 
    </li>
<li>
      <a href="#ref-for-dfn-source-types-11" title="§ 10.2.6 The supportedSources attribute">§ 10.2.6 The supportedSources attribute</a> <a href="#ref-for-dfn-source-types-12" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-source-types-13" title="§ 10.3 The PressureRecord interface">§ 10.3 The PressureRecord interface</a> 
    </li>
<li>
      <a href="#ref-for-dfn-source-types-14" title="§ 10.6.2 Data delivery">§ 10.6.2 Data delivery</a> <a href="#ref-for-dfn-source-types-15" title="Reference 2">(2)</a> <a href="#ref-for-dfn-source-types-16" title="Reference 3">(3)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-source-types-17" title="§ 10.6.6 Handling change of fully active">§ 10.6.6 Handling change of fully active</a> <a href="#ref-for-dfn-source-types-18" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-current-pressure-state" aria-label="Links in this document to definition: current pressure state">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-current-pressure-state" aria-label="Permalink for definition: current pressure state. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-current-pressure-state-1" title="§ 7. Internal Slot Definitions">§ 7. Internal Slot Definitions</a> 
    </li>
<li>
      <a href="#ref-for-dfn-current-pressure-state-2" title="§ 9. Contributing Factors">§ 9. Contributing Factors</a> <a href="#ref-for-dfn-current-pressure-state-3" title="Reference 2">(2)</a> <a href="#ref-for-dfn-current-pressure-state-4" title="Reference 3">(3)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-current-pressure-state-5" title="§ 10.3 The PressureRecord interface">§ 10.3 The PressureRecord interface</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-pressure-observer-task-queued" aria-label="Links in this document to definition: pressure observer task queued">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-pressure-observer-task-queued" aria-label="Permalink for definition: pressure observer task queued. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-pressure-observer-task-queued-1" title="§ 10.6.4 Queue a Pressure Observer Task">§ 10.6.4 Queue a Pressure Observer Task</a> <a href="#ref-for-dfn-pressure-observer-task-queued-2" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-pressure-observer-task-queued-3" title="§ 10.6.5 Notify Pressure Observers">§ 10.6.5 Notify Pressure Observers</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-registered-observer-list" aria-label="Links in this document to definition: registered observer list">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-registered-observer-list" aria-label="Permalink for definition: registered observer list. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-registered-observer-list-1" title="§ 10.2.2 The observe() method">§ 10.2.2 The observe() method</a> <a href="#ref-for-dfn-registered-observer-list-2" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-registered-observer-list-3" title="§ 10.2.3 The unobserve() method">§ 10.2.3 The unobserve() method</a> <a href="#ref-for-dfn-registered-observer-list-4" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-registered-observer-list-5" title="§ 10.2.4 The disconnect() method">§ 10.2.4 The disconnect() method</a> <a href="#ref-for-dfn-registered-observer-list-6" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-registered-observer-list-7" title="§ 10.5 Life-cycle and garbage collection">§ 10.5 Life-cycle and garbage collection</a> <a href="#ref-for-dfn-registered-observer-list-8" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-registered-observer-list-9" title="§ 10.6.2 Data delivery">§ 10.6.2 Data delivery</a> 
    </li>
<li>
      <a href="#ref-for-dfn-registered-observer-list-10" title="§ 10.6.5 Notify Pressure Observers">§ 10.6.5 Notify Pressure Observers</a> 
    </li>
<li>
      <a href="#ref-for-dfn-registered-observer-list-11" title="§ 10.6.6 Handling change of fully active">§ 10.6.6 Handling change of fully active</a> <a href="#ref-for-dfn-registered-observer-list-12" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-platform-collector" aria-label="Links in this document to definition: platform collector">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-platform-collector" aria-label="Permalink for definition: platform collector. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-platform-collector-1" title="§ 2. A Note on Feature Detection">§ 2. A Note on Feature Detection</a> <a href="#ref-for-dfn-platform-collector-2" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-platform-collector-3" title="§ 3.3 Sampling and Reporting Rate">§ 3.3 Sampling and Reporting Rate</a> <a href="#ref-for-dfn-platform-collector-4" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-platform-collector-5" title="§ 4. Platform primitives">§ 4. Platform primitives</a> <a href="#ref-for-dfn-platform-collector-6" title="Reference 2">(2)</a> <a href="#ref-for-dfn-platform-collector-7" title="Reference 3">(3)</a> <a href="#ref-for-dfn-platform-collector-8" title="Reference 4">(4)</a> <a href="#ref-for-dfn-platform-collector-9" title="Reference 5">(5)</a> <a href="#ref-for-dfn-platform-collector-10" title="Reference 6">(6)</a> <a href="#ref-for-dfn-platform-collector-11" title="Reference 7">(7)</a> <a href="#ref-for-dfn-platform-collector-12" title="Reference 8">(8)</a> <a href="#ref-for-dfn-platform-collector-13" title="Reference 9">(9)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-platform-collector-14" title="§ 10.2.6 The supportedSources attribute">§ 10.2.6 The supportedSources attribute</a> 
    </li>
<li>
      <a href="#ref-for-dfn-platform-collector-15" title="§ 10.6.1 Supporting algorithms">§ 10.6.1 Supporting algorithms</a> <a href="#ref-for-dfn-platform-collector-16" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-platform-collector-17" title="§ 10.6.2 Data delivery">§ 10.6.2 Data delivery</a> <a href="#ref-for-dfn-platform-collector-18" title="Reference 2">(2)</a> <a href="#ref-for-dfn-platform-collector-19" title="Reference 3">(3)</a> <a href="#ref-for-dfn-platform-collector-20" title="Reference 4">(4)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-platform-collector-21" title="§ 10.6.6 Handling change of fully active">§ 10.6.6 Handling change of fully active</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-registered-observer" aria-label="Links in this document to definition: registered observer">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-registered-observer" aria-label="Permalink for definition: registered observer. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-registered-observer-1" title="§ 10.2.2 The observe() method">§ 10.2.2 The observe() method</a> 
    </li>
<li>
      <a href="#ref-for-dfn-registered-observer-2" title="§ 10.2.3 The unobserve() method">§ 10.2.3 The unobserve() method</a> <a href="#ref-for-dfn-registered-observer-3" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-registered-observer-4" title="§ 10.2.4 The disconnect() method">§ 10.2.4 The disconnect() method</a> 
    </li>
<li>
      <a href="#ref-for-dfn-registered-observer-5" title="§ 10.5 Life-cycle and garbage collection">§ 10.5 Life-cycle and garbage collection</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-observer" aria-label="Links in this document to definition: observer">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-observer" aria-label="Permalink for definition: observer. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-observer-1" title="§ 10.2.2 The observe() method">§ 10.2.2 The observe() method</a> 
    </li>
<li>
      <a href="#ref-for-dfn-observer-2" title="§ 10.2.4 The disconnect() method">§ 10.2.4 The disconnect() method</a> 
    </li>
<li>
      <a href="#ref-for-dfn-observer-3" title="§ 10.6.5 Notify Pressure Observers">§ 10.6.5 Notify Pressure Observers</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-max-queued-records" aria-label="Links in this document to definition: max queued records">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-max-queued-records" aria-label="Permalink for definition: max queued records. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-max-queued-records-1" title="§ 10.6.3 Queue a PressureRecord">§ 10.6.3 Queue a PressureRecord</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-callback" aria-label="Links in this document to definition: [[Callback]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-callback" aria-label="Permalink for definition: [[Callback]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-callback-1" title="§ 10.2.1 The constructor() method">§ 10.2.1 The constructor() method</a> 
    </li>
<li>
      <a href="#ref-for-dfn-callback-2" title="§ 10.6.5 Notify Pressure Observers">§ 10.6.5 Notify Pressure Observers</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-sampleinterval" aria-label="Links in this document to definition: [[SampleInterval]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-sampleinterval" aria-label="Permalink for definition: [[SampleInterval]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-sampleinterval-1" title="§ 10.2.1 The constructor() method">§ 10.2.1 The constructor() method</a> 
    </li>
<li>
      <a href="#ref-for-dfn-sampleinterval-2" title="§ 10.6.1 Supporting algorithms">§ 10.6.1 Supporting algorithms</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-pendingobservepromises" aria-label="Links in this document to definition: [[PendingObservePromises]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-pendingobservepromises" aria-label="Permalink for definition: [[PendingObservePromises]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-pendingobservepromises-1" title="§ 10.2.2 The observe() method">§ 10.2.2 The observe() method</a> <a href="#ref-for-dfn-pendingobservepromises-2" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-pendingobservepromises-3" title="§ 10.2.3 The unobserve() method">§ 10.2.3 The unobserve() method</a> 
    </li>
<li>
      <a href="#ref-for-dfn-pendingobservepromises-4" title="§ 10.2.4 The disconnect() method">§ 10.2.4 The disconnect() method</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-queuedrecords" aria-label="Links in this document to definition: [[QueuedRecords]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-queuedrecords" aria-label="Permalink for definition: [[QueuedRecords]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-queuedrecords-1" title="§ 10.2.3 The unobserve() method">§ 10.2.3 The unobserve() method</a> 
    </li>
<li>
      <a href="#ref-for-dfn-queuedrecords-2" title="§ 10.2.4 The disconnect() method">§ 10.2.4 The disconnect() method</a> 
    </li>
<li>
      <a href="#ref-for-dfn-queuedrecords-3" title="§ 10.2.5 The takeRecords() method">§ 10.2.5 The takeRecords() method</a> <a href="#ref-for-dfn-queuedrecords-4" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-queuedrecords-5" title="§ 10.6.3 Queue a PressureRecord">§ 10.6.3 Queue a PressureRecord</a> <a href="#ref-for-dfn-queuedrecords-6" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-queuedrecords-7" title="§ 10.6.5 Notify Pressure Observers">§ 10.6.5 Notify Pressure Observers</a> <a href="#ref-for-dfn-queuedrecords-8" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-lastrecordmap" aria-label="Links in this document to definition: [[LastRecordMap]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-lastrecordmap" aria-label="Permalink for definition: [[LastRecordMap]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-lastrecordmap-1" title="§ 10.2.3 The unobserve() method">§ 10.2.3 The unobserve() method</a> 
    </li>
<li>
      <a href="#ref-for-dfn-lastrecordmap-2" title="§ 10.2.4 The disconnect() method">§ 10.2.4 The disconnect() method</a> 
    </li>
<li>
      <a href="#ref-for-dfn-lastrecordmap-3" title="§ 10.6.1 Supporting algorithms">§ 10.6.1 Supporting algorithms</a> <a href="#ref-for-dfn-lastrecordmap-4" title="Reference 2">(2)</a> <a href="#ref-for-dfn-lastrecordmap-5" title="Reference 3">(3)</a> <a href="#ref-for-dfn-lastrecordmap-6" title="Reference 4">(4)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-lastrecordmap-7" title="§ 10.6.3 Queue a PressureRecord">§ 10.6.3 Queue a PressureRecord</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-observationwindow" aria-label="Links in this document to definition: [[ObservationWindow]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-observationwindow" aria-label="Permalink for definition: [[ObservationWindow]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-observationwindow-1" title="§ 10.6.1 Supporting algorithms">§ 10.6.1 Supporting algorithms</a> <a href="#ref-for-dfn-observationwindow-2" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-observationwindow-3" title="§ 11.2.5 Rate obfuscation non-normative parameters">§ 11.2.5 Rate obfuscation non-normative parameters</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-maxchangesthreshold" aria-label="Links in this document to definition: [[MaxChangesThreshold]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-maxchangesthreshold" aria-label="Permalink for definition: [[MaxChangesThreshold]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-maxchangesthreshold-1" title="§ 10.6.1 Supporting algorithms">§ 10.6.1 Supporting algorithms</a> <a href="#ref-for-dfn-maxchangesthreshold-2" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-maxchangesthreshold-3" title="§ 11.2.4 Rate obfuscation normative parameters">§ 11.2.4 Rate obfuscation normative parameters</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-penaltyduration" aria-label="Links in this document to definition: [[PenaltyDuration]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-penaltyduration" aria-label="Permalink for definition: [[PenaltyDuration]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-penaltyduration-1" title="§ 10.6.1 Supporting algorithms">§ 10.6.1 Supporting algorithms</a> 
    </li>
<li>
      <a href="#ref-for-dfn-penaltyduration-2" title="§ 10.6.2 Data delivery">§ 10.6.2 Data delivery</a> 
    </li>
<li>
      <a href="#ref-for-dfn-penaltyduration-3" title="§ 11.2.4 Rate obfuscation normative parameters">§ 11.2.4 Rate obfuscation normative parameters</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-changescountmap" aria-label="Links in this document to definition: [[ChangesCountMap]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-changescountmap" aria-label="Permalink for definition: [[ChangesCountMap]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-changescountmap-1" title="§ 10.6.1 Supporting algorithms">§ 10.6.1 Supporting algorithms</a> <a href="#ref-for-dfn-changescountmap-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-changescountmap-3" title="Reference 3">(3)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-changescountmap-4" title="§ 10.6.2 Data delivery">§ 10.6.2 Data delivery</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-afterpenaltyrecordmap" aria-label="Links in this document to definition: [[AfterPenaltyRecordMap]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-afterpenaltyrecordmap" aria-label="Permalink for definition: [[AfterPenaltyRecordMap]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-afterpenaltyrecordmap-1" title="§ 10.2.3 The unobserve() method">§ 10.2.3 The unobserve() method</a> 
    </li>
<li>
      <a href="#ref-for-dfn-afterpenaltyrecordmap-2" title="§ 10.2.4 The disconnect() method">§ 10.2.4 The disconnect() method</a> 
    </li>
<li>
      <a href="#ref-for-dfn-afterpenaltyrecordmap-3" title="§ 10.6.2 Data delivery">§ 10.6.2 Data delivery</a> <a href="#ref-for-dfn-afterpenaltyrecordmap-4" title="Reference 2">(2)</a> <a href="#ref-for-dfn-afterpenaltyrecordmap-5" title="Reference 3">(3)</a> <a href="#ref-for-dfn-afterpenaltyrecordmap-6" title="Reference 4">(4)</a> <a href="#ref-for-dfn-afterpenaltyrecordmap-7" title="Reference 5">(5)</a> <a href="#ref-for-dfn-afterpenaltyrecordmap-8" title="Reference 6">(6)</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-pressure-states" aria-label="Links in this document to definition: Pressure states">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-pressure-states" aria-label="Permalink for definition: Pressure states. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-pressure-states-1" title="§ 8. Pressure States">§ 8. Pressure States</a> 
    </li>
<li>
      <a href="#ref-for-dfn-pressure-states-2" title="§ 9. Contributing Factors">§ 9. Contributing Factors</a> <a href="#ref-for-dfn-pressure-states-3" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-pressure-states-4" title="§ 10.1 The PressureUpdateCallback callback">§ 10.1 The PressureUpdateCallback callback</a> 
    </li>
<li>
      <a href="#ref-for-dfn-pressure-states-5" title="§ 10.2 The PressureObserver object">§ 10.2 The PressureObserver object</a> 
    </li>
<li>
      <a href="#ref-for-dfn-pressure-states-6" title="§ 10.6.2 Data delivery">§ 10.6.2 Data delivery</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pressurestate-nominal" aria-label="Links in this document to definition: nominal">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pressurestate-nominal" aria-label="Permalink for definition: nominal. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-pressurestate-nominal-1" title="§ 8. Pressure States">§ 8. Pressure States</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pressurestate-fair" aria-label="Links in this document to definition: fair">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pressurestate-fair" aria-label="Permalink for definition: fair. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-pressurestate-fair-1" title="§ 8. Pressure States">§ 8. Pressure States</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pressurestate-serious" aria-label="Links in this document to definition: serious">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pressurestate-serious" aria-label="Permalink for definition: serious. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-pressurestate-serious-1" title="§ 8. Pressure States">§ 8. Pressure States</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pressurestate-critical" aria-label="Links in this document to definition: critical">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pressurestate-critical" aria-label="Permalink for definition: critical. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-pressurestate-critical-1" title="§ 8. Pressure States">§ 8. Pressure States</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pressurestate" aria-label="Links in this document to definition: PressureState">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pressurestate" aria-label="Permalink for definition: PressureState. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-287287555">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-pressurestate-1" title="§ 8. Pressure States">§ 8. Pressure States</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressurestate-2" title="§ 10.3 The PressureRecord interface">§ 10.3 The PressureRecord interface</a> <a href="#ref-for-dom-pressurestate-3" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressurestate-4" title="§ B. IDL Index">§ B. IDL Index</a> <a href="#ref-for-dom-pressurestate-5" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-contributing-factors" aria-label="Links in this document to definition: Contributing factors">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-contributing-factors" aria-label="Permalink for definition: Contributing factors. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-contributing-factors-1" title="§ 9. Contributing Factors">§ 9. Contributing Factors</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-adjusted-pressure-state" aria-label="Links in this document to definition: adjusted pressure state">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-adjusted-pressure-state" aria-label="Permalink for definition: adjusted pressure state. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-adjusted-pressure-state-1" title="§ 10.6.2 Data delivery">§ 10.6.2 Data delivery</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-change-in-contributing-factors-is-substantial" aria-label="Links in this document to definition: change in contributing factors is substantial">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-change-in-contributing-factors-is-substantial" aria-label="Permalink for definition: change in contributing factors is substantial. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-change-in-contributing-factors-is-substantial-1" title="§ 9. Contributing Factors">§ 9. Contributing Factors</a> 
    </li>
<li>
      <a href="#ref-for-dfn-change-in-contributing-factors-is-substantial-2" title="§ 10.6.1 Supporting algorithms">§ 10.6.1 Supporting algorithms</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pressureupdatecallback" aria-label="Links in this document to definition: PressureUpdateCallback">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pressureupdatecallback" aria-label="Permalink for definition: PressureUpdateCallback. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-pressureupdatecallback-1" title="§ 7. Internal Slot Definitions">§ 7. Internal Slot Definitions</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureupdatecallback-2" title="§ 10.1 The PressureUpdateCallback callback">§ 10.1 The PressureUpdateCallback callback</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureupdatecallback-3" title="§ 10.2 The PressureObserver object">§ 10.2 The PressureObserver object</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureupdatecallback-4" title="§ B. IDL Index">§ B. IDL Index</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pressureobserver" aria-label="Links in this document to definition: PressureObserver">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pressureobserver" aria-label="Permalink for definition: PressureObserver. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-633922516">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-pressureobserver-1" title="§ 2. A Note on Feature Detection">§ 2. A Note on Feature Detection</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-2" title="§ 3.3 Sampling and Reporting Rate">§ 3.3 Sampling and Reporting Rate</a> <a href="#ref-for-dom-pressureobserver-3" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-4" title="§ 7. Internal Slot Definitions">§ 7. Internal Slot Definitions</a> <a href="#ref-for-dom-pressureobserver-5" title="Reference 2">(2)</a> <a href="#ref-for-dom-pressureobserver-6" title="Reference 3">(3)</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-7" title="§ 10.1 The PressureUpdateCallback callback">§ 10.1 The PressureUpdateCallback callback</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-8" title="§ 10.2 The PressureObserver object">§ 10.2 The PressureObserver object</a> <a href="#ref-for-dom-pressureobserver-9" title="Reference 2">(2)</a> <a href="#ref-for-dom-pressureobserver-10" title="Reference 3">(3)</a> <a href="#ref-for-dom-pressureobserver-11" title="Reference 4">(4)</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-12" title="§ 10.2.1 The constructor() method">§ 10.2.1 The constructor() method</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-13" title="§ 10.3 The PressureRecord interface">§ 10.3 The PressureRecord interface</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-14" title="§ 10.5 Life-cycle and garbage collection">§ 10.5 Life-cycle and garbage collection</a> <a href="#ref-for-dom-pressureobserver-15" title="Reference 2">(2)</a> <a href="#ref-for-dom-pressureobserver-16" title="Reference 3">(3)</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-17" title="§ 10.6.2 Data delivery">§ 10.6.2 Data delivery</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-18" title="§ B. IDL Index">§ B. IDL Index</a> <a href="#ref-for-dom-pressureobserver-19" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pressureobserver-constructor" aria-label="Links in this document to definition: constructor()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pressureobserver-constructor" aria-label="Permalink for definition: constructor(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-633922516">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-pressureobserver-constructor-1" title="§ 10.2 The PressureObserver object">§ 10.2 The PressureObserver object</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-constructor-2" title="§ B. IDL Index">§ B. IDL Index</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pressureobserver-observe" aria-label="Links in this document to definition: observe()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pressureobserver-observe" aria-label="Permalink for definition: observe(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-633922516">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-pressureobserver-observe-1" title="§ 3.2 Supported sources">§ 3.2 Supported sources</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-observe-2" title="§ 10.2 The PressureObserver object">§ 10.2 The PressureObserver object</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-observe-3" title="§ 10.2.2 The observe() method">§ 10.2.2 The observe() method</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-observe-4" title="§ 10.5 Life-cycle and garbage collection">§ 10.5 Life-cycle and garbage collection</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-observe-5" title="§ 13. Examples">§ 13. Examples</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-observe-6" title="§ B. IDL Index">§ B. IDL Index</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pressureobserver-unobserve" aria-label="Links in this document to definition: unobserve()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pressureobserver-unobserve" aria-label="Permalink for definition: unobserve(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-633922516">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-pressureobserver-unobserve-1" title="§ 10.2 The PressureObserver object">§ 10.2 The PressureObserver object</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-unobserve-2" title="§ 10.2.3 The unobserve() method">§ 10.2.3 The unobserve() method</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-unobserve-3" title="§ 10.5 Life-cycle and garbage collection">§ 10.5 Life-cycle and garbage collection</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-unobserve-4" title="§ 13. Examples">§ 13. Examples</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-unobserve-5" title="§ B. IDL Index">§ B. IDL Index</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pressureobserver-disconnect" aria-label="Links in this document to definition: disconnect()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pressureobserver-disconnect" aria-label="Permalink for definition: disconnect(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-633922516">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-pressureobserver-disconnect-1" title="§ 10.2 The PressureObserver object">§ 10.2 The PressureObserver object</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-disconnect-2" title="§ 10.2.4 The disconnect() method">§ 10.2.4 The disconnect() method</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-disconnect-3" title="§ 10.5 Life-cycle and garbage collection">§ 10.5 Life-cycle and garbage collection</a> <a href="#ref-for-dom-pressureobserver-disconnect-4" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-disconnect-5" title="§ 13. Examples">§ 13. Examples</a> <a href="#ref-for-dom-pressureobserver-disconnect-6" title="Reference 2">(2)</a> <a href="#ref-for-dom-pressureobserver-disconnect-7" title="Reference 3">(3)</a> <a href="#ref-for-dom-pressureobserver-disconnect-8" title="Reference 4">(4)</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-disconnect-9" title="§ B. IDL Index">§ B. IDL Index</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pressureobserver-takerecords" aria-label="Links in this document to definition: takeRecords()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pressureobserver-takerecords" aria-label="Permalink for definition: takeRecords(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-633922516">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-pressureobserver-takerecords-1" title="§ 10.2 The PressureObserver object">§ 10.2 The PressureObserver object</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-takerecords-2" title="§ 10.2.5 The takeRecords() method">§ 10.2.5 The takeRecords() method</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-takerecords-3" title="§ 13. Examples">§ 13. Examples</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-takerecords-4" title="§ B. IDL Index">§ B. IDL Index</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pressureobserver-supportedsources" aria-label="Links in this document to definition: supportedSources">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pressureobserver-supportedsources" aria-label="Permalink for definition: supportedSources. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-633922516">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-pressureobserver-supportedsources-1" title="§ 3.2 Supported sources">§ 3.2 Supported sources</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-supportedsources-2" title="§ 10.2 The PressureObserver object">§ 10.2 The PressureObserver object</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-supportedsources-3" title="§ 10.2.6 The supportedSources attribute">§ 10.2.6 The supportedSources attribute</a> <a href="#ref-for-dom-pressureobserver-supportedsources-4" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserver-supportedsources-5" title="§ B. IDL Index">§ B. IDL Index</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pressurerecord" aria-label="Links in this document to definition: PressureRecord">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pressurerecord" aria-label="Permalink for definition: PressureRecord. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-737850499">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-pressurerecord-1" title="§ 7. Internal Slot Definitions">§ 7. Internal Slot Definitions</a> <a href="#ref-for-dom-pressurerecord-2" title="Reference 2">(2)</a> <a href="#ref-for-dom-pressurerecord-3" title="Reference 3">(3)</a> <a href="#ref-for-dom-pressurerecord-4" title="Reference 4">(4)</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressurerecord-5" title="§ 10.1 The PressureUpdateCallback callback">§ 10.1 The PressureUpdateCallback callback</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressurerecord-6" title="§ 10.2 The PressureObserver object">§ 10.2 The PressureObserver object</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressurerecord-7" title="§ 10.3 The PressureRecord interface">§ 10.3 The PressureRecord interface</a> <a href="#ref-for-dom-pressurerecord-8" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressurerecord-9" title="§ 10.3.4 The toJSON member">§ 10.3.4 The toJSON member</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressurerecord-10" title="§ 10.6.2 Data delivery">§ 10.6.2 Data delivery</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressurerecord-11" title="§ B. IDL Index">§ B. IDL Index</a> <a href="#ref-for-dom-pressurerecord-12" title="Reference 2">(2)</a> <a href="#ref-for-dom-pressurerecord-13" title="Reference 3">(3)</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-source" aria-label="Links in this document to definition: [[Source]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-source" aria-label="Permalink for definition: [[Source]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-source-1" title="§ 10.3.1 The source attribute">§ 10.3.1 The source attribute</a> 
    </li>
<li>
      <a href="#ref-for-dfn-source-2" title="§ 10.6.2 Data delivery">§ 10.6.2 Data delivery</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-state" aria-label="Links in this document to definition: [[State]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-state" aria-label="Permalink for definition: [[State]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-state-1" title="§ 10.3.2 The state attribute">§ 10.3.2 The state attribute</a> 
    </li>
<li>
      <a href="#ref-for-dfn-state-2" title="§ 10.6.1 Supporting algorithms">§ 10.6.1 Supporting algorithms</a> 
    </li>
<li>
      <a href="#ref-for-dfn-state-3" title="§ 10.6.2 Data delivery">§ 10.6.2 Data delivery</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-time" aria-label="Links in this document to definition: [[Time]]">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-time" aria-label="Permalink for definition: [[Time]]. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-time-1" title="§ 10.3.3 The time attribute">§ 10.3.3 The time attribute</a> 
    </li>
<li>
      <a href="#ref-for-dfn-time-2" title="§ 10.6.1 Supporting algorithms">§ 10.6.1 Supporting algorithms</a> 
    </li>
<li>
      <a href="#ref-for-dfn-time-3" title="§ 10.6.2 Data delivery">§ 10.6.2 Data delivery</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pressurerecord-source" aria-label="Links in this document to definition: source">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pressurerecord-source" aria-label="Permalink for definition: source. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-737850499">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-pressurerecord-source-1" title="§ 10.3 The PressureRecord interface">§ 10.3 The PressureRecord interface</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressurerecord-source-2" title="§ 10.3.1 The source attribute">§ 10.3.1 The source attribute</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressurerecord-source-3" title="§ B. IDL Index">§ B. IDL Index</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pressurerecord-state" aria-label="Links in this document to definition: state">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pressurerecord-state" aria-label="Permalink for definition: state. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-737850499">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-pressurerecord-state-1" title="§ 10.3 The PressureRecord interface">§ 10.3 The PressureRecord interface</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressurerecord-state-2" title="§ 10.3.2 The state attribute">§ 10.3.2 The state attribute</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressurerecord-state-3" title="§ B. IDL Index">§ B. IDL Index</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pressurerecord-time" aria-label="Links in this document to definition: time">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pressurerecord-time" aria-label="Permalink for definition: time. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-737850499">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-pressurerecord-time-1" title="§ 10.3 The PressureRecord interface">§ 10.3 The PressureRecord interface</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressurerecord-time-2" title="§ 10.3.3 The time attribute">§ 10.3.3 The time attribute</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressurerecord-time-3" title="§ B. IDL Index">§ B. IDL Index</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pressurerecord-tojson" aria-label="Links in this document to definition: toJSON">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pressurerecord-tojson" aria-label="Permalink for definition: toJSON. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-737850499">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-pressurerecord-tojson-1" title="§ 10.3 The PressureRecord interface">§ 10.3 The PressureRecord interface</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressurerecord-tojson-2" title="§ 10.3.4 The toJSON member">§ 10.3.4 The toJSON member</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressurerecord-tojson-3" title="§ B. IDL Index">§ B. IDL Index</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pressureobserveroptions" aria-label="Links in this document to definition: PressureObserverOptions">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pressureobserveroptions" aria-label="Permalink for definition: PressureObserverOptions. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-210462491">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-pressureobserveroptions-1" title="§ 10.2 The PressureObserver object">§ 10.2 The PressureObserver object</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserveroptions-2" title="§ 10.4 The PressureObserverOptions dictionary">§ 10.4 The PressureObserverOptions dictionary</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserveroptions-3" title="§ B. IDL Index">§ B. IDL Index</a> <a href="#ref-for-dom-pressureobserveroptions-4" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-pressureobserveroptions-sampleinterval" aria-label="Links in this document to definition: sampleInterval">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-pressureobserveroptions-sampleinterval" aria-label="Permalink for definition: sampleInterval. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-210462491">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-pressureobserveroptions-sampleinterval-1" title="§ 10.4 The PressureObserverOptions dictionary">§ 10.4 The PressureObserverOptions dictionary</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserveroptions-sampleinterval-2" title="§ 10.4.1 The sampleInterval member">§ 10.4.1 The sampleInterval member</a> 
    </li>
<li>
      <a href="#ref-for-dom-pressureobserveroptions-sampleinterval-3" title="§ B. IDL Index">§ B. IDL Index</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-reset-observation-window" aria-label="Links in this document to definition: reset observation window">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-reset-observation-window" aria-label="Permalink for definition: reset observation window. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-reset-observation-window-1" title="§ 7. Internal Slot Definitions">§ 7. Internal Slot Definitions</a> <a href="#ref-for-dfn-reset-observation-window-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-reset-observation-window-3" title="Reference 3">(3)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-reset-observation-window-4" title="§ 10.6.1 Supporting algorithms">§ 10.6.1 Supporting algorithms</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-owning-document-set" aria-label="Links in this document to definition: owning document set">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-owning-document-set" aria-label="Permalink for definition: owning document set. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-owning-document-set-1" title="§ 10.2.2 The observe() method">§ 10.2.2 The observe() method</a> 
    </li>
<li>
      <a href="#ref-for-dfn-owning-document-set-2" title="§ 10.6.1 Supporting algorithms">§ 10.6.1 Supporting algorithms</a> <a href="#ref-for-dfn-owning-document-set-3" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-document-has-implicit-focus" aria-label="Links in this document to definition: document has implicit focus">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-document-has-implicit-focus" aria-label="Permalink for definition: document has implicit focus. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-document-has-implicit-focus-1" title="§ 10.6.1 Supporting algorithms">§ 10.6.1 Supporting algorithms</a> <a href="#ref-for-dfn-document-has-implicit-focus-2" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-may-receive-data" aria-label="Links in this document to definition: may receive data">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-may-receive-data" aria-label="Permalink for definition: may receive data. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-may-receive-data-1" title="§ 10.6.2 Data delivery">§ 10.6.2 Data delivery</a> 
    </li>
<li>
      <a href="#ref-for-dfn-may-receive-data-2" title="§ 10.6.6 Handling change of fully active">§ 10.6.6 Handling change of fully active</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-passes-rate-test" aria-label="Links in this document to definition: passes rate test">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-passes-rate-test" aria-label="Permalink for definition: passes rate test. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-passes-rate-test-1" title="§ 10.6.2 Data delivery">§ 10.6.2 Data delivery</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-has-change-in-data" aria-label="Links in this document to definition: has change in data">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-has-change-in-data" aria-label="Permalink for definition: has change in data. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-has-change-in-data-1" title="§ 10.6.2 Data delivery">§ 10.6.2 Data delivery</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-passes-rate-obfuscation-test" aria-label="Links in this document to definition: passes rate obfuscation test">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-passes-rate-obfuscation-test" aria-label="Permalink for definition: passes rate obfuscation test. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-passes-rate-obfuscation-test-1" title="§ 10.6.2 Data delivery">§ 10.6.2 Data delivery</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-data-delivery" aria-label="Links in this document to definition: data delivery">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-data-delivery" aria-label="Permalink for definition: data delivery. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-data-delivery-1" title="§ 3.3 Sampling and Reporting Rate">§ 3.3 Sampling and Reporting Rate</a> 
    </li>
<li>
      <a href="#ref-for-dfn-data-delivery-2" title="§ 10.2.2 The observe() method">§ 10.2.2 The observe() method</a> <a href="#ref-for-dfn-data-delivery-3" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-data-delivery-4" title="§ 10.2.3 The unobserve() method">§ 10.2.3 The unobserve() method</a> 
    </li>
<li>
      <a href="#ref-for-dfn-data-delivery-5" title="§ 10.2.4 The disconnect() method">§ 10.2.4 The disconnect() method</a> 
    </li>
<li>
      <a href="#ref-for-dfn-data-delivery-6" title="§ 10.6.2 Data delivery">§ 10.6.2 Data delivery</a> <a href="#ref-for-dfn-data-delivery-7" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-data-delivery-8" title="§ 10.6.6 Handling change of fully active">§ 10.6.6 Handling change of fully active</a> <a href="#ref-for-dfn-data-delivery-9" title="Reference 2">(2)</a> <a href="#ref-for-dfn-data-delivery-10" title="Reference 3">(3)</a> <a href="#ref-for-dfn-data-delivery-11" title="Reference 4">(4)</a> <a href="#ref-for-dfn-data-delivery-12" title="Reference 5">(5)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-data-delivery-13" title="§ 10.6.7 Handle unloading document and closing of workers">§ 10.6.7 Handle unloading document and closing of workers</a> <a href="#ref-for-dfn-data-delivery-14" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-queue-a-record" aria-label="Links in this document to definition: queue a record">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-queue-a-record" aria-label="Permalink for definition: queue a record. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-queue-a-record-1" title="§ 10.6.2 Data delivery">§ 10.6.2 Data delivery</a> <a href="#ref-for-dfn-queue-a-record-2" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-pressureobserver-task-source" aria-label="Links in this document to definition: PressureObserver task source">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-pressureobserver-task-source" aria-label="Permalink for definition: PressureObserver task source. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-pressureobserver-task-source-1" title="§ 10.2.2 The observe() method">§ 10.2.2 The observe() method</a> <a href="#ref-for-dfn-pressureobserver-task-source-2" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-pressureobserver-task-source-3" title="§ 10.6.4 Queue a Pressure Observer Task">§ 10.6.4 Queue a Pressure Observer Task</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-queue-a-pressure-observer-task" aria-label="Links in this document to definition: queue a pressure observer task">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-queue-a-pressure-observer-task" aria-label="Permalink for definition: queue a pressure observer task. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-queue-a-pressure-observer-task-1" title="§ 10.6.3 Queue a PressureRecord">§ 10.6.3 Queue a PressureRecord</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-notify-pressure-observers" aria-label="Links in this document to definition: notify pressure observers">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-notify-pressure-observers" aria-label="Permalink for definition: notify pressure observers. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-notify-pressure-observers-1" title="§ 10.6.4 Queue a Pressure Observer Task">§ 10.6.4 Queue a Pressure Observer Task</a> 
    </li>
<li>
      <a href="#ref-for-dfn-notify-pressure-observers-2" title="§ 11.2.3 Rate obfuscation">§ 11.2.3 Rate obfuscation</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-rate-obfuscation" aria-label="Links in this document to definition: rate obfuscation">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-rate-obfuscation" aria-label="Permalink for definition: rate obfuscation. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-rate-obfuscation-1" title="§ 7. Internal Slot Definitions">§ 7. Internal Slot Definitions</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-break-calibration" aria-label="Links in this document to definition: break calibration">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-break-calibration" aria-label="Permalink for definition: break calibration. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-break-calibration-1" title="§ 9. Contributing Factors">§ 9. Contributing Factors</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-user-agent" aria-label="Links in this document to definition: user agent">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-user-agent" aria-label="Permalink for definition: user agent. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-user-agent-1" title="§ 2. A Note on Feature Detection">§ 2. A Note on Feature Detection</a> 
    </li>
<li>
      <a href="#ref-for-dfn-user-agent-2" title="§ 3.2 Supported sources">§ 3.2 Supported sources</a> <a href="#ref-for-dfn-user-agent-3" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-user-agent-4" title="§ 3.3 Sampling and Reporting Rate">§ 3.3 Sampling and Reporting Rate</a> <a href="#ref-for-dfn-user-agent-5" title="Reference 2">(2)</a> <a href="#ref-for-dfn-user-agent-6" title="Reference 3">(3)</a> <a href="#ref-for-dfn-user-agent-7" title="Reference 4">(4)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-user-agent-8" title="§ 4. Platform primitives">§ 4. Platform primitives</a> <a href="#ref-for-dfn-user-agent-9" title="Reference 2">(2)</a> <a href="#ref-for-dfn-user-agent-10" title="Reference 3">(3)</a> 
    </li>
<li>
      <a href="#ref-for-dfn-user-agent-11" title="§ 5. User notifications">§ 5. User notifications</a> 
    </li>
<li>
      <a href="#ref-for-dfn-user-agent-12" title="§ 7. Internal Slot Definitions">§ 7. Internal Slot Definitions</a> 
    </li>
<li>
      <a href="#ref-for-dfn-user-agent-13" title="§ 9. Contributing Factors">§ 9. Contributing Factors</a> 
    </li>
<li>
      <a href="#ref-for-dfn-user-agent-14" title="§ 10.4.1 The sampleInterval member">§ 10.4.1 The sampleInterval member</a> 
    </li>
  </ul>
    </div>
<script id="respec-dfn-panel">(() => {
// @ts-check
if (document.respec) {
  document.respec.ready.then(setupPanel);
} else {
  setupPanel();
}

function setupPanel() {
  const listener = panelListener();
  document.body.addEventListener("keydown", listener);
  document.body.addEventListener("click", listener);
}

function panelListener() {
  /** @type {HTMLElement} */
  let panel = null;
  return event => {
    const { target, type } = event;

    if (!(target instanceof HTMLElement)) return;

    // For keys, we only care about Enter key to activate the panel
    // otherwise it's activated via a click.
    if (type === "keydown" && event.key !== "Enter") return;

    const action = deriveAction(event);

    switch (action) {
      case "show": {
        hidePanel(panel);
        /** @type {HTMLElement} */
        const dfn = target.closest("dfn, .index-term");
        panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
        const coords = deriveCoordinates(event);
        displayPanel(dfn, panel, coords);
        break;
      }
      case "dock": {
        panel.style.left = null;
        panel.style.top = null;
        panel.classList.add("docked");
        break;
      }
      case "hide": {
        hidePanel(panel);
        panel = null;
        break;
      }
    }
  };
}

/**
 * @param {MouseEvent|KeyboardEvent} event
 */
function deriveCoordinates(event) {
  const target = /** @type HTMLElement */ (event.target);

  // We prevent synthetic AT clicks from putting
  // the dialog in a weird place. The AT events sometimes
  // lack coordinates, so they have clientX/Y = 0
  const rect = target.getBoundingClientRect();
  if (
    event instanceof MouseEvent &&
    event.clientX >= rect.left &&
    event.clientY >= rect.top
  ) {
    // The event probably happened inside the bounding rect...
    return { x: event.clientX, y: event.clientY };
  }

  // Offset to the middle of the element
  const x = rect.x + rect.width / 2;
  // Placed at the bottom of the element
  const y = rect.y + rect.height;
  return { x, y };
}

/**
 * @param {Event} event
 */
function deriveAction(event) {
  const target = /** @type {HTMLElement} */ (event.target);
  const hitALink = !!target.closest("a");
  if (target.closest("dfn:not([data-cite]), .index-term")) {
    return hitALink ? "none" : "show";
  }
  if (target.closest(".dfn-panel")) {
    if (hitALink) {
      return target.classList.contains("self-link") ? "hide" : "dock";
    }
    const panel = target.closest(".dfn-panel");
    return panel.classList.contains("docked") ? "hide" : "none";
  }
  if (document.querySelector(".dfn-panel:not([hidden])")) {
    return "hide";
  }
  return "none";
}

/**
 * @param {HTMLElement} dfn
 * @param {HTMLElement} panel
 * @param {{ x: number, y: number }} clickPosition
 */
function displayPanel(dfn, panel, { x, y }) {
  panel.hidden = false;
  // distance (px) between edge of panel and the pointing triangle (caret)
  const MARGIN = 20;

  const dfnRects = dfn.getClientRects();
  // Find the `top` offset when the `dfn` can be spread across multiple lines
  let closestTop = 0;
  let minDiff = Infinity;
  for (const rect of dfnRects) {
    const { top, bottom } = rect;
    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
    if (diffFromClickY < minDiff) {
      minDiff = diffFromClickY;
      closestTop = top;
    }
  }

  const top = window.scrollY + closestTop + dfnRects[0].height;
  const left = x - MARGIN;
  panel.style.left = `${left}px`;
  panel.style.top = `${top}px`;

  // Find if the panel is flowing out of the window
  const panelRect = panel.getBoundingClientRect();
  const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
  if (panelRect.right > SCREEN_WIDTH) {
    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
    const newCaretOffset = left - newLeft;
    panel.style.left = `${newLeft}px`;
    /** @type {HTMLElement} */
    const caret = panel.querySelector(".caret");
    caret.style.left = `${newCaretOffset}px`;
  }

  // As it's a dialog, we trap focus.
  // TODO: when <dialog> becomes a implemented, we should really
  // use that.
  trapFocus(panel, dfn);
}

/**
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function trapFocus(panel, dfn) {
  /** @type NodeListOf<HTMLAnchorElement> elements */
  const anchors = panel.querySelectorAll("a[href]");
  // No need to trap focus
  if (!anchors.length) return;

  // Move focus to first anchor element
  const first = anchors.item(0);
  first.focus();

  const trapListener = createTrapListener(anchors, panel, dfn);
  panel.addEventListener("keydown", trapListener);

  // Hiding the panel releases the trap
  const mo = new MutationObserver(records => {
    const [record] = records;
    const target = /** @type HTMLElement */ (record.target);
    if (target.hidden) {
      panel.removeEventListener("keydown", trapListener);
      mo.disconnect();
    }
  });
  mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
}

/**
 *
 * @param {NodeListOf<HTMLAnchorElement>} anchors
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function createTrapListener(anchors, panel, dfn) {
  const lastIndex = anchors.length - 1;
  let currentIndex = 0;
  return event => {
    switch (event.key) {
      // Hitting "Tab" traps us in a nice loop around elements.
      case "Tab": {
        event.preventDefault();
        currentIndex += event.shiftKey ? -1 : +1;
        if (currentIndex < 0) {
          currentIndex = lastIndex;
        } else if (currentIndex > lastIndex) {
          currentIndex = 0;
        }
        anchors.item(currentIndex).focus();
        break;
      }

      // Hitting "Enter" on an anchor releases the trap.
      case "Enter":
        hidePanel(panel);
        break;

      // Hitting "Escape" returns focus to dfn.
      case "Escape":
        hidePanel(panel);
        dfn.focus();
        return;
    }
  };
}

/** @param {HTMLElement} panel */
function hidePanel(panel) {
  if (!panel) return;
  panel.hidden = true;
  panel.classList.remove("docked");
}
})()</script><script src="www.w3.org/scripts/TR/2021/fixup.js"></script>
</body>
</html>