<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<meta charset="utf-8">
<meta name="generator" content="ReSpec 34.2.1">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<style>span.example-title{text-transform:none}
:is(aside,div).example,div.illegal-example{padding:.5em;margin:1em 0;position:relative;clear:both}
div.illegal-example{color:red}
div.illegal-example p{color:#000}
:is(aside,div).example{border-left-width:.5em;border-left-style:solid;border-color:#e0cb52;background:#fcfaee}
aside.example div.example{border-left-width:.1em;border-color:#999;background:#fff}
.example pre{background-color:rgba(0,0,0,.03)}</style>
<style>.issue-label{text-transform:initial}
.warning>p:first-child{margin-top:0}
.warning{padding:.5em;border-left-width:.5em;border-left-style:solid}
span.warning{padding:.1em .5em .15em}
.issue.closed span.issue-number{text-decoration:line-through}
.issue.closed span.issue-number::after{content:" (Closed)";font-size:smaller}
.warning{border-color:#f11;border-width:.2em;border-style:solid;background:#fbe9e9}
.warning-title:before{content:"⚠";font-size:1.3em;float:left;padding-right:.3em;margin-top:-.3em}
li.task-list-item{list-style:none}
input.task-list-item-checkbox{margin:0 .35em .25em -1.6em;vertical-align:middle}
.issue a.respec-gh-label{padding:5px;margin:0 2px 0 2px;font-size:10px;text-transform:none;text-decoration:none;font-weight:700;border-radius:4px;position:relative;bottom:2px;border:none;display:inline-block}</style>
<style>pre.idl{padding:1em;position:relative}
pre.idl>code{color:#000}
@media print{
pre.idl{white-space:pre-wrap}
}
.idlHeader{display:block;width:150px;background:#8ccbf2;color:#fff;font-family:sans-serif;font-weight:700;margin:-1em 0 1em -1em;height:28px;line-height:28px}
.idlHeader a.self-link{margin-left:.3cm;text-decoration:none;border-bottom:none}
.idlID{font-weight:700;color:#005a9c}
.idlType{color:#005a9c}
.idlName{color:#ff4500}
.idlName a{color:#ff4500;border-bottom:1px dotted #ff4500;text-decoration:none}
a.idlEnumItem{color:#000;border-bottom:1px dotted #ccc;text-decoration:none}
.idlSuperclass{font-style:italic;color:#005a9c}
.idlDefaultValue,.idlParamName{font-style:italic}
.extAttr{color:#666}
.idlSectionComment{color:gray}
.idlIncludes a{font-weight:700}
.respec-button-copy-paste:focus{text-decoration:none;border-color:#51a7e8;outline:0;box-shadow:0 0 5px rgba(81,167,232,.5)}
.respec-button-copy-paste:is(:focus:hover,.selected:focus){border-color:#51a7e8}
.respec-button-copy-paste:is(:hover,:active,.zeroclipboard-is-hover,.zeroclipboard-is-active){text-decoration:none;background-color:#ddd;background-image:linear-gradient(#eee,#ddd);border-color:#ccc}
.respec-button-copy-paste:is(:active,.selected,.zeroclipboard-is-active){background-color:#dcdcdc;background-image:none;border-color:#b5b5b5;box-shadow:inset 0 2px 4px rgba(0,0,0,.15)}
.respec-button-copy-paste.selected:hover{background-color:#cfcfcf}
.respec-button-copy-paste:is(:disabled,:disabled:hover,.disabled,.disabled:hover){color:rgba(102,102,102,.5);cursor:default;background-color:rgba(229,229,229,.5);background-image:none;border-color:rgba(197,197,197,.5);box-shadow:none}
@media print{
.respec-button-copy-paste{visibility:hidden}
}</style>
<style>dfn{cursor:pointer}
.dfn-panel{position:absolute;z-index:35;min-width:300px;max-width:500px;padding:.5em .75em;margin-top:.6em;font-family:"Helvetica Neue",sans-serif;font-size:small;background:#fff;color:#000;box-shadow:0 1em 3em -.4em rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);border-radius:2px}
.dfn-panel:not(.docked)>.caret{position:absolute;top:-9px}
.dfn-panel:not(.docked)>.caret::after,.dfn-panel:not(.docked)>.caret::before{content:"";position:absolute;border:10px solid transparent;border-top:0;border-bottom:10px solid #fff;top:0}
.dfn-panel:not(.docked)>.caret::before{border-bottom:9px solid #a2a9b1}
.dfn-panel *{margin:0}
.dfn-panel b{display:block;color:#000;margin-top:.25em}
.dfn-panel ul a[href]{color:#333}
.dfn-panel>div{display:flex}
.dfn-panel a.self-link{font-weight:700;margin-right:auto}
.dfn-panel .marker{padding:.1em;margin-left:.5em;border-radius:.2em;text-align:center;white-space:nowrap;font-size:90%;color:#040b1c}
.dfn-panel .marker.dfn-exported{background:#d1edfd;box-shadow:0 0 0 .125em #1ca5f940}
.dfn-panel .marker.idl-block{background:#8ccbf2;box-shadow:0 0 0 .125em #0670b161}
.dfn-panel a:not(:hover){text-decoration:none!important;border-bottom:none!important}
.dfn-panel a[href]:hover{border-bottom-width:1px}
.dfn-panel ul{padding:0}
.dfn-panel li{margin-left:1em}
.dfn-panel.docked{position:fixed;left:.5em;top:unset;bottom:2em;margin:0 auto;max-width:calc(100vw - .75em * 2 - .5em - .2em * 2);max-height:30vh;overflow:auto}</style>
  
<title>User Timing Level 3</title>
  
  
<style id="respec-mainstyle">@keyframes pop{
0%{transform:scale(1,1)}
25%{transform:scale(1.25,1.25);opacity:.75}
100%{transform:scale(1,1)}
}
:is(h1,h2,h3,h4,h5,h6,a) abbr{border:none}
dfn{font-weight:700}
a.internalDFN{color:inherit;border-bottom:1px solid #99c;text-decoration:none}
a.externalDFN{color:inherit;border-bottom:1px dotted #ccc;text-decoration:none}
a.bibref{text-decoration:none}
.respec-offending-element:target{animation:pop .25s ease-in-out 0s 1}
.respec-offending-element,a[href].respec-offending-element{text-decoration:red wavy underline}
@supports not (text-decoration:red wavy underline){
.respec-offending-element:not(pre){display:inline-block}
.respec-offending-element{background:url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs) bottom repeat-x}
}
#references :target{background:#eaf3ff;animation:pop .4s ease-in-out 0s 1}
cite .bibref{font-style:normal}
a[href].orcid{padding-left:4px;padding-right:4px}
a[href].orcid>svg{margin-bottom:-2px}
.toc a,.tof a{text-decoration:none}
a .figno,a .secno{color:#000}
ol.tof,ul.tof{list-style:none outside none}
.caption{margin-top:.5em;font-style:italic}
table.simple{border-spacing:0;border-collapse:collapse;border-bottom:3px solid #005a9c}
.simple th{background:#005a9c;color:#fff;padding:3px 5px;text-align:left}
.simple th a{color:#fff;padding:3px 5px;text-align:left}
.simple th[scope=row]{background:inherit;color:inherit;border-top:1px solid #ddd}
.simple td{padding:3px 10px;border-top:1px solid #ddd}
.simple tr:nth-child(even){background:#f0f6ff}
.section dd>p:first-child{margin-top:0}
.section dd>p:last-child{margin-bottom:0}
.section dd{margin-bottom:1em}
.section dl.attrs dd,.section dl.eldef dd{margin-bottom:0}
#issue-summary>ul{column-count:2}
#issue-summary li{list-style:none;display:inline-block}
details.respec-tests-details{margin-left:1em;display:inline-block;vertical-align:top}
details.respec-tests-details>*{padding-right:2em}
details.respec-tests-details[open]{z-index:999999;position:absolute;border:thin solid #cad3e2;border-radius:.3em;background-color:#fff;padding-bottom:.5em}
details.respec-tests-details[open]>summary{border-bottom:thin solid #cad3e2;padding-left:1em;margin-bottom:1em;line-height:2em}
details.respec-tests-details>ul{width:100%;margin-top:-.3em}
details.respec-tests-details>li{padding-left:1em}
.self-link:hover{opacity:1;text-decoration:none;background-color:transparent}
aside.example .marker>a.self-link{color:inherit}
.header-wrapper{display:flex;align-items:baseline}
:is(h2,h3,h4,h5,h6):not(#toc>h2,#abstract>h2,#sotd>h2,.head>h2){position:relative;left:-.5em}
:is(h2,h3,h4,h5,h6):not(#toch2)+a.self-link{color:inherit;order:-1;position:relative;left:-1.1em;font-size:1rem;opacity:.5}
:is(h2,h3,h4,h5,h6)+a.self-link::before{content:"§";text-decoration:none;color:var(--heading-text)}
:is(h2,h3)+a.self-link{top:-.2em}
:is(h4,h5,h6)+a.self-link::before{color:#000}
@media (max-width:767px){
dd{margin-left:0}
}
@media print{
.removeOnSave{display:none}
}</style>
  

<meta name="revision" content="9508b117c713223cd0e721dc11543dc5c1d45e7e">
<meta name="description" content="This specification defines an interface to help web
    developers measure the performance of their applications by giving them access
    to high precision timestamps.">
<link rel="canonical" href="www.w3.org/TR/user-timing/">
<style>.hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;background:#fafafa}
.hljs-comment,.hljs-quote{color:#717277;font-style:italic}
.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}
.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#ca4706;font-weight:700}
.hljs-literal{color:#0b76c5}
.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#42803c}
.hljs-built_in,.hljs-class .hljs-title{color:#9a6a01}
.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}
.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#336ae3}
.hljs-emphasis{font-style:italic}
.hljs-strong{font-weight:700}
.hljs-link{text-decoration:underline}</style>
<style>var{position:relative;cursor:pointer}
var[data-type]::after,var[data-type]::before{position:absolute;left:50%;top:-6px;opacity:0;transition:opacity .4s;pointer-events:none}
var[data-type]::before{content:"";transform:translateX(-50%);border-width:4px 6px 0 6px;border-style:solid;border-color:transparent;border-top-color:#000}
var[data-type]::after{content:attr(data-type);transform:translateX(-50%) translateY(-100%);background:#000;text-align:center;font-family:"Dank Mono","Fira Code",monospace;font-style:normal;padding:6px;border-radius:3px;color:#daca88;text-indent:0;font-weight:400}
var[data-type]:hover::after,var[data-type]:hover::before{opacity:1}</style>
<script id="initialUserConfig" type="application/json">{
  "specStatus": "CRD",
  "shortName": "user-timing",
  "editors": [
    {
      "name": "Nicolás Peña Moreno",
      "url": "https://https://tawasl-zahra.github.io/whimsywondershttps://https://tawasl-zahra.github.io/whimsywonderstawasl-zahra.github.io/whimsywondersgithub.com/npm1",
      "company": "Google",
      "companyURL": "https://https://tawasl-zahra.github.io/whimsywondershttps://https://tawasl-zahra.github.io/whimsywonderstawasl-zahra.github.io/whimsywondersgoogle.com/",
      "w3cid": "103755"
    }
  ],
  "formerEditors": [
    {
      "name": "Ilya Grigorik",
      "url": "https://https://tawasl-zahra.github.io/whimsywondershttps://https://tawasl-zahra.github.io/whimsywonderstawasl-zahra.github.io/whimsywonderswww.igvita.com/",
      "company": "Google",
      "companyURL": "https://https://tawasl-zahra.github.io/whimsywondershttps://https://tawasl-zahra.github.io/whimsywonderstawasl-zahra.github.io/whimsywondersgoogle.com/",
      "w3cid": "56102"
    },
    {
      "name": "Jatinder Mann",
      "company": "Microsoft Corp.",
      "note": "Until February 2014",
      "email": "jmann@microsoft.com",
      "w3cid": "44357"
    },
    {
      "name": "Zhiheng Wang",
      "company": "Google Inc.",
      "note": "Until July 2013",
      "w3cid": "43685"
    },
    {
      "name": "Anderson Quach",
      "company": "Microsoft Corp.",
      "note": "until March 2011",
      "w3cid": "45288"
    }
  ],
  "group": "webperf",
  "wgPublicList": "public-web-perf",
  "subjectPrefix": "[UserTiming]",
  "testSuiteURI": "https://https://tawasl-zahra.github.io/whimsywondershttps://https://tawasl-zahra.github.io/whimsywonderstawasl-zahra.github.io/whimsywonderswpt.fyi/results/user-timing",
  "implementationReportURI": "https://https://tawasl-zahra.github.io/whimsywondershttps://https://tawasl-zahra.github.io/whimsywonderstawasl-zahra.github.io/whimsywonderswpt.fyi/results/user-timing",
  "crEnd": "2018-08-06",
  "previousMaturity": "CRD",
  "github": "https://https://tawasl-zahra.github.io/whimsywondershttps://https://tawasl-zahra.github.io/whimsywonderstawasl-zahra.github.io/whimsywondersgithub.com/w3c/user-timing/",
  "otherLinks": [
    {
      "key": "Implementation",
      "data": [
        {
          "value": "Can I use User Timing?",
          "href": "https://https://tawasl-zahra.github.io/whimsywondershttps://https://tawasl-zahra.github.io/whimsywonderstawasl-zahra.github.io/whimsywonderscaniuse.com/#feat=user-timing"
        }
      ]
    }
  ],
  "xref": {
    "specs": [
      "infra"
    ]
  },
  "historyURI": "https://https://tawasl-zahra.github.io/whimsywondershttps://https://tawasl-zahra.github.io/whimsywonderstawasl-zahra.github.io/whimsywonderswww.w3.org/standards/history/user-timing",
  "gitRevision": "9508b117c713223cd0e721dc11543dc5c1d45e7e",
  "publishDate": "2023-11-14",
  "previousPublishDate": "2023-11-14",
  "publishISODate": "2023-11-14T00:00:00.000Z",
  "generatedSubtitle": "W3C Candidate Recommendation Draft 14 November 2023"
}</script>
<link rel="stylesheet" href="www.w3.org/StyleSheets/TR/2021/W3C-CRD">
</head>
<body class="h-entry" data-cite="WEBIDL infra">
<div class="head">
    <p class="logos"><a class="logo" href="www.w3.org/"><img crossorigin="" alt="W3C" height="48" src="www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
  </a></p>
    <h1 id="title" class="title">User Timing Level 3</h1> 
    <p id="w3c-state"><a href="www.w3.org/standards/types#CRD">W3C Candidate Recommendation Draft</a> <time class="dt-published" datetime="2023-11-14">14 November 2023</time></p>
    <details open="">
      <summary>More details about this document</summary>
      <dl>
        <dt>This version:</dt>
<dd>
                <a class="u-url" href="www.w3.org/TR/2023/CRD-user-timing-20231114/">https://www.w3.org/TR/2023/CRD-user-timing-20231114/</a>
              </dd>
        <dt>Latest published version:</dt>
<dd>
                <a href="www.w3.org/TR/user-timing/">https://www.w3.org/TR/user-timing/</a>
              </dd>
        <dt>Latest editor's draft:</dt>
<dd><a href="w3c.github.io/user-timing/">https://w3c.github.io/user-timing/</a></dd>
        <dt>History:</dt>
<dd>
                    <a href="www.w3.org/standards/history/user-timing">https://www.w3.org/standards/history/user-timing</a>
                  </dd>
<dd>
                    <a href="github.com/w3c/user-timing/commits/">Commit history</a>
                  </dd>
        <dt>Test suite:</dt>
<dd><a href="wpt.fyi/results/user-timing">https://wpt.fyi/results/user-timing</a></dd>
        <dt>Implementation report:</dt>
<dd>
                <a href="wpt.fyi/results/user-timing">https://wpt.fyi/results/user-timing</a>
              </dd>
        
        
        
        <dt>Editor:</dt>
<dd class="editor p-author h-card vcard" data-editor-id="103755">
    <a class="u-url url p-name fn" href="github.com/npm1">Nicolás Peña Moreno</a> (<a class="p-org org h-org" href="google.com/">Google</a>)
  </dd>
        <dt>
                Former editors:
              </dt>
<dd class="editor p-author h-card vcard" data-editor-id="56102">
    <a class="u-url url p-name fn" href="www.igvita.com/">Ilya Grigorik</a> (<a class="p-org org h-org" href="google.com/">Google</a>)
  </dd>
<dd class="editor p-author h-card vcard" data-editor-id="44357">
    <span class="p-name fn">Jatinder Mann</span> (<span class="p-org org h-org">Microsoft Corp.</span>) (Until February 2014)
  </dd>
<dd class="editor p-author h-card vcard" data-editor-id="43685">
    <span class="p-name fn">Zhiheng Wang</span> (<span class="p-org org h-org">Google Inc.</span>) (Until July 2013)
  </dd>
<dd class="editor p-author h-card vcard" data-editor-id="45288">
    <span class="p-name fn">Anderson Quach</span> (<span class="p-org org h-org">Microsoft Corp.</span>) (until March 2011)
  </dd>
        
        <dt>Feedback:</dt>
<dd>
        <a href="github.com/w3c/user-timing/">GitHub w3c/user-timing</a>
        (<a href="github.com/w3c/user-timing/pulls/">pull requests</a>,
        <a href="github.com/w3c/user-timing/issues/new/choose">new issue</a>,
        <a href="github.com/w3c/user-timing/issues/">open issues</a>)
      </dd>
<dd>
<a href="mailto:public-web-perf@w3.org?subject=%5BUserTiming%5D">public-web-perf@w3.org</a> with subject line <kbd>[UserTiming]</kbd> (<a rel="discussion" href="lists.w3.org/Archives/Public/public-web-perf">archives</a>)</dd>
        
        <dt>Implementation</dt>
<dd>
    <a href="caniuse.com/#feat=user-timing">Can I use User Timing?</a>
  </dd>
      </dl>
    </details>
    
    
    <p class="copyright">
    <a href="www.w3.org/policies/#copyright">Copyright</a>
    ©
    2023
    
    <a href="www.w3.org/">World Wide Web Consortium</a>.
    <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup>
    <a href="www.w3.org/policies/#Legal_Disclaimer">liability</a>,
    <a href="www.w3.org/policies/#W3C_Trademarks">trademark</a> and
    <a rel="license" href="www.w3.org/copyright/software-license-2023/" title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
  </p>
    <hr title="Separator for header">
  </div>
  <section id="abstract" class="introductory"><h2>Abstract</h2>
    <p>This specification defines an interface to help web
    developers measure the performance of their applications by giving them access
    to high precision timestamps.</p>
  </section>
  <section id="sotd" class="introductory"><h2>Status of This Document</h2>
<p><em>This section describes the status of this
      document at the time of its publication. A list of current <abbr title="World Wide Web Consortium">W3C</abbr>
      publications and the latest revision of this technical report can be found
      in the <a href="www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports index</a> at
      https://www.w3.org/TR/.</em></p>
    <p>User Timing Level 3 is intended to supersede [<cite><a class="bibref" data-link-type="biblio" href="#bib-user-timing-2" title="User Timing Level 2">USER-TIMING-2</a></cite>] and includes:</p>
    <ul>
      <li>Ability to execute marks and measures across arbitrary timestamps.</li>
      <li>Support for reporting arbitrary metadata along with marks and measures.</li>
    </ul>
  <p>
    This document was published by the <a href="www.w3.org/groups/wg/webperf">Web Performance Working Group</a> as
    a Candidate Recommendation Draft using the
        <a href="www.w3.org/2023/Process-20231103/#recs-and-notes">Recommendation track</a>. 
  </p>
<p>Publication as a Candidate Recommendation does not
  imply endorsement by <abbr title="World Wide Web Consortium">W3C</abbr> and its Members. A Candidate Recommendation Draft integrates
      changes from the previous Candidate Recommendation that the Working Group
      intends to include in a subsequent Candidate Recommendation Snapshot.</p>
<p>
    This is a draft document and may be updated, replaced or obsoleted by other
    documents at any time. It is inappropriate to cite this document as other
    than work in progress.
    
  </p>
<p>
    
        This document was produced by a group
        operating under the
        <a href="www.w3.org/Consortium/Patent-Policy/"><abbr title="World Wide Web Consortium">W3C</abbr> Patent
          Policy</a>.
      
    
                <abbr title="World Wide Web Consortium">W3C</abbr> maintains a
                <a rel="disclosure" href="www.w3.org/groups/wg/webperf/ipr">public list of any patent disclosures</a>
          made in connection with the deliverables of
          the group; that page also includes
          instructions for disclosing a patent. An individual who has actual
          knowledge of a patent which the individual believes contains
          <a href="www.w3.org/Consortium/Patent-Policy/#def-essential">Essential Claim(s)</a>
          must disclose the information in accordance with
          <a href="www.w3.org/Consortium/Patent-Policy/#sec-Disclosure">section 6 of the <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.
        
  </p>
<p>
                  This document is governed by the
                  <a id="w3c_process_revision" href="www.w3.org/2023/Process-20231103/">03 November 2023 <abbr title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
                </p></section><nav id="toc"><h2 class="introductory" id="table-of-contents">Table of Contents</h2>
<ol class="toc">
<li class="tocline"><a class="tocxref" href="#abstract">Abstract</a></li>
<li class="tocline"><a class="tocxref" href="#sotd">Status of This Document</a></li>
<li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>Introduction</a></li>
<li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">2. </bdi>Conformance</a></li>
<li class="tocline">
<a class="tocxref" href="#user-timing"><bdi class="secno">3. </bdi>User Timing</a><ol class="toc">
<li class="tocline">
<a class="tocxref" href="#extensions-performance-interface"><bdi class="secno">3.1 </bdi>Extensions to the <code><span data-cite="HR-TIME-2#dfn-performance" data-idl="interface" data-title="Performance" data-dfn-for="" class="externalDFN" data-no-export=""><span data-cite="HR-TIME-2" data-cite-path="" data-cite-frag="#dfn-performance" class="formerLink">Performance</span></span></code> interface</a><ol class="toc">
<li class="tocline">
<a class="tocxref" href="#mark-method"><bdi class="secno">3.1.1 </bdi><span data-export="" data-dfn-type="method" data-idl="operation" data-title="mark()" data-dfn-for="Performance" data-type="PerformanceMark" data-lt="mark()|mark(markName)|mark(markName, markOptions)" data-local-lt="Performance.mark|Performance.mark()|mark"><code>mark()</code></span> method</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#performancemarkoptions-dictionary"><bdi class="secno">3.1.1.1 </bdi><span data-export="" data-dfn-type="dictionary" data-idl="dictionary" data-title="PerformanceMarkOptions" data-dfn-for=""><code>PerformanceMarkOptions</code></span> dictionary</a></li></ol>
</li>
<li class="tocline"><a class="tocxref" href="#clearmarks-method"><bdi class="secno">3.1.2 </bdi><span data-export="" data-dfn-type="method" data-idl="operation" data-title="clearMarks()" data-dfn-for="Performance" data-type="undefined" data-lt="clearMarks()|clearMarks(markName)" data-local-lt="Performance.clearMarks|Performance.clearMarks()|clearMarks"><code>clearMarks()</code></span> method</a></li>
<li class="tocline">
<a class="tocxref" href="#measure-method"><bdi class="secno">3.1.3 </bdi><span data-export="" data-dfn-type="method" data-idl="operation" data-title="measure()" data-dfn-for="Performance" data-type="PerformanceMeasure" data-lt="measure()|measure(measureName)|measure(measureName, startOrMeasureOptions)|measure(measureName, startOrMeasureOptions, endMark)" data-local-lt="Performance.measure|Performance.measure()|measure"><code>measure()</code></span> method</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#performancemeasureoptions-dictionary"><bdi class="secno">3.1.3.1 </bdi><span data-export="" data-dfn-type="dictionary" data-idl="dictionary" data-title="PerformanceMeasureOptions" data-dfn-for=""><code>PerformanceMeasureOptions</code></span> dictionary</a></li></ol>
</li>
<li class="tocline"><a class="tocxref" href="#clearmeasures-method"><bdi class="secno">3.1.4 </bdi><span data-export="" data-dfn-type="method" data-idl="operation" data-title="clearMeasures()" data-dfn-for="Performance" data-type="undefined" data-lt="clearMeasures()|clearMeasures(measureName)" data-local-lt="Performance.clearMeasures|Performance.clearMeasures()|clearMeasures"><code>clearMeasures()</code></span> method</a></li>
</ol>
</li>
<li class="tocline">
<a class="tocxref" href="#performancemark"><bdi class="secno">3.2 </bdi>The <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="PerformanceMark" data-dfn-for=""><code>PerformanceMark</code></span> Interface</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#the-performancemark-constructor"><bdi class="secno">3.2.1 </bdi>The <span><span class="formerLink" data-link-type="idl"><code>PerformanceMark</code></span> Constructor</span></a></li></ol>
</li>
<li class="tocline"><a class="tocxref" href="#performancemeasure"><bdi class="secno">3.3 </bdi>The <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="PerformanceMeasure" data-dfn-for=""><code>PerformanceMeasure</code></span> Interface</a></li>
</ol>
</li>
<li class="tocline">
<a class="tocxref" href="#processing"><bdi class="secno">4. </bdi>Processing</a><ol class="toc">
<li class="tocline"><a class="tocxref" href="#convert-a-mark-to-a-timestamp"><bdi class="secno">4.1 </bdi>Convert a <var>mark</var> to a <var>timestamp</var></a></li>
<li class="tocline"><a class="tocxref" href="#convert-a-name-to-a-timestamp"><bdi class="secno">4.2 </bdi>Convert a <var>name</var> to a <var>timestamp</var></a></li>
</ol>
</li>
<li class="tocline"><a class="tocxref" href="#recommended-mark-names"><bdi class="secno">5. </bdi>Recommended mark names</a></li>
<li class="tocline"><a class="tocxref" href="#privacy-security"><bdi class="secno">6. </bdi>Privacy and Security</a></li>
<li class="tocline"><a class="tocxref" href="#acknowledgments"><bdi class="secno">A. </bdi>Acknowledgments</a></li>
<li class="tocline">
<a class="tocxref" href="#references"><bdi class="secno">B. </bdi>References</a><ol class="toc">
<li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">B.1 </bdi>Normative references</a></li>
<li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">B.2 </bdi>Informative references</a></li>
</ol>
</li>
</ol></nav>
  <section class="informative" id="introduction"><div class="header-wrapper">
<h2 id="x1-introduction">
<bdi class="secno">1. </bdi>Introduction</h2>
<a class="self-link" href="#introduction" aria-label="Permalink for Section 1."></a>
</div>
<p><em>This section is non-normative.</em></p>
    
    <p>Web developers need the ability to assess and understand the performance characteristics of their applications. While JavaScript [<cite><a class="bibref" data-link-type="biblio" href="#bib-ecma-262" title="ECMAScript Language Specification">ECMA-262</a></cite>] provides a mechanism to measure application latency (retrieving the current timestamp from the <code>Date.now()</code> method), the precision of this timestamp varies between user agents.</p>
    <p>This document defines the <a href="#dom-performancemark" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemark-1"><code>PerformanceMark</code></a> and <a href="#dom-performancemeasure" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasure-1"><code>PerformanceMeasure</code></a> interfaces, and extensions to the <a href="#extensions-performance-interface"><code>Performance</code></a> interface, which expose a high precision, monotonically increasing timestamp so that developers can better measure the performance characteristics of their applications.</p>
    <div class="informative">
      <p>The following script shows how a developer can use the interfaces defined in this document to obtain timing data related to developer scripts.</p>
      <div class="example" id="example-1">
        <div class="marker">
    <a class="self-link" href="#example-1">Example<bdi> 1</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">run</span>(<span class="hljs-params"></span>) </span>{
  performance.mark(<span class="hljs-string">"startTask1"</span>);
  <span class="hljs-keyword">await</span> doTask1(); <span class="hljs-comment">// Some developer code</span>
  performance.mark(<span class="hljs-string">"endTask1"</span>);

  performance.mark(<span class="hljs-string">"startTask2"</span>);
  <span class="hljs-keyword">await</span> doTask2(); <span class="hljs-comment">// Some developer code</span>
  performance.mark(<span class="hljs-string">"endTask2"</span>);

  <span class="hljs-comment">// Log them out</span>
  <span class="hljs-keyword">const</span> entries = performance.getEntriesByType(<span class="hljs-string">"mark"</span>);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> entries) {
    <span class="hljs-built_in">console</span>.table(entry.toJSON());
  }
}
run();</code></pre>
      </div>
      <div class="note" role="note" id="issue-container-generatedID">
<div role="heading" class="note-title marker" id="h-note" aria-level="3"><span>Note</span></div>
<p class="">[<cite><a class="bibref" data-link-type="biblio" href="#bib-performance-timeline-2" title="Performance Timeline">PERFORMANCE-TIMELINE-2</a></cite>] defines two mechanisms that
      can be used to retrieve recorded metrics: <code>getEntries()</code>
      and <code>getEntriesByType()</code> methods, and the
      <code>PerformanceObserver</code> interface. The former is best suited
      for cases where you want to retrieve a particular metric by name at a
      single point in time, and the latter is optimized for cases where you
      may want to receive notifications of new metrics as they become
      available.</p>
</div>
      <p>As another example, suppose that there is an element which, when
      clicked, fetches some new content and indicates that it has been fetched.
      We'd like to report the time from when the user clicked to when the fetch
      was complete. We can't mark the time the click handler executes since that
      will miss latency to process the event, so instead we use the event
      hardware timestamp. We also want to know the name of the component to have
      more detailed analytics.</p>
      <div class="example" id="example-2">
        <div class="marker">
    <a class="self-link" href="#example-2">Example<bdi> 2</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs javascript">element.addEventListener(<span class="hljs-string">"click"</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> component = getComponent(element);
  fetch(component.url).then(<span class="hljs-function">() =&gt;</span> {
    element.textContent = <span class="hljs-string">"Updated"</span>;
    <span class="hljs-keyword">const</span> updateMark = performance.mark(<span class="hljs-string">"update_component"</span>, {
      <span class="hljs-attr">detail</span>: {<span class="hljs-attr">component</span>: component.name},
    });
    performance.measure(<span class="hljs-string">"click_to_update_component"</span>, {
      <span class="hljs-attr">detail</span>: {<span class="hljs-attr">component</span>: component.name},
      <span class="hljs-attr">start</span>: e.timeStamp,
      <span class="hljs-attr">end</span>: updateMark.startTime,
    });
  });
});</code></pre>
      </div>
    </div>
  </section>
  <section id="conformance"><div class="header-wrapper">
<h2 id="x2-conformance">
<bdi class="secno">2. </bdi>Conformance</h2>
<a class="self-link" href="#conformance" aria-label="Permalink for Section 2."></a>
</div>
<p>As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this specification are non-normative. Everything else in this specification is normative.</p>
<p>
        The key words <em class="rfc2119">MAY</em> and <em class="rfc2119">MUST</em> in this document
        are to be interpreted as described in
        <a href="datatracker.ietf.org/doc/html/bcp14">BCP 14</a>
        [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8174" title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
        when, and only when, they appear in all capitals, as shown here.
      </p>
    <p>Some conformance requirements are phrased as requirements on attributes,
    methods or objects. Such requirements are to be interpreted as requirements
    on user agents. </p>

    <p>The IDL fragments in this specification <em class="rfc2119">MUST</em> be interpreted as
    required for conforming IDL fragments, as described in the Web IDL
    specification. [<cite><a class="bibref" data-link-type="biblio" href="#bib-webidl" title="Web IDL Standard">WEBIDL</a></cite>]</p>
  </section>
  <section id="user-timing"><div class="header-wrapper">
<h2 id="x3-user-timing">
<bdi class="secno">3. </bdi>User Timing</h2>
<a class="self-link" href="#user-timing" aria-label="Permalink for Section 3."></a>
</div>
    
    <section id="extensions-performance-interface" data-dfn-for="Performance" data-link-for="Performance"><div class="header-wrapper">
<h3 id="x3-1-extensions-to-the-performance-interface">
<bdi class="secno">3.1 </bdi>Extensions to the <code><dfn id="dom-performance" data-idl="interface" data-title="Performance" data-dfn-for="" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="www.w3.org/TR/hr-time-2/#dfn-performance">Performance</a></dfn></code> interface</h3>
<a class="self-link" href="#extensions-performance-interface" aria-label="Permalink for Section 3.1"></a>
</div>
      
      <p>The <a data-link-type="idl" href="www.w3.org/TR/hr-time-2/#dfn-performance"><code>Performance</code></a> interface and <dfn id="dfn-domhighrestimestamp" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp">DOMHighResTimeStamp</a></dfn> are defined in [<cite><a class="bibref" data-link-type="biblio" href="#bib-hr-time-2" title="High Resolution Time Level 2">HR-TIME-2</a></cite>].
        The <dfn id="dfn-performanceentry" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="www.w3.org/TR/performance-timeline/#dom-performanceentry">PerformanceEntry</a></dfn> interface is defined in [<cite><a class="bibref" data-link-type="biblio" href="#bib-performance-timeline-2" title="Performance Timeline">PERFORMANCE-TIMELINE-2</a></cite>].
      </p>
      <pre class="idl def" id="webidl-1427196332"><span class="idlHeader"><a class="self-link" href="#webidl-1427196332">WebIDL</a></span><code><span data-idl="" class="idlDictionary" id="idl-def-performancemarkoptions" data-title="PerformanceMarkOptions">dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-performancemarkoptions" id="ref-for-dom-performancemarkoptions-1"><code>PerformanceMarkOptions</code></a> {<span data-idl="" class="idlMember" id="idl-def-performancemarkoptions-detail" data-title="detail" data-dfn-for="PerformanceMarkOptions"><span class="idlType">
    <a data-link-type="idl" data-type="interface" href="webidl.spec.whatwg.org/#idl-any">any</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-performancemarkoptions-detail" id="ref-for-dom-performancemarkoptions-detail-1"><code>detail</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-performancemarkoptions-starttime" data-title="startTime" data-dfn-for="PerformanceMarkOptions"><span class="idlType">
    <a data-link-type="idl" href="www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp">DOMHighResTimeStamp</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-performancemarkoptions-starttime" id="ref-for-dom-performancemarkoptions-starttime-1"><code>startTime</code></a>;</span>
};</span><span data-idl="" class="idlDictionary" id="idl-def-performancemeasureoptions" data-title="PerformanceMeasureOptions">

dictionary <a class="internalDFN idlID" data-link-type="dictionary" href="#dom-performancemeasureoptions" id="ref-for-dom-performancemeasureoptions-1"><code>PerformanceMeasureOptions</code></a> {<span data-idl="" class="idlMember" id="idl-def-performancemeasureoptions-detail" data-title="detail" data-dfn-for="PerformanceMeasureOptions"><span class="idlType">
    <a data-link-type="idl" data-type="interface" href="webidl.spec.whatwg.org/#idl-any">any</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-performancemeasureoptions-detail" id="ref-for-dom-performancemeasureoptions-detail-1"><code>detail</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-performancemeasureoptions-start" data-title="start" data-dfn-for="PerformanceMeasureOptions"><span class="idlType">
    (<a data-link-type="idl" data-type="interface" href="webidl.spec.whatwg.org/#idl-DOMString">DOMString</a> or <a data-link-type="idl" href="www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp">DOMHighResTimeStamp</a>)</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-performancemeasureoptions-start" id="ref-for-dom-performancemeasureoptions-start-1"><code>start</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-performancemeasureoptions-duration" data-title="duration" data-dfn-for="PerformanceMeasureOptions"><span class="idlType">
    <a data-link-type="idl" href="www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp">DOMHighResTimeStamp</a></span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-performancemeasureoptions-duration" id="ref-for-dom-performancemeasureoptions-duration-1"><code>duration</code></a>;</span><span data-idl="" class="idlMember" id="idl-def-performancemeasureoptions-end" data-title="end" data-dfn-for="PerformanceMeasureOptions"><span class="idlType">
    (<a data-link-type="idl" data-type="interface" href="webidl.spec.whatwg.org/#idl-DOMString">DOMString</a> or <a data-link-type="idl" href="www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp">DOMHighResTimeStamp</a>)</span> <a class="internalDFN idlName" data-link-type="dict-member" href="#dom-performancemeasureoptions-end" id="ref-for-dom-performancemeasureoptions-end-1"><code>end</code></a>;</span>
};</span><span data-idl="" class="idlInterface" id="idl-def-performance-partial-1" data-title="Performance">

partial interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-performance"><code>Performance</code></a> {<span data-idl="" class="idlMethod" id="idl-def-performance-mark-markname-markoptions" data-title="mark" data-dfn-for="Performance"><span class="idlType">
    <a data-link-type="idl" href="#dom-performancemark" class="internalDFN" id="ref-for-dom-performancemark-2"><code>PerformanceMark</code></a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-performance-mark" id="ref-for-dom-performance-mark-1"><code>mark</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">markName</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-performancemarkoptions" class="internalDFN" id="ref-for-dom-performancemarkoptions-2"><code>PerformanceMarkOptions</code></a></span> <span class="idlParamName">markOptions</span> = {});</span><span data-idl="" class="idlMethod" id="idl-def-performance-clearmarks-markname" data-title="clearMarks" data-dfn-for="Performance"><span class="idlType">
    <a data-link-type="idl" data-type="interface" href="webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-performance-clearmarks" id="ref-for-dom-performance-clearmarks-1"><code>clearMarks</code></a>(optional<span class="idlType"> <a data-link-type="idl" data-type="interface" href="webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">markName</span>);</span><span data-idl="" class="idlMethod" id="idl-def-performance-measure-measurename-startormeasureoptions-endmark" data-title="measure" data-dfn-for="Performance"><span class="idlType">
    <a data-link-type="idl" href="#dom-performancemeasure" class="internalDFN" id="ref-for-dom-performancemeasure-2"><code>PerformanceMeasure</code></a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-performance-measure" id="ref-for-dom-performance-measure-1"><code>measure</code></a>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">measureName</span>, optional<span class="idlType"> (<a data-link-type="idl" data-type="interface" href="webidl.spec.whatwg.org/#idl-DOMString">DOMString</a> or <a data-link-type="idl" href="#dom-performancemeasureoptions" class="internalDFN" id="ref-for-dom-performancemeasureoptions-2"><code>PerformanceMeasureOptions</code></a>)</span> <span class="idlParamName">startOrMeasureOptions</span> = {}, optional<span class="idlType"> <a data-link-type="idl" data-type="interface" href="webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">endMark</span>);</span><span data-idl="" class="idlMethod" id="idl-def-performance-clearmeasures-measurename" data-title="clearMeasures" data-dfn-for="Performance"><span class="idlType">
    <a data-link-type="idl" data-type="interface" href="webidl.spec.whatwg.org/#idl-undefined">undefined</a></span> <a class="internalDFN idlName" data-link-type="method" href="#dom-performance-clearmeasures" id="ref-for-dom-performance-clearmeasures-1"><code>clearMeasures</code></a>(optional<span class="idlType"> <a data-link-type="idl" data-type="interface" href="webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">measureName</span>);</span>
};</span></code></pre>
      <section data-link-for="PerformanceMarkOptions" id="mark-method"><div class="header-wrapper">
<h4 id="x3-1-1-mark-method">
<bdi class="secno">3.1.1 </bdi><dfn data-export="" data-dfn-type="method" id="dom-performance-mark" data-idl="operation" data-title="mark()" data-dfn-for="Performance" data-type="PerformanceMark" data-lt="mark()|mark(markName)|mark(markName, markOptions)" data-local-lt="Performance.mark|Performance.mark()|mark" tabindex="0" aria-haspopup="dialog"><code>mark()</code></dfn> method</h4>
<a class="self-link" href="#mark-method" aria-label="Permalink for Section 3.1.1"></a>
</div>
        
        <p>Stores a timestamp with the associated name (a "mark"). It <em class="rfc2119">MUST</em> run these steps:</p>
        <ol>
          <li>Run the <a href="#dfn-performancemark-constructor" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-performancemark-constructor-1">PerformanceMark constructor</a> and let <var>entry</var> be the newly created object.</li>
          <li>
<a href="www.w3.org/TR/performance-timeline/#dfn-queue-a-performanceentry">Queue</a> <var>entry</var>.</li>
          <li id="stored_mark">Add <var>entry</var> to the <a href="www.w3.org/TR/performance-timeline/#dfn-performance-entry-buffer">performance entry buffer</a>.</li>
          <li>Return <var>entry</var>.</li>
        </ol>
        <section data-dfn-for="PerformanceMarkOptions" id="performancemarkoptions-dictionary"><div class="header-wrapper">
<h5 id="x3-1-1-1-performancemarkoptions-dictionary">
<bdi class="secno">3.1.1.1 </bdi><dfn data-export="" data-dfn-type="dictionary" id="dom-performancemarkoptions" data-idl="dictionary" data-title="PerformanceMarkOptions" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>PerformanceMarkOptions</code></dfn> dictionary</h5>
<a class="self-link" href="#performancemarkoptions-dictionary" aria-label="Permalink for Section 3.1.1.1"></a>
</div>
          
          <dl>
            <dt><dfn data-export="" data-dfn-type="dict-member" id="dom-performancemarkoptions-detail" data-idl="field" data-title="detail" data-dfn-for="PerformanceMarkOptions" data-type="any" tabindex="0" aria-haspopup="dialog"><code>detail</code></dfn></dt>
            <dd>Metadata to be included in the mark.</dd>
            <dt><dfn data-export="" data-dfn-type="dict-member" id="dom-performancemarkoptions-starttime" data-idl="field" data-title="startTime" data-dfn-for="PerformanceMarkOptions" data-type="DOMHighResTimeStamp" tabindex="0" aria-haspopup="dialog"><code>startTime</code></dfn></dt>
            <dd>Timestamp to be used as the mark time.</dd>
          </dl>
          <dl>
        </dl></section>
      </section>
      <section id="clearmarks-method"><div class="header-wrapper">
<h4 id="x3-1-2-clearmarks-method">
<bdi class="secno">3.1.2 </bdi><dfn data-export="" data-dfn-type="method" id="dom-performance-clearmarks" data-idl="operation" data-title="clearMarks()" data-dfn-for="Performance" data-type="undefined" data-lt="clearMarks()|clearMarks(markName)" data-local-lt="Performance.clearMarks|Performance.clearMarks()|clearMarks" tabindex="0" aria-haspopup="dialog"><code>clearMarks()</code></dfn> method</h4>
<a class="self-link" href="#clearmarks-method" aria-label="Permalink for Section 3.1.2"></a>
</div>
        
        <p>Removes the stored timestamp with the associated name. It <em class="rfc2119">MUST</em> run these steps:</p>
        <ol>
          <li>If <var>markName</var> is omitted, remove all <a href="#dom-performancemark" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemark-3"><code>PerformanceMark</code></a> objects from the <a href="www.w3.org/TR/performance-timeline/#dfn-performance-entry-buffer">performance entry buffer</a>.</li>
          <li>Otherwise, remove all <a href="#dom-performancemark" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemark-4"><code>PerformanceMark</code></a> objects listed in the <a href="www.w3.org/TR/performance-timeline/#dfn-performance-entry-buffer">performance entry buffer</a> whose <var>name</var> <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#string-is">is</a> <var>markName</var>.</li>
          <li>Return <strong>undefined</strong>.</li>
        </ol>
      </section>
      <section data-link-for="PerformanceMeasureOptions" id="measure-method"><div class="header-wrapper">
<h4 id="x3-1-3-measure-method">
<bdi class="secno">3.1.3 </bdi><dfn data-export="" data-dfn-type="method" id="dom-performance-measure" data-idl="operation" data-title="measure()" data-dfn-for="Performance" data-type="PerformanceMeasure" data-lt="measure()|measure(measureName)|measure(measureName, startOrMeasureOptions)|measure(measureName, startOrMeasureOptions, endMark)" data-local-lt="Performance.measure|Performance.measure()|measure" tabindex="0" aria-haspopup="dialog"><code>measure()</code></dfn> method</h4>
<a class="self-link" href="#measure-method" aria-label="Permalink for Section 3.1.3"></a>
</div>
        
        <p>Stores the <a data-link-type="idl" data-lt="DOMHighResTimeStamp" href="www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp"><code>DOMHighResTimeStamp</code></a> duration between two marks along with the associated name (a "measure"). It <em class="rfc2119">MUST</em> run these steps:</p>
        <ol>
          <li>If <var>startOrMeasureOptions</var> is a <a href="#dom-performancemeasureoptions" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-3"><code>PerformanceMeasureOptions</code></a> object and at least one of <a href="#dom-performancemeasureoptions-start" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-start-2"><code>start</code></a>, <a href="#dom-performancemeasureoptions-end" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-end-2"><code>end</code></a>, <a href="#dom-performancemeasureoptions-duration" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-duration-2"><code>duration</code></a>, and <a href="#dom-performancemeasureoptions-detail" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-detail-2"><code>detail</code></a> <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#map-exists">exist</a>, run the following checks:
            <ol>
              <li>If <var>endMark</var> is given, <a href="webidl.spec.whatwg.org/#dfn-throw">throw</a> a <a href="webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a>.</li>
              <li>If <var>startOrMeasureOptions</var>'s <a href="#dom-performancemeasureoptions-start" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-start-3"><code>start</code></a> and <a href="#dom-performancemeasureoptions-end" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-end-3"><code>end</code></a> members are both omitted, <a href="webidl.spec.whatwg.org/#dfn-throw">throw</a> a <a href="webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a>.</li>
              <li>If <var>startOrMeasureOptions</var>'s <a href="#dom-performancemeasureoptions-start" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-start-4"><code>start</code></a>, <a href="#dom-performancemeasureoptions-duration" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-duration-3"><code>duration</code></a>, and <a href="#dom-performancemeasureoptions-end" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-end-4"><code>end</code></a> members all <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#map-exists">exist</a>, <a href="webidl.spec.whatwg.org/#dfn-throw">throw</a> a <a href="webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a>.</li>
            </ol>
          </li>
          <li>
            Compute <var>end time</var> as follows:
            <ol>
              <li>If <var>endMark</var> is given, let <var>end time</var> be the value returned by running the <a href="#dfn-convert-a-mark-to-a-timestamp" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-convert-a-mark-to-a-timestamp-1">convert a mark to a timestamp</a> algorithm passing in <var>endMark</var>.</li>
              <li>Otherwise, if <var>startOrMeasureOptions</var> is a <a href="#dom-performancemeasureoptions" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-4"><code>PerformanceMeasureOptions</code></a> object, and if its <a href="#dom-performancemeasureoptions-end" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-end-5"><code>end</code></a> member <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#map-exists">exists</a>, let <var>end time</var> be the value returned by running the <a href="#dfn-convert-a-mark-to-a-timestamp" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-convert-a-mark-to-a-timestamp-2">convert a mark to a timestamp</a> algorithm passing in <var>startOrMeasureOptions</var>'s <a href="#dom-performancemeasureoptions-end" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-end-6"><code>end</code></a>.</li>
              <li>
                Otherwise, if <var>startOrMeasureOptions</var> is a <a href="#dom-performancemeasureoptions" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-5"><code>PerformanceMeasureOptions</code></a> object, and if its <a href="#dom-performancemeasureoptions-start" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-start-5"><code>start</code></a> and <a href="#dom-performancemeasureoptions-duration" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-duration-4"><code>duration</code></a> members both <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#map-exists">exist</a>:
                <ol>
                  <li>Let <var>start</var> be the value returned by running the <a href="#dfn-convert-a-mark-to-a-timestamp" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-convert-a-mark-to-a-timestamp-3">convert a mark to a timestamp</a> algorithm passing in <a href="#dom-performancemeasureoptions-start" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-start-6"><code>start</code></a>.</li>
                  <li>Let <var>duration</var> be the value returned by running the <a href="#dfn-convert-a-mark-to-a-timestamp" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-convert-a-mark-to-a-timestamp-4">convert a mark to a timestamp</a> algorithm passing in <a href="#dom-performancemeasureoptions-duration" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-duration-5"><code>duration</code></a>.</li>
                  <li>Let <var>end time</var> be <var>start</var> plus <var>duration</var>.</li>
                </ol>
              </li>
              <li>Otherwise, let <var>end time</var> be the value that would be returned by the <code>Performance</code> object's <a href="www.w3.org/TR/hr-time-2/#dom-performance-now"><code>now()</code></a> method.</li>
            </ol>
          </li>
          <li>
            Compute <var>start time</var> as follows:
            <ol>
              <li>If <var>startOrMeasureOptions</var> is a <a href="#dom-performancemeasureoptions" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-6"><code>PerformanceMeasureOptions</code></a> object, and if its <a href="#dom-performancemeasureoptions-start" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-start-7"><code>start</code></a> member <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#map-exists">exists</a>, let <var>start time</var> be the value returned by running the <a href="#dfn-convert-a-mark-to-a-timestamp" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-convert-a-mark-to-a-timestamp-5">convert a mark to a timestamp</a> algorithm passing in <var>startOrMeasureOptions</var>'s <a href="#dom-performancemeasureoptions-start" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-start-8"><code>start</code></a>.</li>
              <li>
                Otherwise, if <var>startOrMeasureOptions</var> is a <a href="#dom-performancemeasureoptions" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-7"><code>PerformanceMeasureOptions</code></a> object, and if its <a href="#dom-performancemeasureoptions-duration" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-duration-6"><code>duration</code></a> and <a href="#dom-performancemeasureoptions-end" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-end-7"><code>end</code></a> members both <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#map-exists">exist</a>:
                <ol>
                  <li>Let <var>duration</var> be the value returned by running the <a href="#dfn-convert-a-mark-to-a-timestamp" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-convert-a-mark-to-a-timestamp-6">convert a mark to a timestamp</a> algorithm passing in <a href="#dom-performancemeasureoptions-duration" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-duration-7"><code>duration</code></a>.</li>
                  <li>Let <var>end</var> be the value returned by running the <a href="#dfn-convert-a-mark-to-a-timestamp" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-convert-a-mark-to-a-timestamp-7">convert a mark to a timestamp</a> algorithm passing in <a href="#dom-performancemeasureoptions-end" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-end-8"><code>end</code></a>.</li>
                  <li>Let <var>start time</var> be <var>end</var> minus <var>duration</var>.</li>
                </ol>
              </li>
              <li>Otherwise, if <var>startOrMeasureOptions</var> is a <code>DOMString</code>, let <var>start time</var> be the value returned by running the <a href="#dfn-convert-a-mark-to-a-timestamp" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-convert-a-mark-to-a-timestamp-8">convert a mark to a timestamp</a> algorithm passing in <var>startOrMeasureOptions</var>.</li>
              <li>Otherwise, let <var>start time</var> be <code>0</code>.</li>
            </ol>
          </li>
          <li>Create a new <a href="#dom-performancemeasure" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasure-3"><code>PerformanceMeasure</code></a> object (<var>entry</var>) with <a href="webidl.spec.whatwg.org/#this">this</a>'s <a href="html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm">relevant realm</a>.</li>
          <li>Set <var>entry</var>'s <code>name</code> attribute to <var>measureName</var>.</li>
          <li>Set <var>entry</var>'s <code>entryType</code> attribute to <code>DOMString "measure"</code>.</li>
          <li>Set <var>entry</var>'s <code>startTime</code> attribute to <var>start time</var>.</li>
          <li>Set <var>entry</var>'s <code>duration</code> attribute to the duration from <var>start time</var> to <var>end time</var>. The resulting duration value <em class="rfc2119">MAY</em> be negative.</li>
          <li>
            Set <var>entry</var>'s <code>detail</code> attribute as follows:
            <ol>
              <li>If <var>startOrMeasureOptions</var> is a <a href="#dom-performancemeasureoptions" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-8"><code>PerformanceMeasureOptions</code></a> object and <var>startOrMeasureOptions</var>'s <a href="#dom-performancemeasureoptions-detail" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-detail-3"><code>detail</code></a> member <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#map-exists">exists</a>:
                <ol>
                  <li>Let <var>record</var> be the result of calling the <a href="html.spec.whatwg.org/multipage/infrastructure.html#structuredserialize">StructuredSerialize</a> algorithm on <var>startOrMeasureOptions</var>'s <a href="#dom-performancemeasureoptions-detail" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-detail-4"><code>detail</code></a>.</li>
                  <li>Set <var>entry</var>'s <a href="#dom-performancemeasure-detail" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasure-detail-1"><code>detail</code></a> to the result of calling the <a href="html.spec.whatwg.org/multipage/infrastructure.html#structureddeserialize">StructuredDeserialize</a> algorithm on <var>record</var> and the <a href="html.spec.whatwg.org/multipage/webappapis.html#concept-current-everything">current realm</a>.</li>
                </ol>
              </li>
              <li>Otherwise, set it to <code>null</code>.</li>
            </ol>
          </li>
          <li>
<a href="www.w3.org/TR/performance-timeline/#dfn-queue-a-performanceentry">Queue</a> <var>entry</var>.</li>
          <li id="stored_measure">Add <var>entry</var> to the <a href="www.w3.org/TR/performance-timeline/#dfn-performance-entry-buffer">performance entry buffer</a>.</li>
          <li>Return <var>entry</var>.</li>
        </ol>
        <section data-dfn-for="PerformanceMeasureOptions" id="performancemeasureoptions-dictionary"><div class="header-wrapper">
<h5 id="x3-1-3-1-performancemeasureoptions-dictionary">
<bdi class="secno">3.1.3.1 </bdi><dfn data-export="" data-dfn-type="dictionary" id="dom-performancemeasureoptions" data-idl="dictionary" data-title="PerformanceMeasureOptions" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>PerformanceMeasureOptions</code></dfn> dictionary</h5>
<a class="self-link" href="#performancemeasureoptions-dictionary" aria-label="Permalink for Section 3.1.3.1"></a>
</div>
          
          <dl>
            <dt><dfn data-export="" data-dfn-type="dict-member" id="dom-performancemeasureoptions-detail" data-idl="field" data-title="detail" data-dfn-for="PerformanceMeasureOptions" data-type="any" tabindex="0" aria-haspopup="dialog"><code>detail</code></dfn></dt>
            <dd>Metadata to be included in the measure.</dd>
            <dt><dfn data-export="" data-dfn-type="dict-member" id="dom-performancemeasureoptions-start" data-idl="field" data-title="start" data-dfn-for="PerformanceMeasureOptions" data-type="DOMString|DOMHighResTimeStamp" tabindex="0" aria-haspopup="dialog"><code>start</code></dfn></dt>
            <dd>Timestamp to be used as the start time or string to be used as start mark.</dd>
            <dt><dfn data-export="" data-dfn-type="dict-member" id="dom-performancemeasureoptions-duration" data-idl="field" data-title="duration" data-dfn-for="PerformanceMeasureOptions" data-type="DOMHighResTimeStamp" tabindex="0" aria-haspopup="dialog"><code>duration</code></dfn></dt>
            <dd>Duration between the start and end times.</dd>
            <dt><dfn data-export="" data-dfn-type="dict-member" id="dom-performancemeasureoptions-end" data-idl="field" data-title="end" data-dfn-for="PerformanceMeasureOptions" data-type="DOMString|DOMHighResTimeStamp" tabindex="0" aria-haspopup="dialog"><code>end</code></dfn></dt>
            <dd>Timestamp to be used as the end time or string to be used as end mark.</dd>
          </dl>
          <dl>
        </dl></section>
      </section>
      <section id="clearmeasures-method"><div class="header-wrapper">
<h4 id="x3-1-4-clearmeasures-method">
<bdi class="secno">3.1.4 </bdi><dfn data-export="" data-dfn-type="method" id="dom-performance-clearmeasures" data-idl="operation" data-title="clearMeasures()" data-dfn-for="Performance" data-type="undefined" data-lt="clearMeasures()|clearMeasures(measureName)" data-local-lt="Performance.clearMeasures|Performance.clearMeasures()|clearMeasures" tabindex="0" aria-haspopup="dialog"><code>clearMeasures()</code></dfn> method</h4>
<a class="self-link" href="#clearmeasures-method" aria-label="Permalink for Section 3.1.4"></a>
</div>
        
        <p>Removes stored timestamp with the associated name. It <em class="rfc2119">MUST</em> run these steps:</p>
        <ol>
          <li>If <var>measureName</var> is omitted, remove all <a href="#dom-performancemeasure" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasure-4"><code>PerformanceMeasure</code></a> objects in the <a href="www.w3.org/TR/performance-timeline/#dfn-performance-entry-buffer">performance entry buffer</a>.</li>
          <li>Otherwise remove all <a href="#dom-performancemeasure" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasure-5"><code>PerformanceMeasure</code></a> objects listed in the <a href="www.w3.org/TR/performance-timeline/#dfn-performance-entry-buffer">performance entry buffer</a> whose <code>name</code> <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#string-is">is</a> <var>measureName</var>.</li>
          <li>Return <strong>undefined</strong>.</li>
        </ol>
      </section>
    </section>
    <section id="performancemark" data-dfn-for="PerformanceMark" data-link-for="PerformanceMark"><div class="header-wrapper">
<h3 id="x3-2-the-performancemark-interface">
<bdi class="secno">3.2 </bdi>The <dfn data-export="" data-dfn-type="interface" id="dom-performancemark" data-idl="interface" data-title="PerformanceMark" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>PerformanceMark</code></dfn> Interface</h3>
<a class="self-link" href="#performancemark" aria-label="Permalink for Section 3.2"></a>
</div>
      
      <p>The <a href="#dom-performancemark" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemark-5"><code>PerformanceMark</code></a> interface also exposes marks created via the <a data-link-type="idl" data-lt="Performance" href="www.w3.org/TR/hr-time-2/#dfn-performance"><code>Performance</code></a> interface's <a data-link-type="idl" data-lt="mark()" href="#dom-performance-mark" class="internalDFN" id="ref-for-dom-performance-mark-2"><code>mark</code></a><code>()</code> method to the <a href="www.w3.org/TR/performance-timeline/#dfn-performance-timeline">Performance Timeline</a>.</p>
      <pre class="idl def" id="webidl-2100037145"><span class="idlHeader"><a class="self-link" href="#webidl-2100037145">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-performancemark" data-title="PerformanceMark">[<span class="extAttr"><a data-type="extended-attribute" href="webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-performancemark" id="ref-for-dom-performancemark-6"><code>PerformanceMark</code></a> : <span class="idlSuperclass"><a data-link-type="idl" href="www.w3.org/TR/performance-timeline/#dom-performanceentry">PerformanceEntry</a></span> {<span data-idl="" class="idlConstructor" id="idl-def-performancemark-constructor-markname-markoptions" data-title="constructor" data-dfn-for="PerformanceMark">
  <dfn data-export="" data-dfn-type="constructor" id="dom-performancemark-constructor" data-idl="constructor" data-title="constructor" data-dfn-for="PerformanceMark" data-lt="constructor()|constructor(markName)|constructor(markName, markOptions)" data-local-lt="PerformanceMark.constructor|PerformanceMark.constructor()|constructor" tabindex="0" aria-haspopup="dialog"><code>constructor</code></dfn>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="webidl.spec.whatwg.org/#idl-DOMString">DOMString</a></span> <span class="idlParamName">markName</span>, optional<span class="idlType"> <a data-link-type="idl" href="#dom-performancemarkoptions" class="internalDFN" id="ref-for-dom-performancemarkoptions-3"><code>PerformanceMarkOptions</code></a></span> <span class="idlParamName">markOptions</span> = {});</span><span data-idl="" class="idlAttribute" id="idl-def-performancemark-detail" data-title="detail" data-dfn-for="PerformanceMark">
  readonly attribute<span class="idlType"> <a data-link-type="idl" data-type="interface" href="webidl.spec.whatwg.org/#idl-any">any</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-performancemark-detail" id="ref-for-dom-performancemark-detail-1"><code>detail</code></a>;</span>
};</span></code></pre>
      <p>The <a href="#dom-performancemark" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemark-7"><code>PerformanceMark</code></a> interface extends the following attributes of the <a data-link-type="idl" data-lt="PerformanceEntry" href="www.w3.org/TR/performance-timeline/#dom-performanceentry"><code>PerformanceEntry</code></a>
      interface:</p>
      <p>The <code>name</code> attribute must return the mark's name.</p>
      <p>The <code>entryType</code> attribute must return the <a href="webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a> <code>"mark"</code>.</p>
      <p>The <code>startTime</code> attribute must return a <a data-link-type="idl" data-lt="DOMHighResTimeStamp" href="www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp"><code>DOMHighResTimeStamp</code></a> with the mark's time value.</p>
      <p>The <code>duration</code> attribute must return a <a data-link-type="idl" data-lt="DOMHighResTimeStamp" href="www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp"><code>DOMHighResTimeStamp</code></a> of value <code>0</code>.</p>
      <p>The <a href="#dom-performancemark" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemark-8"><code>PerformanceMark</code></a> interface contains the following additional attribute:</p>
      <p>The <dfn data-export="" data-dfn-type="attribute" id="dom-performancemark-detail" data-idl="attribute" data-title="detail" data-dfn-for="PerformanceMark" data-type="any" data-lt="detail" data-local-lt="PerformanceMark.detail" tabindex="0" aria-haspopup="dialog"><code>detail</code></dfn> attribute must return the value it is set to (it's copied from the <a href="#dom-performancemarkoptions" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemarkoptions-4"><code>PerformanceMarkOptions</code></a> dictionary).</p>
      <section data-link-for="PerformanceMarkOptions" id="the-performancemark-constructor"><div class="header-wrapper">
<h4 id="x3-2-1-the-performancemark-constructor">
<bdi class="secno">3.2.1 </bdi>The <dfn id="dfn-performancemark-constructor" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><a href="#dom-performancemark" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemark-9"><code>PerformanceMark</code></a> Constructor</dfn>
</h4>
<a class="self-link" href="#the-performancemark-constructor" aria-label="Permalink for Section 3.2.1"></a>
</div>
        
        <p>The <a href="#dfn-performancemark-constructor" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-performancemark-constructor-2">PerformanceMark constructor</a> must run the following steps:</p>
        <ol>
          <li>If the <a href="html.spec.whatwg.org/multipage/webappapis.html#current-global-object">current global object</a> is a <code>Window</code> object and <var>markName</var> uses the same name as a <a href="webidl.spec.whatwg.org/#dfn-read-only">read only attribute</a> in the <code><a href="www.w3.org/TR/navigation-timing/#performancetiming">PerformanceTiming</a></code> interface, <a href="webidl.spec.whatwg.org/#dfn-throw">throw</a> a <a href="webidl.spec.whatwg.org/#syntaxerror"><code>SyntaxError</code></a>.</li>
          <li>Create a new <a href="#dom-performancemark" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemark-10"><code>PerformanceMark</code></a> object (<var>entry</var>) with the <a href="html.spec.whatwg.org/multipage/webappapis.html#current-global-object">current global object</a>'s <a href="html.spec.whatwg.org/multipage/webappapis.html#concept-global-object-realm">realm</a>.</li>
          <li>Set <var>entry</var>'s <code>name</code> attribute to <var>markName</var>.</li>
          <li>Set <var>entry</var>'s <code>entryType</code> attribute to <code>DOMString "mark"</code>.</li>
          <li>
            Set <var>entry</var>'s <code>startTime</code> attribute as follows:
            <ol>
              <li>
                If <var>markOptions</var>'s <a href="#dom-performancemarkoptions-starttime" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemarkoptions-starttime-2"><code>startTime</code></a> member <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#map-exists">exists</a>, then:
                <ol>
                  <li>If <var>markOptions</var>'s <a href="#dom-performancemarkoptions-starttime" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemarkoptions-starttime-3"><code>startTime</code></a> is negative, throw a <a href="webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a>.</li>
                  <li>Otherwise, set <var>entry</var>'s <code>startTime</code> to the value of <var>markOptions</var>'s <a href="#dom-performancemarkoptions-starttime" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemarkoptions-starttime-4"><code>startTime</code></a>.</li>
                </ol>
              </li>
              <li>Otherwise, set it to the value that would be returned by the <code>Performance</code> object's <a href="www.w3.org/TR/hr-time-2/#dom-performance-now"><code>now()</code></a> method.</li>
            </ol>
          </li>
          <li>Set <var>entry</var>'s <code>duration</code> attribute to <code>0</code>.</li>
          <li>If <var>markOptions</var>'s <a href="#dom-performancemarkoptions-detail" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemarkoptions-detail-2"><code>detail</code></a> is null, set <var>entry</var>'s <a href="#dom-performancemark-detail" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemark-detail-2"><code>detail</code></a> to null.</li>
          <li>Otherwise:
            <ol>
              <li>Let <var>record</var> be the result of calling the <a href="html.spec.whatwg.org/multipage/infrastructure.html#structuredserialize">StructuredSerialize</a> algorithm on <var>markOptions</var>'s <a href="#dom-performancemarkoptions-detail" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemarkoptions-detail-3"><code>detail</code></a>.</li>
              <li>Set <var>entry</var>'s <a href="#dom-performancemark-detail" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemark-detail-3"><code>detail</code></a> to the result of calling the <a href="html.spec.whatwg.org/multipage/infrastructure.html#structureddeserialize">StructuredDeserialize</a> algorithm on <var>record</var> and the <a href="html.spec.whatwg.org/multipage/webappapis.html#concept-current-everything">current realm</a>.</li>
            </ol>
          </li>
        </ol>
      </section>
    </section>
    <section id="performancemeasure" data-dfn-for="PerformanceMeasure" data-link-for="PerformanceMeasure"><div class="header-wrapper">
<h3 id="x3-3-the-performancemeasure-interface">
<bdi class="secno">3.3 </bdi>The <dfn data-export="" data-dfn-type="interface" id="dom-performancemeasure" data-idl="interface" data-title="PerformanceMeasure" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>PerformanceMeasure</code></dfn> Interface</h3>
<a class="self-link" href="#performancemeasure" aria-label="Permalink for Section 3.3"></a>
</div>
      
      <p>The <a href="#dom-performancemeasure" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasure-6"><code>PerformanceMeasure</code></a> interface also exposes measures created via the <a data-link-type="idl" data-lt="Performance" href="www.w3.org/TR/hr-time-2/#dfn-performance"><code>Performance</code></a> interface's <a data-link-type="idl" data-lt="measure()" href="#dom-performance-measure" class="internalDFN" id="ref-for-dom-performance-measure-2"><code>measure</code></a><code>()</code> method to the <a href="www.w3.org/TR/performance-timeline/#performance-timeline">Performance Timeline</a>.</p>
      <pre class="idl def" id="webidl-815144918"><span class="idlHeader"><a class="self-link" href="#webidl-815144918">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-performancemeasure" data-title="PerformanceMeasure">[<span class="extAttr"><a data-type="extended-attribute" href="webidl.spec.whatwg.org/#Exposed">Exposed</a>=(Window,Worker)</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-performancemeasure" id="ref-for-dom-performancemeasure-7"><code>PerformanceMeasure</code></a> : <span class="idlSuperclass"><a data-link-type="idl" href="www.w3.org/TR/performance-timeline/#dom-performanceentry">PerformanceEntry</a></span> {<span data-idl="" class="idlAttribute" id="idl-def-performancemeasure-detail" data-title="detail" data-dfn-for="PerformanceMeasure">
  readonly attribute<span class="idlType"> <a data-link-type="idl" data-type="interface" href="webidl.spec.whatwg.org/#idl-any">any</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-performancemeasure-detail" id="ref-for-dom-performancemeasure-detail-2"><code>detail</code></a>;</span>
};</span></code></pre>
      <p>The <a href="#dom-performancemeasure" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasure-8"><code>PerformanceMeasure</code></a> interface extends the following attributes of the <a data-link-type="idl" data-lt="PerformanceEntry" href="www.w3.org/TR/performance-timeline/#dom-performanceentry"><code>PerformanceEntry</code></a> interface:</p>
      <p>The <code>name</code> attribute must return the measure's name.</p>
      <p>The <code>entryType</code> attribute must return the <a href="webidl.spec.whatwg.org/#idl-DOMString"><code>DOMString</code></a> <code>"measure"</code>.</p>
      <p>The <code>startTime</code> attribute must return a <a data-link-type="idl" data-lt="DOMHighResTimeStamp" href="www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp"><code>DOMHighResTimeStamp</code></a> with the measure's start mark.</p>
      <p>The <code>duration</code> attribute must return a <a data-link-type="idl" data-lt="DOMHighResTimeStamp" href="www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp"><code>DOMHighResTimeStamp</code></a> with the duration of the measure.</p>
      <p>The <a href="#dom-performancemeasure" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasure-9"><code>PerformanceMeasure</code></a> interface contains the following additional attribute:</p>
      <p>The <dfn data-export="" data-dfn-type="attribute" id="dom-performancemeasure-detail" data-idl="attribute" data-title="detail" data-dfn-for="PerformanceMeasure" data-type="any" data-lt="detail" data-local-lt="PerformanceMeasure.detail" tabindex="0" aria-haspopup="dialog"><code>detail</code></dfn> attribute must return the value it is set to (it's copied from the <a href="#dom-performancemeasureoptions" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemeasureoptions-9"><code>PerformanceMeasureOptions</code></a> dictionary).</p>
    </section>
  </section>
  <section id="processing"><div class="header-wrapper">
<h2 id="x4-processing">
<bdi class="secno">4. </bdi>Processing</h2>
<a class="self-link" href="#processing" aria-label="Permalink for Section 4."></a>
</div>
    
    <div class="note" role="note" id="issue-container-generatedID-0">
<div role="heading" class="note-title marker" id="h-note-0" aria-level="3"><span>Note</span></div>
<p class="">A user agent implementing the User Timing API would need to include <code>"mark"</code> and
      <code>"measure"</code> in <a href="www.w3.org/TR/performance-timeline/#supportedentrytypes-attribute">
      supportedEntryTypes</a>. This allows developers to detect support for User Timing.</p>
</div>
    <section id="convert-a-mark-to-a-timestamp"><div class="header-wrapper">
<h3 id="x4-1-convert-a-mark-to-a-timestamp">
<bdi class="secno">4.1 </bdi>Convert a <var>mark</var> to a <var>timestamp</var>
</h3>
<a class="self-link" href="#convert-a-mark-to-a-timestamp" aria-label="Permalink for Section 4.1"></a>
</div>
      
      <p>To <dfn id="dfn-convert-a-mark-to-a-timestamp" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">convert a mark to a timestamp</dfn>, given a <var>mark</var> that is a <code>DOMString</code> or <a data-link-type="idl" data-lt="DOMHighResTimeStamp" href="www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp"><code>DOMHighResTimeStamp</code></a> run these steps:
        </p>
<ol>
          <li>If <var>mark</var> is a <code>DOMString</code> and it has the same name as a <a href="webidl.spec.whatwg.org/#dfn-read-only">read only attribute</a> in the <code><a href="www.w3.org/TR/navigation-timing/#performancetiming">PerformanceTiming</a></code> interface, let <var>end time</var> be the value returned by running the <a href="#dfn-convert-a-name-to-a-timestamp" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-convert-a-name-to-a-timestamp-1">convert a name to a timestamp</a> algorithm with <var>name</var> set to the value of <var>mark</var>.</li>
          <li>Otherwise, if <var>mark</var> is a <code>DOMString</code>, let <var>end time</var> be the value of the <code>startTime</code> attribute from the most recent occurrence of a <a href="#dom-performancemark" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemark-11"><code>PerformanceMark</code></a> object in the <a href="www.w3.org/TR/performance-timeline/#dfn-performance-entry-buffer">performance entry buffer</a> whose <code>name</code> <a data-link-type="dfn|abstract-op" data-type="dfn" href="infra.spec.whatwg.org/#string-is">is</a> <var>mark</var>. If no matching entry is found, <a href="webidl.spec.whatwg.org/#dfn-throw">throw</a> a <a href="webidl.spec.whatwg.org/#syntaxerror"><code>SyntaxError</code></a>.</li>
          <li>
            Otherwise, if <var>mark</var> is a <a data-link-type="idl" data-lt="DOMHighResTimeStamp" href="www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp"><code>DOMHighResTimeStamp</code></a>:
            <ol>
              <li>If <var>mark</var> is negative, throw a <a href="webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a>.</li>
              <li>Otherwise, let <var>end time</var> be <var>mark</var>.</li>
            </ol>
          </li>
        </ol>
    </section>
    <section id="convert-a-name-to-a-timestamp"><div class="header-wrapper">
<h3 id="x4-2-convert-a-name-to-a-timestamp">
<bdi class="secno">4.2 </bdi>Convert a <var>name</var> to a <var>timestamp</var>
</h3>
<a class="self-link" href="#convert-a-name-to-a-timestamp" aria-label="Permalink for Section 4.2"></a>
</div>
      
      <p>To <dfn id="dfn-convert-a-name-to-a-timestamp" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">convert a name to a <a href="www.w3.org/TR/hr-time-2/#idl-def-domhighrestimestamp">timestamp</a></dfn> given a <var>name</var> that is a <a href="webidl.spec.whatwg.org/#dfn-read-only">read only attribute</a> in the <code><a href="www.w3.org/TR/navigation-timing/#performancetiming">PerformanceTiming</a></code> interface, run these steps:</p>
<p>
      </p>
<ol>
        <li>If the <a href="html.spec.whatwg.org/multipage/webappapis.html#global-object">global object</a> is not a <code>Window</code> object, <a href="webidl.spec.whatwg.org/#dfn-throw">throw</a> a <a href="webidl.spec.whatwg.org/#exceptiondef-typeerror"><code>TypeError</code></a>.</li>
        <li>If <var>name</var> is <code>navigationStart</code>, return <code>0</code>.</li>
        <li>Let <var>startTime</var> be the value of <code>navigationStart</code> in the <code><a href="www.w3.org/TR/navigation-timing/#performancetiming">PerformanceTiming</a></code> interface.</li>
        <li>Let <var>endTime</var> be the value of <var>name</var> in the <code><a href="www.w3.org/TR/navigation-timing/#performancetiming">PerformanceTiming</a></code> interface.</li>
        <li>If <var>endTime</var> is <code>0</code>, <a href="webidl.spec.whatwg.org/#dfn-throw">throw</a> an <a href="webidl.spec.whatwg.org/#invalidaccesserror"><code>InvalidAccessError</code></a>.</li>
        <li>Return result of subtracting <var>startTime</var> from <var>endTime</var>.</li>
      </ol>
      <div class="note" role="note" id="issue-container-generatedID-1">
<div role="heading" class="note-title marker" id="h-note-1" aria-level="4"><span>Note</span></div>
<p class="">
        The <a href="www.w3.org/TR/navigation-timing/#performancetiming">PerformanceTiming</a> interface was defined in [<cite><a class="bibref" data-link-type="biblio" href="#bib-navigation-timing" title="Navigation Timing">NAVIGATION-TIMING</a></cite>] and is now considered obsolete. The use of names from the <a href="www.w3.org/TR/navigation-timing/#performancetiming">PerformanceTiming</a> interface is supported to remain backwards compatible, but there are no plans to extend this functionality to names in the <a href="www.w3.org/TR/navigation-timing-2/#dom-performancenavigationtiming">PerformanceNavigationTiming</a> interface defined in [<cite><a class="bibref" data-link-type="biblio" href="#bib-navigation-timing-2" title="Navigation Timing Level 2">NAVIGATION-TIMING-2</a></cite>] (or other interfaces) in the future.
      </p>
</div>
    </section>
  </section>
  <section id="recommended-mark-names"><div class="header-wrapper">
<h2 id="x5-recommended-mark-names">
<bdi class="secno">5. </bdi>Recommended mark names</h2>
<a class="self-link" href="#recommended-mark-names" aria-label="Permalink for Section 5."></a>
</div>
    
    <p>Developers are encouraged to use the following recommended mark names to
    mark common timings. The <a data-type="dfn" href="infra.spec.whatwg.org/#user-agent">user agent</a> does not validate that the usage of
    these names is appropriate or consistent with its description.</p>
    <div class="note" role="note" id="issue-container-generatedID-2">
<div role="heading" class="note-title marker" id="h-note-2" aria-level="3"><span>Note</span></div>
<p class="">Adding such recommended mark names can help performance
    tools tailor guidance to a site. These mark names can also help real user
    monitoring providers and user agents collect web developer signals regarding
    their application's performance at scale, and surface this information to
    developers without requiring any site-specific work.</p>
</div>
    <dl>
      <dt>"<dfn class="export" data-export="" id="dfn-mark_fully_loaded" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">mark_fully_loaded</dfn>"</dt>
      <dd>The time when the page is considered fully loaded as marked by the
        developer in their application.
        <div class="note" role="note" id="issue-container-generatedID-3">
<div role="heading" class="note-title marker" id="h-note-3" aria-level="3"><span>Note</span></div>
<div class="">
          <p>In this example, the page asynchonously initializes a chat widget, a
            searchbox, and a newsfeed upon loading. When finished, the
            "<a href="#dfn-mark_fully_loaded" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-mark_fully_loaded-1">mark_fully_loaded</a>" mark name enables lab tools and analytics
            providers to automatically show the timing.
          </p>
          <div class="example" id="example-3">
        <div class="marker">
    <a class="self-link" href="#example-3">Example<bdi> 3</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs javascript"><span class="hljs-built_in">window</span>.addEventListener(<span class="hljs-string">"load"</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-built_in">Promise</span>.all([
    loadChatWidget(),
    initializeSearchAutocomplete(),
    initializeNewsfeed()]).then(<span class="hljs-function">() =&gt;</span> {
      performance.mark(<span class="hljs-string">'mark_fully_loaded'</span>);
  });
});</code></pre>
      </div>
        </div>
</div>
      </dd>
      <dt>"<dfn class="export" data-export="" id="dfn-mark_fully_visible" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">mark_fully_visible</dfn>"</dt>
      <dd>The time when the page is considered fully visible to an end-user
        as marked by the developer in their application.</dd>
      <dt>"<dfn class="export" data-export="" id="dfn-mark_interactive" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">mark_interactive</dfn>"</dt>
      <dd>The time when the page is considered interactive to an end-user as
        marked by the developer in their application.</dd>
      <dt>"<dfn class="export" data-export="" id="dfn-mark_feature_usage" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">mark_feature_usage</dfn>"</dt>
      <dd>Mark the usage of a feature which may impact performance so that
        tooling and analytics can take it into account. The <a href="#dom-performancemark-detail" class="internalDFN" data-link-type="idl" id="ref-for-dom-performancemark-detail-4"><code>detail</code></a>
        metadata can contain any useful information about the feature, including:
        <dl>
          <dt><dfn class="export" data-export="" id="dfn-feature" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">feature</dfn></dt>
          <dd>The name of the feature used.</dd>
          <dt><dfn class="export" data-export="" id="dfn-framework" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">framework</dfn></dt>
          <dd>If applicable, the underlying framework the feature is intended
            for, such as a JavaScript framework, content management system, or
            e-commerce platform.</dd>
        </dl>
        <div class="note" role="note" id="issue-container-generatedID-4">
<div role="heading" class="note-title marker" id="h-note-4" aria-level="3"><span>Note</span></div>
<div class="">
          <p>In this example, the ImageOptimizationComponent for FancyJavaScriptFramework
            is used to size images for optimal performance. The code notes
            this feature's usage so that lab tools and analytics can measure
            whether it helped improve performance.
          </p>
          <div class="example" id="example-4">
        <div class="marker">
    <a class="self-link" href="#example-4">Example<bdi> 4</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs javascript">performance.mark(<span class="hljs-string">'mark_feature_usage'</span>, {
  <span class="hljs-string">'detail'</span>: {
    <span class="hljs-string">'feature'</span>: <span class="hljs-string">'ImageOptimizationComponent'</span>,
    <span class="hljs-string">'framework'</span>: <span class="hljs-string">'FancyJavaScriptFramework'</span>
  }
})</code></pre>
      </div>
        </div>
</div>
      </dd>
    </dl>
  </section>
  <section id="privacy-security" class="informative"><div class="header-wrapper">
<h2 id="x6-privacy-and-security">
<bdi class="secno">6. </bdi>Privacy and Security</h2>
<a class="self-link" href="#privacy-security" aria-label="Permalink for Section 6."></a>
</div>
<p><em>This section is non-normative.</em></p>
    
    <p>The interfaces defined in this specification expose potentially
    sensitive timing information on specific JavaScript activity of a page.
    Please refer to [<cite><a class="bibref" data-link-type="biblio" href="#bib-hr-time-2" title="High Resolution Time Level 2">HR-TIME-2</a></cite>] for privacy and security considerations of
    exposing high-resolution timing information.</p>
    <p>Because the web platform has been designed with the invariant that any
    script included on a page has the same access as any other script included
    on the same page, regardless of the origin of either scripts, the
    interfaces defined by this specification do not place any restrictions on
    recording or retrieval of recorded timing information - i.e. a user timing
    mark or measure recorded by any script included on the page can be read by
    any other script running on the same page, regardless of origin.</p>
  </section>
  <section class="appendix" id="acknowledgments"><div class="header-wrapper">
<h2 id="a-acknowledgments">
<bdi class="secno">A. </bdi>Acknowledgments</h2>
<a class="self-link" href="#acknowledgments" aria-label="Permalink for Appendix A."></a>
</div>
    
    <p>Thanks to
    James Simonsen,
    Jason Weber,
    Nic Jansma,
    Philippe Le Hegaret,
    Karen Anderson,
    Steve Souders,
    Sigbjorn Vik,
    Todd Reifsteck, and
    Tony Gentilcore
    for their contributions to this work.</p>
  </section>


<section id="references" class="appendix"><div class="header-wrapper">
<h2 id="b-references">
<bdi class="secno">B. </bdi>References</h2>
<a class="self-link" href="#references" aria-label="Permalink for Appendix B."></a>
</div>
<section id="normative-references"><div class="header-wrapper">
<h3 id="b-1-normative-references">
<bdi class="secno">B.1 </bdi>Normative references</h3>
<a class="self-link" href="#normative-references" aria-label="Permalink for Appendix B.1"></a>
</div>
    
    <dl class="bibliography">
<dt id="bib-hr-time-2">[HR-TIME-2]</dt>
<dd>
      <a href="www.w3.org/TR/hr-time-2/"><cite>High Resolution Time Level 2</cite></a>. Ilya Grigorik.  W3C. 21 November 2019. W3C Recommendation. URL: <a href="www.w3.org/TR/hr-time-2/">https://www.w3.org/TR/hr-time-2/</a>
    </dd>
<dt id="bib-html">[HTML]</dt>
<dd>
      <a href="html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Anne van Kesteren; Domenic Denicola; Ian Hickson; Philip Jägenstedt; Simon Pieters.  WHATWG. Living Standard. URL: <a href="html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
    </dd>
<dt id="bib-infra">[infra]</dt>
<dd>
      <a href="infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Anne van Kesteren; Domenic Denicola.  WHATWG. Living Standard. URL: <a href="infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
    </dd>
<dt id="bib-navigation-timing">[NAVIGATION-TIMING]</dt>
<dd>
      <a href="www.w3.org/TR/navigation-timing/"><cite>Navigation Timing</cite></a>. Zhiheng Wang.  W3C. 17 December 2012. W3C Recommendation. URL: <a href="www.w3.org/TR/navigation-timing/">https://www.w3.org/TR/navigation-timing/</a>
    </dd>
<dt id="bib-performance-timeline-2">[PERFORMANCE-TIMELINE-2]</dt>
<dd>
      <a href="www.w3.org/TR/performance-timeline/"><cite>Performance Timeline</cite></a>. Nicolas Pena Moreno.  W3C. 11 October 2023. W3C Candidate Recommendation. URL: <a href="www.w3.org/TR/performance-timeline/">https://www.w3.org/TR/performance-timeline/</a>
    </dd>
<dt id="bib-rfc2119">[RFC2119]</dt>
<dd>
      <a href="www.rfc-editor.org/rfc/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. S. Bradner.  IETF. March 1997. Best Current Practice. URL: <a href="www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
    </dd>
<dt id="bib-rfc8174">[RFC8174]</dt>
<dd>
      <a href="www.rfc-editor.org/rfc/rfc8174"><cite>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</cite></a>. B. Leiba.  IETF. May 2017. Best Current Practice. URL: <a href="www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
    </dd>
<dt id="bib-webidl">[WEBIDL]</dt>
<dd>
      <a href="webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Edgar Chen; Timothy Gu.  WHATWG. Living Standard. URL: <a href="webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
    </dd>
</dl>
  </section><section id="informative-references"><div class="header-wrapper">
<h3 id="b-2-informative-references">
<bdi class="secno">B.2 </bdi>Informative references</h3>
<a class="self-link" href="#informative-references" aria-label="Permalink for Appendix B.2"></a>
</div>
    
    <dl class="bibliography">
<dt id="bib-ecma-262">[ECMA-262]</dt>
<dd>
      <a href="tc39.es/ecma262/multipage/"><cite>ECMAScript Language Specification</cite></a>.  Ecma International. URL: <a href="tc39.es/ecma262/multipage/">https://tc39.es/ecma262/multipage/</a>
    </dd>
<dt id="bib-navigation-timing-2">[NAVIGATION-TIMING-2]</dt>
<dd>
      <a href="www.w3.org/TR/navigation-timing-2/"><cite>Navigation Timing Level 2</cite></a>. Yoav Weiss; Noam Rosenthal.  W3C. 24 October 2023. W3C Working Draft. URL: <a href="www.w3.org/TR/navigation-timing-2/">https://www.w3.org/TR/navigation-timing-2/</a>
    </dd>
<dt id="bib-user-timing-2">[USER-TIMING-2]</dt>
<dd>
      <a href="www.w3.org/TR/user-timing-2/"><cite>User Timing Level 2</cite></a>. Ilya Grigorik.  W3C. 26 February 2019. W3C Recommendation. URL: <a href="www.w3.org/TR/user-timing-2/">https://www.w3.org/TR/user-timing-2/</a>
    </dd>
</dl>
  </section></section><p role="navigation" id="back-to-top">
    <a href="#title"><abbr title="Back to Top">↑</abbr></a>
  </p>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-performance-mark" aria-label="Links in this document to definition: mark()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-performance-mark" aria-label="Permalink for definition: mark(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1427196332">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-performance-mark-1" title="§ 3.1 Extensions to the Performance interface">§ 3.1 Extensions to the Performance interface</a> 
    </li>
<li>
      <a href="#ref-for-dom-performance-mark-2" title="§ 3.2 The PerformanceMark Interface">§ 3.2 The PerformanceMark Interface</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-performancemarkoptions" aria-label="Links in this document to definition: PerformanceMarkOptions">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-performancemarkoptions" aria-label="Permalink for definition: PerformanceMarkOptions. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1427196332">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-performancemarkoptions-1" title="§ 3.1 Extensions to the Performance interface">§ 3.1 Extensions to the Performance interface</a> <a href="#ref-for-dom-performancemarkoptions-2" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dom-performancemarkoptions-3" title="§ 3.2 The PerformanceMark Interface">§ 3.2 The PerformanceMark Interface</a> <a href="#ref-for-dom-performancemarkoptions-4" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-performancemarkoptions-detail" aria-label="Links in this document to definition: detail">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-performancemarkoptions-detail" aria-label="Permalink for definition: detail. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1427196332">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-performancemarkoptions-detail-1" title="§ 3.1 Extensions to the Performance interface">§ 3.1 Extensions to the Performance interface</a> 
    </li>
<li>
      <a href="#ref-for-dom-performancemarkoptions-detail-2" title="§ 3.2.1 The PerformanceMark Constructor">§ 3.2.1 The PerformanceMark Constructor</a> <a href="#ref-for-dom-performancemarkoptions-detail-3" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-performancemarkoptions-starttime" aria-label="Links in this document to definition: startTime">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-performancemarkoptions-starttime" aria-label="Permalink for definition: startTime. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1427196332">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-performancemarkoptions-starttime-1" title="§ 3.1 Extensions to the Performance interface">§ 3.1 Extensions to the Performance interface</a> 
    </li>
<li>
      <a href="#ref-for-dom-performancemarkoptions-starttime-2" title="§ 3.2.1 The PerformanceMark Constructor">§ 3.2.1 The PerformanceMark Constructor</a> <a href="#ref-for-dom-performancemarkoptions-starttime-3" title="Reference 2">(2)</a> <a href="#ref-for-dom-performancemarkoptions-starttime-4" title="Reference 3">(3)</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-performance-clearmarks" aria-label="Links in this document to definition: clearMarks()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-performance-clearmarks" aria-label="Permalink for definition: clearMarks(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1427196332">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-performance-clearmarks-1" title="§ 3.1 Extensions to the Performance interface">§ 3.1 Extensions to the Performance interface</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-performance-measure" aria-label="Links in this document to definition: measure()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-performance-measure" aria-label="Permalink for definition: measure(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1427196332">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-performance-measure-1" title="§ 3.1 Extensions to the Performance interface">§ 3.1 Extensions to the Performance interface</a> 
    </li>
<li>
      <a href="#ref-for-dom-performance-measure-2" title="§ 3.3 The PerformanceMeasure Interface">§ 3.3 The PerformanceMeasure Interface</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-performancemeasureoptions" aria-label="Links in this document to definition: PerformanceMeasureOptions">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-performancemeasureoptions" aria-label="Permalink for definition: PerformanceMeasureOptions. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1427196332">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-performancemeasureoptions-1" title="§ 3.1 Extensions to the Performance interface">§ 3.1 Extensions to the Performance interface</a> <a href="#ref-for-dom-performancemeasureoptions-2" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dom-performancemeasureoptions-3" title="§ 3.1.3 measure() method">§ 3.1.3 measure() method</a> <a href="#ref-for-dom-performancemeasureoptions-4" title="Reference 2">(2)</a> <a href="#ref-for-dom-performancemeasureoptions-5" title="Reference 3">(3)</a> <a href="#ref-for-dom-performancemeasureoptions-6" title="Reference 4">(4)</a> <a href="#ref-for-dom-performancemeasureoptions-7" title="Reference 5">(5)</a> <a href="#ref-for-dom-performancemeasureoptions-8" title="Reference 6">(6)</a> 
    </li>
<li>
      <a href="#ref-for-dom-performancemeasureoptions-9" title="§ 3.3 The PerformanceMeasure Interface">§ 3.3 The PerformanceMeasure Interface</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-performancemeasureoptions-detail" aria-label="Links in this document to definition: detail">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-performancemeasureoptions-detail" aria-label="Permalink for definition: detail. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1427196332">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-performancemeasureoptions-detail-1" title="§ 3.1 Extensions to the Performance interface">§ 3.1 Extensions to the Performance interface</a> 
    </li>
<li>
      <a href="#ref-for-dom-performancemeasureoptions-detail-2" title="§ 3.1.3 measure() method">§ 3.1.3 measure() method</a> <a href="#ref-for-dom-performancemeasureoptions-detail-3" title="Reference 2">(2)</a> <a href="#ref-for-dom-performancemeasureoptions-detail-4" title="Reference 3">(3)</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-performancemeasureoptions-start" aria-label="Links in this document to definition: start">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-performancemeasureoptions-start" aria-label="Permalink for definition: start. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1427196332">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-performancemeasureoptions-start-1" title="§ 3.1 Extensions to the Performance interface">§ 3.1 Extensions to the Performance interface</a> 
    </li>
<li>
      <a href="#ref-for-dom-performancemeasureoptions-start-2" title="§ 3.1.3 measure() method">§ 3.1.3 measure() method</a> <a href="#ref-for-dom-performancemeasureoptions-start-3" title="Reference 2">(2)</a> <a href="#ref-for-dom-performancemeasureoptions-start-4" title="Reference 3">(3)</a> <a href="#ref-for-dom-performancemeasureoptions-start-5" title="Reference 4">(4)</a> <a href="#ref-for-dom-performancemeasureoptions-start-6" title="Reference 5">(5)</a> <a href="#ref-for-dom-performancemeasureoptions-start-7" title="Reference 6">(6)</a> <a href="#ref-for-dom-performancemeasureoptions-start-8" title="Reference 7">(7)</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-performancemeasureoptions-duration" aria-label="Links in this document to definition: duration">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-performancemeasureoptions-duration" aria-label="Permalink for definition: duration. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1427196332">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-performancemeasureoptions-duration-1" title="§ 3.1 Extensions to the Performance interface">§ 3.1 Extensions to the Performance interface</a> 
    </li>
<li>
      <a href="#ref-for-dom-performancemeasureoptions-duration-2" title="§ 3.1.3 measure() method">§ 3.1.3 measure() method</a> <a href="#ref-for-dom-performancemeasureoptions-duration-3" title="Reference 2">(2)</a> <a href="#ref-for-dom-performancemeasureoptions-duration-4" title="Reference 3">(3)</a> <a href="#ref-for-dom-performancemeasureoptions-duration-5" title="Reference 4">(4)</a> <a href="#ref-for-dom-performancemeasureoptions-duration-6" title="Reference 5">(5)</a> <a href="#ref-for-dom-performancemeasureoptions-duration-7" title="Reference 6">(6)</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-performancemeasureoptions-end" aria-label="Links in this document to definition: end">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-performancemeasureoptions-end" aria-label="Permalink for definition: end. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1427196332">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-performancemeasureoptions-end-1" title="§ 3.1 Extensions to the Performance interface">§ 3.1 Extensions to the Performance interface</a> 
    </li>
<li>
      <a href="#ref-for-dom-performancemeasureoptions-end-2" title="§ 3.1.3 measure() method">§ 3.1.3 measure() method</a> <a href="#ref-for-dom-performancemeasureoptions-end-3" title="Reference 2">(2)</a> <a href="#ref-for-dom-performancemeasureoptions-end-4" title="Reference 3">(3)</a> <a href="#ref-for-dom-performancemeasureoptions-end-5" title="Reference 4">(4)</a> <a href="#ref-for-dom-performancemeasureoptions-end-6" title="Reference 5">(5)</a> <a href="#ref-for-dom-performancemeasureoptions-end-7" title="Reference 6">(6)</a> <a href="#ref-for-dom-performancemeasureoptions-end-8" title="Reference 7">(7)</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-performance-clearmeasures" aria-label="Links in this document to definition: clearMeasures()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-performance-clearmeasures" aria-label="Permalink for definition: clearMeasures(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1427196332">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-performance-clearmeasures-1" title="§ 3.1 Extensions to the Performance interface">§ 3.1 Extensions to the Performance interface</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-performancemark" aria-label="Links in this document to definition: PerformanceMark">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-performancemark" aria-label="Permalink for definition: PerformanceMark. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-2100037145">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-performancemark-1" title="§ 1. Introduction">§ 1. Introduction</a> 
    </li>
<li>
      <a href="#ref-for-dom-performancemark-2" title="§ 3.1 Extensions to the Performance interface">§ 3.1 Extensions to the Performance interface</a> 
    </li>
<li>
      <a href="#ref-for-dom-performancemark-3" title="§ 3.1.2 clearMarks() method">§ 3.1.2 clearMarks() method</a> <a href="#ref-for-dom-performancemark-4" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dom-performancemark-5" title="§ 3.2 The PerformanceMark Interface">§ 3.2 The PerformanceMark Interface</a> <a href="#ref-for-dom-performancemark-6" title="Reference 2">(2)</a> <a href="#ref-for-dom-performancemark-7" title="Reference 3">(3)</a> <a href="#ref-for-dom-performancemark-8" title="Reference 4">(4)</a> 
    </li>
<li>
      <a href="#ref-for-dom-performancemark-9" title="§ 3.2.1 The PerformanceMark Constructor">§ 3.2.1 The PerformanceMark Constructor</a> <a href="#ref-for-dom-performancemark-10" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dom-performancemark-11" title="§ 4.1 Convert a mark to a timestamp">§ 4.1 Convert a mark to a timestamp</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-performancemark-constructor" aria-label="Links in this document to definition: constructor">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-performancemark-constructor" aria-label="Permalink for definition: constructor. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-performancemark-detail" aria-label="Links in this document to definition: detail">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-performancemark-detail" aria-label="Permalink for definition: detail. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-2100037145">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-performancemark-detail-1" title="§ 3.2 The PerformanceMark Interface">§ 3.2 The PerformanceMark Interface</a> 
    </li>
<li>
      <a href="#ref-for-dom-performancemark-detail-2" title="§ 3.2.1 The PerformanceMark Constructor">§ 3.2.1 The PerformanceMark Constructor</a> <a href="#ref-for-dom-performancemark-detail-3" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dom-performancemark-detail-4" title="§ 5. Recommended mark names">§ 5. Recommended mark names</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-performancemark-constructor" aria-label="Links in this document to definition: PerformanceMark Constructor">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-performancemark-constructor" aria-label="Permalink for definition: PerformanceMark Constructor. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-performancemark-constructor-1" title="§ 3.1.1 mark() method">§ 3.1.1 mark() method</a> 
    </li>
<li>
      <a href="#ref-for-dfn-performancemark-constructor-2" title="§ 3.2.1 The PerformanceMark Constructor">§ 3.2.1 The PerformanceMark Constructor</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-performancemeasure" aria-label="Links in this document to definition: PerformanceMeasure">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-performancemeasure" aria-label="Permalink for definition: PerformanceMeasure. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-815144918">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-performancemeasure-1" title="§ 1. Introduction">§ 1. Introduction</a> 
    </li>
<li>
      <a href="#ref-for-dom-performancemeasure-2" title="§ 3.1 Extensions to the Performance interface">§ 3.1 Extensions to the Performance interface</a> 
    </li>
<li>
      <a href="#ref-for-dom-performancemeasure-3" title="§ 3.1.3 measure() method">§ 3.1.3 measure() method</a> 
    </li>
<li>
      <a href="#ref-for-dom-performancemeasure-4" title="§ 3.1.4 clearMeasures() method">§ 3.1.4 clearMeasures() method</a> <a href="#ref-for-dom-performancemeasure-5" title="Reference 2">(2)</a> 
    </li>
<li>
      <a href="#ref-for-dom-performancemeasure-6" title="§ 3.3 The PerformanceMeasure Interface">§ 3.3 The PerformanceMeasure Interface</a> <a href="#ref-for-dom-performancemeasure-7" title="Reference 2">(2)</a> <a href="#ref-for-dom-performancemeasure-8" title="Reference 3">(3)</a> <a href="#ref-for-dom-performancemeasure-9" title="Reference 4">(4)</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-performancemeasure-detail" aria-label="Links in this document to definition: detail">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-performancemeasure-detail" aria-label="Permalink for definition: detail. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-815144918">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-performancemeasure-detail-1" title="§ 3.1.3 measure() method">§ 3.1.3 measure() method</a> 
    </li>
<li>
      <a href="#ref-for-dom-performancemeasure-detail-2" title="§ 3.3 The PerformanceMeasure Interface">§ 3.3 The PerformanceMeasure Interface</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-convert-a-mark-to-a-timestamp" aria-label="Links in this document to definition: convert a mark to a timestamp">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-convert-a-mark-to-a-timestamp" aria-label="Permalink for definition: convert a mark to a timestamp. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-convert-a-mark-to-a-timestamp-1" title="§ 3.1.3 measure() method">§ 3.1.3 measure() method</a> <a href="#ref-for-dfn-convert-a-mark-to-a-timestamp-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-convert-a-mark-to-a-timestamp-3" title="Reference 3">(3)</a> <a href="#ref-for-dfn-convert-a-mark-to-a-timestamp-4" title="Reference 4">(4)</a> <a href="#ref-for-dfn-convert-a-mark-to-a-timestamp-5" title="Reference 5">(5)</a> <a href="#ref-for-dfn-convert-a-mark-to-a-timestamp-6" title="Reference 6">(6)</a> <a href="#ref-for-dfn-convert-a-mark-to-a-timestamp-7" title="Reference 7">(7)</a> <a href="#ref-for-dfn-convert-a-mark-to-a-timestamp-8" title="Reference 8">(8)</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-convert-a-name-to-a-timestamp" aria-label="Links in this document to definition: convert a name to a timestamp">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-convert-a-name-to-a-timestamp" aria-label="Permalink for definition: convert a name to a timestamp. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-convert-a-name-to-a-timestamp-1" title="§ 4.1 Convert a mark to a timestamp">§ 4.1 Convert a mark to a timestamp</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-mark_fully_loaded" aria-label="Links in this document to definition: mark_fully_loaded">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-mark_fully_loaded" aria-label="Permalink for definition: mark_fully_loaded. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-mark_fully_loaded-1" title="§ 5. Recommended mark names">§ 5. Recommended mark names</a> 
    </li>
  </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-mark_fully_visible" aria-label="Links in this document to definition: mark_fully_visible">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-mark_fully_visible" aria-label="Permalink for definition: mark_fully_visible. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-mark_interactive" aria-label="Links in this document to definition: mark_interactive">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-mark_interactive" aria-label="Permalink for definition: mark_interactive. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-mark_feature_usage" aria-label="Links in this document to definition: mark_feature_usage">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-mark_feature_usage" aria-label="Permalink for definition: mark_feature_usage. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-feature" aria-label="Links in this document to definition: feature">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-feature" aria-label="Permalink for definition: feature. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </div>
<div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-framework" aria-label="Links in this document to definition: framework">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-framework" aria-label="Permalink for definition: framework. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </div>
<script id="respec-dfn-panel">(() => {
// @ts-check
if (document.respec) {
  document.respec.ready.then(setupPanel);
} else {
  setupPanel();
}

function setupPanel() {
  const listener = panelListener();
  document.body.addEventListener("keydown", listener);
  document.body.addEventListener("click", listener);
}

function panelListener() {
  /** @type {HTMLElement} */
  let panel = null;
  return event => {
    const { target, type } = event;

    if (!(target instanceof HTMLElement)) return;

    // For keys, we only care about Enter key to activate the panel
    // otherwise it's activated via a click.
    if (type === "keydown" && event.key !== "Enter") return;

    const action = deriveAction(event);

    switch (action) {
      case "show": {
        hidePanel(panel);
        /** @type {HTMLElement} */
        const dfn = target.closest("dfn, .index-term");
        panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
        const coords = deriveCoordinates(event);
        displayPanel(dfn, panel, coords);
        break;
      }
      case "dock": {
        panel.style.left = null;
        panel.style.top = null;
        panel.classList.add("docked");
        break;
      }
      case "hide": {
        hidePanel(panel);
        panel = null;
        break;
      }
    }
  };
}

/**
 * @param {MouseEvent|KeyboardEvent} event
 */
function deriveCoordinates(event) {
  const target = /** @type HTMLElement */ (event.target);

  // We prevent synthetic AT clicks from putting
  // the dialog in a weird place. The AT events sometimes
  // lack coordinates, so they have clientX/Y = 0
  const rect = target.getBoundingClientRect();
  if (
    event instanceof MouseEvent &&
    event.clientX >= rect.left &&
    event.clientY >= rect.top
  ) {
    // The event probably happened inside the bounding rect...
    return { x: event.clientX, y: event.clientY };
  }

  // Offset to the middle of the element
  const x = rect.x + rect.width / 2;
  // Placed at the bottom of the element
  const y = rect.y + rect.height;
  return { x, y };
}

/**
 * @param {Event} event
 */
function deriveAction(event) {
  const target = /** @type {HTMLElement} */ (event.target);
  const hitALink = !!target.closest("a");
  if (target.closest("dfn:not([data-cite]), .index-term")) {
    return hitALink ? "none" : "show";
  }
  if (target.closest(".dfn-panel")) {
    if (hitALink) {
      return target.classList.contains("self-link") ? "hide" : "dock";
    }
    const panel = target.closest(".dfn-panel");
    return panel.classList.contains("docked") ? "hide" : "none";
  }
  if (document.querySelector(".dfn-panel:not([hidden])")) {
    return "hide";
  }
  return "none";
}

/**
 * @param {HTMLElement} dfn
 * @param {HTMLElement} panel
 * @param {{ x: number, y: number }} clickPosition
 */
function displayPanel(dfn, panel, { x, y }) {
  panel.hidden = false;
  // distance (px) between edge of panel and the pointing triangle (caret)
  const MARGIN = 20;

  const dfnRects = dfn.getClientRects();
  // Find the `top` offset when the `dfn` can be spread across multiple lines
  let closestTop = 0;
  let minDiff = Infinity;
  for (const rect of dfnRects) {
    const { top, bottom } = rect;
    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
    if (diffFromClickY < minDiff) {
      minDiff = diffFromClickY;
      closestTop = top;
    }
  }

  const top = window.scrollY + closestTop + dfnRects[0].height;
  const left = x - MARGIN;
  panel.style.left = `${left}px`;
  panel.style.top = `${top}px`;

  // Find if the panel is flowing out of the window
  const panelRect = panel.getBoundingClientRect();
  const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
  if (panelRect.right > SCREEN_WIDTH) {
    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
    const newCaretOffset = left - newLeft;
    panel.style.left = `${newLeft}px`;
    /** @type {HTMLElement} */
    const caret = panel.querySelector(".caret");
    caret.style.left = `${newCaretOffset}px`;
  }

  // As it's a dialog, we trap focus.
  // TODO: when <dialog> becomes a implemented, we should really
  // use that.
  trapFocus(panel, dfn);
}

/**
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function trapFocus(panel, dfn) {
  /** @type NodeListOf<HTMLAnchorElement> elements */
  const anchors = panel.querySelectorAll("a[href]");
  // No need to trap focus
  if (!anchors.length) return;

  // Move focus to first anchor element
  const first = anchors.item(0);
  first.focus();

  const trapListener = createTrapListener(anchors, panel, dfn);
  panel.addEventListener("keydown", trapListener);

  // Hiding the panel releases the trap
  const mo = new MutationObserver(records => {
    const [record] = records;
    const target = /** @type HTMLElement */ (record.target);
    if (target.hidden) {
      panel.removeEventListener("keydown", trapListener);
      mo.disconnect();
    }
  });
  mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
}

/**
 *
 * @param {NodeListOf<HTMLAnchorElement>} anchors
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function createTrapListener(anchors, panel, dfn) {
  const lastIndex = anchors.length - 1;
  let currentIndex = 0;
  return event => {
    switch (event.key) {
      // Hitting "Tab" traps us in a nice loop around elements.
      case "Tab": {
        event.preventDefault();
        currentIndex += event.shiftKey ? -1 : +1;
        if (currentIndex < 0) {
          currentIndex = lastIndex;
        } else if (currentIndex > lastIndex) {
          currentIndex = 0;
        }
        anchors.item(currentIndex).focus();
        break;
      }

      // Hitting "Enter" on an anchor releases the trap.
      case "Enter":
        hidePanel(panel);
        break;

      // Hitting "Escape" returns focus to dfn.
      case "Escape":
        hidePanel(panel);
        dfn.focus();
        return;
    }
  };
}

/** @param {HTMLElement} panel */
function hidePanel(panel) {
  if (!panel) return;
  panel.hidden = true;
  panel.classList.remove("docked");
}
})()</script><script src="www.w3.org/scripts/TR/2021/fixup.js"></script>
</body>
</html>